define("modules/clean/base64",["require","exports"],function(e,t){"use strict";function i(e){var t=[],i=0,r=0,s=0,o=0,n=0;for(e+="";i<e.length;)s=e.charCodeAt(i),s<128?(t[r++]=String.fromCharCode(s),i++):s>191&&s<224?(o=e.charCodeAt(i+1),t[r++]=String.fromCharCode((31&s)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),n=e.charCodeAt(i+2),t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&n),i+=3);return t.join("")}function r(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=void 0,r=void 0,s=void 0,o=void 0,n=void 0,a=void 0,l=void 0,d=void 0,u=0,c=0,_="",p=[];if(!e)return e;for(;;)if(i=e.charCodeAt(u++),r=e.charCodeAt(u++),s=e.charCodeAt(u++),d=i<<16|r<<8|s,o=d>>18&63,n=d>>12&63,a=d>>6&63,l=63&d,p[c++]=t.charAt(o)+t.charAt(n)+t.charAt(a)+t.charAt(l),!(u<e.length))break;_=p.join("");var S=e.length%3;return(S?_.slice(0,S-3):_)+"===".slice(S||3)}function s(e,t){var r=function(e){return e},s=t?r:i;if("function"==typeof window.atob)return s(window.atob(e));var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=0,a=0,l=[];if(!e)return e;for(e+="";;){var d=o.indexOf(e.charAt(n++)),u=o.indexOf(e.charAt(n++)),c=o.indexOf(e.charAt(n++)),_=o.indexOf(e.charAt(n++)),p=d<<18|u<<12|c<<6|_,S=p>>16&255,f=p>>8&255,h=255&p;if(l[a++]=64===c?String.fromCharCode(S):64===_?String.fromCharCode(S,f):String.fromCharCode(S,f,h),!(n<e.length))break}var E=l.join("");return E=s(E)}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=r,t.decode=s}),define("modules/clean/react/browse/action_logger",["require","exports","tslib","modules/clean/analytics","modules/clean/filepath","modules/clean/react/browse/logger_util","modules/clean/search/search_bar/data/store","modules/clean/search/search_bar/data/selectors","modules/clean/web_user_action_events","modules/clean/analytics","modules/clean/logging/hive/schemas/web-user-action","modules/clean/logging/telemetry"],function(e,t,i,r,s,o,n,a,l,d,u,c){"use strict";function _(e,r,n,a,l,d,c){var _={num_files_selected:a,num_folders_selected:l,source:r,view_type:d};if(o.isFile(c)){var p=c,S=p.request_id,f=p.ns_id,h=p.sjid,E=p.file_id,T=p.fq_path,F=p.bytes,y=p.ext;_=i.__assign({},_,{request_id:S,file_nsid:f,file_sjid:h,file_id:E,file_name:s.filename(T),file_path:T,file_size:F,file_extension:y})}else if(o.isPaper(c)){var p=c,S=p.request_id;_=i.__assign({},_,{request_id:S})}t.hiveLogger.log(new u.WebUserActionRow({user_id:e,event_name:n,source:r,view_type:d,request_id:_.request_id,file_nsid:_.file_nsid,file_sjid:_.file_sjid,file_id:_.file_id,file_name:_.file_name,file_path:_.file_path,file_size:_.file_size,file_extension:_.file_extension,extra:{num_files_selected:_.num_files_selected?_.num_files_selected.toString():null,num_folders_selected:_.num_folders_selected?_.num_folders_selected.toString():null}}))}function p(e){var i=e.uid,r=e.entity_type,s=e.view_type,o=e.file_nsid,n=e.file_sjid,a=e.file_id,d=e.file_name,c=e.file_path,_=e.file_size,p=e.file_extension,S=e.request_id;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.SELECT_ROW,view_type:s,file_nsid:o,file_sjid:n,file_id:a,file_name:d,file_path:c,file_size:_,file_extension:p,request_id:S,extra:{entity_type:r}}))}function S(e){var i=e.uid,r=e.entity_type,s=e.source,o=e.view_type,n=e.file_nsid,a=e.file_sjid,d=e.file_id,c=e.file_name,_=e.file_path,p=e.file_size,S=e.file_extension,f=e.request_id;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.OPEN_ROW,source:s,view_type:o,file_nsid:n,file_sjid:a,file_id:d,file_name:c,file_path:_,file_size:p,file_extension:S,request_id:f,extra:{entity_type:r}}))}function f(e){var i=e.uid,r=e.view_type;e.file_nsid,e.file_path,e.file_name;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.CREATE_FOLDER,view_type:r}))}function h(e){var i=e.uid,r=e.modal_session_id,s=e.file_nsid,o=e.file_sjid,n=e.file_id,a=e.file_name,d=e.file_path;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.VIEW_SHARE_MODEL,file_nsid:s,file_sjid:o,file_id:n,file_name:a,file_path:d,extra:{modal_session_id:r}}))}function E(e){var i=e.uid,r=e.show_deleted_files,s=e.view_type;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.TOGGLE_DELETED_FILES,view_type:s,extra:{show_deleted_files:r.toString()}}))}function T(e){var i=e.uid,r=e.sort_by,s=e.sort_direction,o=e.view_type;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.SORT_RECORDS,view_type:o,extra:{sort_by:r,sort_direction:s}}))}function F(e){var i=e.uid,r=e.isSearchMode,s=e.viewType;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.SWITCH_VIEW_TYPE,view_type:s})),r&&d.SearchClientActivityLogger.log("switch_view_type",i,{search_session_id:a.searchSessionId(n.getStoreForSearchBar().getState()),view_type:s})}function y(e){var i=e.uid,r=e.source,s=e.view_type,o=e.file_nsid,n=e.file_path,a=e.file_name,d=e.num_files_selected,c=e.num_folders_selected;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.RESTORE,source:r,view_type:s,file_nsid:o,file_path:n,file_name:a,extra:{num_files_selected:d?d.toString():null,num_folders_selected:c?c.toString():null}}))}function m(e){var i=e.uid,r=e.event_name,s=e.selectedPath;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:r,extra:s?{selectedPath:s}:{}}))}function v(e){var t=e.team_id,i=e.url;r.TeamsWebActionsLogger.log("view_in_dropbox_link_clicked",{team_id:t,url:i})}function A(e){var t=e.team_id,i=e.url;r.TeamsWebActionsLogger.log("view_in_dropbox_client_open",{team_id:t,url:i})}function g(e){var t=e.error_message,i=e.team_id,s=e.url;r.TeamsWebActionsLogger.log("view_in_dropbox_link_error",{error_message:t,team_id:i,url:s})}function O(e){var t=e.uid,i=e.source,r=e.view_type,s=e.result,o=e.num_files_selected,n=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.MOVE,o,n,r,s)}function w(e){var t=e.uid,i=e.source,r=e.view_type,s=e.result,o=e.num_files_selected,n=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.OPEN_ADD_TO_COLLECTION_MODAL,o,n,r,s)}function L(e){var t=e.uid,i=e.source,r=e.view_type,s=e.result,o=e.num_files_selected,n=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.COPY,o,n,r,s)}function R(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.VERSIONS,s,o,r)}function D(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.OPEN_MOVE_MODAL,s,o,r)}function P(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.RENAME,s,o,r)}function I(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.ADD_COMMENT,s,o,r)}function C(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.DOWNLOAD,s,o,r)}function N(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.OPEN_COPY_MODAL,s,o,r)}function x(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.DELETE,s,o,r)}function b(e){var t=e.uid,i=e.source,r=e.view_type,s=e.num_files_selected,o=e.num_folders_selected;_(t,i,l.WebUserActionLogEvent.PERMANENT_DELETE,s,o,r)}function z(e){var i=e.uid,r=e.action;t.hiveLogger.log(new u.WebUserActionRow({user_id:i,event_name:r}))}Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.MAESTRO_RIGHT_SIDEBAR="MAESTRO_RIGHT_SIDEBAR",e.MAESTRO_PHOTOS_RIGHT_SIDEBAR="MAESTRO_PHOTOS_RIGHT_SIDEBAR",e.LEGACY_HEADER_ACTIONS="LEGACY_HEADER_ACTIONS",e.DRAG="DRAG"})(t.BrowseLogEventSource||(t.BrowseLogEventSource={})),t.hiveLogger=new c.HiveLogger,t.logBrowseAction=_,t.logSelectRow=p,t.logOpenRow=S,t.logCreateFolder=f,t.logViewShareModel=h,t.logToggleDeletedFiles=E,t.logSortRecords=T,t.logSwitchViewType=F,t.logRestore=y,t.logFileOperationModalClick=m,t.logOpenLocalCopyClick=v,t.logOpenLocalCopySuccess=A,t.logOpenLocalCopyError=g,t.logMoveFiles=O,t.logOpenAddToCollectionModal=w,t.logCopyFiles=L,t.logVersions=R,t.logOpenMoveModal=D,t.logRenameFiles=P,t.logAddComment=I,t.logDownload=C,t.logOpenCopyModal=N,t.logDeleteFiles=x,t.logPermanentDeleteFiles=b,t.logFileCreateClick=z}),define("modules/clean/react/browse/data/action_creators",["require","exports","tslib","modules/clean/react/browse/action_logger","modules/clean/react/browse/constants","modules/clean/react/browse/data/selectors","modules/clean/react/browse/data/types","modules/clean/react/files_view/constants","modules/clean/storage","modules/core/cookies"],function(e,t,i,r,s,o,n,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.appInit=function(e){var t=e.experiments,i=e.shouldShowDeletedFiles,r=e.user,s=e.viewer;return{type:n.ActionTypes.APP_INIT,payload:{experiments:t,shouldShowDeletedFiles:i,user:r,viewer:s}}},t.selectFilesByFqPath=function(e){var t=e.fqPathsToSelect;return{type:n.ActionTypes.SELECT_FILES_BY_FQ_PATH,payload:{fqPathsToSelect:t}}},t.setCanDisplayFolderSizes=function(e){var t=e.canDisplayFolderSizes;return{type:n.ActionTypes.SET_CAN_DISPLAY_FOLDER_SIZES,payload:{canDisplayFolderSizes:t}}},t.setClipboardFiles=function(e){var t=e.clipboardFiles;return{type:n.ActionTypes.SET_CLIPBOARD_FILES,payload:{clipboardFiles:t}}},t.setContext=function(e){var t=e.context;return{type:n.ActionTypes.SET_CONTEXT,payload:{context:t}}},t.setDropTarget=function(e){var t=e.dropTarget;return{type:n.ActionTypes.SET_DROP_TARGET,payload:{dropTarget:t}}},t.setFileJumpFilter=function(e){var t=e.fileJumpFilter;return{type:n.ActionTypes.SET_FILE_JUMP_FILTER,payload:{fileJumpFilter:t}}},t.setFilePathsToSelectOnNextUpdate=function(e){var t=e.filePathsToSelectOnNextUpdate;return{type:n.ActionTypes.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE,payload:{filePathsToSelectOnNextUpdate:t}}},t.setFolderSizes=function(e){var t=e.folderSizes;return{type:n.ActionTypes.SET_FOLDER_SIZES,payload:{folderSizes:t}}},t.setLoadingState=function(e){var t=e.loadingState,i=e.path;return{type:n.ActionTypes.SET_LOADING_STATE,payload:{loadingState:t,path:i}}},t.setNewFolderCreationState=function(e){var t=e.newFolderCreationState;return{type:n.ActionTypes.SET_NEW_FOLDER_CREATION_STATE,payload:{newFolderCreationState:t}}},t.setPaginatedTotalNumFiles=function(e){var t=e.paginatedTotalNumFiles;return{type:n.ActionTypes.SET_PAGINATED_TOTAL_NUM_FILES,payload:{paginatedTotalNumFiles:t}}},t.setPath=function(e){var t=e.path;return{type:n.ActionTypes.SET_PATH,payload:{path:t}}},t.setSelection=function(e){var t=e.selection;return{type:n.ActionTypes.SET_SELECTION,payload:{selection:t}}},t.setShouldShowDeletedFiles=function(e){var t=e.shouldShowDeletedFiles;return{type:n.ActionTypes.SET_SHOULD_SHOW_DELETED_FILES,payload:{shouldShowDeletedFiles:t}}};var u=function(e){var t=e.sortOrder;return{type:n.ActionTypes.SET_SORT_ORDER,payload:{sortOrder:t}}};t.restoreSortOrder=function(){return function(e,t){var i=d.Cookies.read(s.BROWSE_SORT_COOKIE_NAME);if(i&&i.indexOf("|")>-1){var r=i.split("|",2),n={sortField:r[0],sortDirection:r[1]},a=o.sortOrder(t());n.sortDirection===a.sortDirection&&n.sortField===a.sortField||e(u({sortOrder:n}))}}},t.setAndStoreSortOrder=function(e){var t=e.sortOrder;return function(e,i){d.Cookies.delete(s.BROWSE_SORT_COOKIE_NAME);var r=t.sortField+"|"+t.sortDirection;d.Cookies.create(s.BROWSE_SORT_COOKIE_NAME,r,1095),e(u({sortOrder:t}))}},t.setSortedFiles=function(e){var t=e.sortedFiles;return{type:n.ActionTypes.SET_SORTED_FILES,payload:{sortedFiles:t}}},t.setTilesPerRow=function(e){var t=e.tilesPerRow;return{type:n.ActionTypes.SET_TILES_PER_ROW,payload:{tilesPerRow:t}}},t.setUnsortedFiles=function(e){var t=e.unsortedFiles;return{type:n.ActionTypes.SET_UNSORTED_FILES,payload:{unsortedFiles:t}}},t.setAndStoreViewType=function(e){var t=e.viewType,i=e.isSearchMode;return function(e,n){var a=o.user(n()).id;d.Cookies.delete(s.VIEW_TYPE_COOKIE_NAME),d.Cookies.create(s.VIEW_TYPE_COOKIE_NAME,t,1095),r.logSwitchViewType({uid:a,isSearchMode:i,viewType:t}),e(c({viewType:t}))}};var c=function(e){var t=e.viewType;return{type:n.ActionTypes.SET_VIEW_TYPE,payload:{viewType:t}}};t.restoreViewType=function(){return function(e,t){var i=d.Cookies.read(s.VIEW_TYPE_COOKIE_NAME);null!==i&&i!==o.viewType(t())&&e(c({viewType:i}))}};var _=function(e){var t=e.viewTypeColumns;return{type:n.ActionTypes.SET_VIEW_TYPE_COLUMNS,payload:{viewTypeColumns:t}}};t.setAndStoreViewTypeColumns=function(e){var t=e.columns,r=e.viewType;return function(e,n){var a=o.user(n()).id;l.UserLocalStorage.set(a,s.COLUMNS_STORAGE_KEY+"_"+r,t),e(_({viewTypeColumns:i.__assign({},o.viewTypeColumns(n()),(d={},d[r]=t,d))}));var d}},t.restoreViewTypeColumns=function(){return function(e,t){var i=o.user(t()).id,r=o.viewTypeColumns(t());a.AllViewTypes.forEach(function(e){var t=l.UserLocalStorage.get(i,s.COLUMNS_STORAGE_KEY+"_"+e);t&&(r[e]=t)}),e(_({viewTypeColumns:r}))}},t.requestFolderSizes=function(e){var t=e.fqPath;return{type:n.ActionTypes.REQUEST_FOLDER_SIZES,payload:{fqPath:t}}},t.setFolderSizesPending=function(e){var t=e.fetchFolderSizesResp;return{type:n.ActionTypes.SET_FOLDER_SIZES_PENDING,payload:{fetchFolderSizesResp:t}}},t.completeFolderSizes=function(e){var t=e.fetchFolderSizeState;return{type:n.ActionTypes.COMPLETE_FOLDER_SIZES,payload:{fetchFolderSizeState:t}}}}),define("modules/clean/react/browse/data/reducer",["require","exports","tslib","external/immutable","modules/clean/filepath","modules/clean/react/browse/data/types","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/selection","modules/core/exception"],function(e,t,i,r,s,o,n,a,l,d,u){"use strict";function c(e,t){var r=t.payload,s=r.experiments,o=r.shouldShowDeletedFiles,n=r.user,a=r.viewer;return u.assert(null===e.user,"Cannot reinitialize Browse store; changing invariants such as `user` is untested"),i.__assign({},e,{experiments:s,shouldShowDeletedFiles:o,user:n,viewer:a})}function _(e,t){var s=t.payload.fqPathsToSelect,o=s.map(function(e){return e.toLowerCase()}),n=e.sortedFiles.filter(function(e){return o.includes(e.fq_path.toLowerCase())}),a=n.map(function(e){return e.fq_path}),l=r.OrderedSet(a),d=a.size?a.get(0):null;return i.__assign({},e,{selection:e.selection.set("selected",l).set("anchor",d)})}function p(e,t){var r=t.payload.canDisplayFolderSizes;return i.__assign({},e,{canDisplayFolderSizes:r})}function S(e,t){var r=t.payload.clipboardFiles;return i.__assign({},e,{clipboardFiles:r})}function f(e,t){var r=t.payload.context;return i.__assign({},e,{context:r})}function h(e,t){var r=t.payload.fileJumpFilter;return i.__assign({},e,{fileJumpFilter:r})}function E(e,t){var r=t.payload.filePathsToSelectOnNextUpdate;return i.__assign({},e,{filePathsToSelectOnNextUpdate:r})}function T(e,t){var r=t.payload.folderSizes;return i.__assign({},e,{folderSizes:r})}function F(e,t){var o=t.payload,n=o.loadingState,a=o.path;return s.paths_are_equal(a,e.path)?n===l.LoadingState.LOADED?i.__assign({},e,{loadingState:n,filePathsToSelectOnNextUpdate:r.Set()}):i.__assign({},e,{loadingState:n}):e}function y(e,t){var r=t.payload.newFolderCreationState;return i.__assign({},e,{newFolderCreationState:r})}function m(e,t){var r=t.payload.dropTarget;return i.__assign({},e,{dropTarget:r})}function v(e,t){var r=t.payload.paginatedTotalNumFiles;return i.__assign({},e,{paginatedTotalNumFiles:r})}function A(e,t){var r=t.payload.path;return i.__assign({},e,{path:r})}function g(e,t){var r=t.payload.selection;return i.__assign({},e,{selection:r})}function O(e,t){var r=t.payload.shouldShowDeletedFiles;return i.__assign({},e,{shouldShowDeletedFiles:r})}function w(e,t){var r=t.payload.sortOrder;return i.__assign({},e,{sortOrder:r})}function L(e,t){var r=t.payload.sortedFiles;return i.__assign({},e,{sortedFiles:r})}function R(e,t){var r=t.payload.tilesPerRow;return i.__assign({},e,{tilesPerRow:r})}function D(e,t){var r=t.payload.unsortedFiles;return i.__assign({},e,{unsortedFiles:r})}function P(e,t){var r=t.payload.viewType;return i.__assign({},e,{viewType:r})}function I(e,t){var r=t.payload.viewTypeColumns;return i.__assign({},e,{viewTypeColumns:r})}function C(e,t){var r=t.payload.fqPath;if(e.isQueryingFolderSizes)return e;var s=e.folderSizes.withMutations(function(e){e.set(r,{size:0,state:l.FetchFolderSizeState.LOADING})});return i.__assign({},e,{folderSizes:s,isQueryingFolderSizes:!0})}function N(e,t){var r=t.payload.fetchFolderSizesResp,s=e.currentFolderSizesQuery,o=e.folderSizes.withMutations(function(e){for(var t=function(t){e.update(t.fq_path,{size:0,state:l.FetchFolderSizeState.LOADING},function(e){return{size:e.size+t.size,state:l.FetchFolderSizeState.LOADING}}),s=s.withMutations(function(e){return e.add(t.fq_path)})},i=0,o=r.sizes_dict;i<o.length;i++){t(o[i])}});return i.__assign({},e,{currentFolderSizesQuery:s,folderSizes:o})}function x(e,t){var s=t.payload.fetchFolderSizeState,o=e.folderSizes.withMutations(function(t){e.currentFolderSizesQuery.forEach(function(i){var r=e.folderSizes.get(i);r&&t.update(i,function(){return{size:r.size,state:s}})})});return i.__assign({},e,{currentFolderSizesQuery:r.Set(),folderSizes:o,isQueryingFolderSizes:!1})}function b(e,i){switch(void 0===e&&(e=t.defaultBrowseState),i.type){case o.ActionTypes.APP_INIT:return c(e,i);case o.ActionTypes.RESET_TO_DEFAULT_FOR_TESTS_ONLY:return t.defaultBrowseState;case o.ActionTypes.SELECT_FILES_BY_FQ_PATH:return _(e,i);case o.ActionTypes.SET_CAN_DISPLAY_FOLDER_SIZES:return p(e,i);case o.ActionTypes.SET_CLIPBOARD_FILES:return S(e,i);case o.ActionTypes.SET_CONTEXT:return f(e,i);case o.ActionTypes.SET_DROP_TARGET:return m(e,i);case o.ActionTypes.SET_FILE_JUMP_FILTER:return h(e,i);case o.ActionTypes.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE:return E(e,i);case o.ActionTypes.SET_FOLDER_SIZES:return T(e,i);case o.ActionTypes.SET_LOADING_STATE:return F(e,i);case o.ActionTypes.SET_NEW_FOLDER_CREATION_STATE:return y(e,i);case o.ActionTypes.SET_PAGINATED_TOTAL_NUM_FILES:return v(e,i);case o.ActionTypes.SET_PATH:return A(e,i);case o.ActionTypes.SET_SELECTION:return g(e,i);case o.ActionTypes.SET_SHOULD_SHOW_DELETED_FILES:return O(e,i);case o.ActionTypes.SET_SORT_ORDER:return w(e,i);case o.ActionTypes.SET_SORTED_FILES:return L(e,i);case o.ActionTypes.SET_TILES_PER_ROW:return R(e,i);case o.ActionTypes.SET_UNSORTED_FILES:return D(e,i);case o.ActionTypes.SET_VIEW_TYPE:return P(e,i);case o.ActionTypes.SET_VIEW_TYPE_COLUMNS:return I(e,i);case o.ActionTypes.REQUEST_FOLDER_SIZES:return C(e,i);case o.ActionTypes.SET_FOLDER_SIZES_PENDING:return N(e,i);case o.ActionTypes.COMPLETE_FOLDER_SIZES:return x(e,i)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBrowseState={canDisplayFolderSizes:!1,clipboardFiles:[],context:new n.BrowseContext,dropTarget:null,experiments:{},fileJumpFilter:"",filePathsToSelectOnNextUpdate:r.Set(),folderSizes:r.Map(),loadingState:l.LoadingState.LOADING_FIRST_PAGE,newFolderCreationState:l.NewFolderCreationState.CREATE_FOLDER_INACTIVE,paginatedTotalNumFiles:0,path:"",selection:d.createSelection(),shouldShowDeletedFiles:!1,sortOrder:{sortField:l.SortField.FILENAME,sortDirection:l.SortDirection.ASCENDING},sortedFiles:r.List(),tilesPerRow:1,user:null,unsortedFiles:r.Map(),viewer:null,viewType:l.ViewType.List,viewTypeColumns:(z={},z[l.ViewType.List]=a.LIST_VIEW_COLUMNS,z[l.ViewType.Grid]=a.GRID_VIEW_COLUMNS,z[l.ViewType.LargeGrid]=a.GRID_VIEW_COLUMNS,z),currentFolderSizesQuery:r.Set(),isQueryingFolderSizes:!1},t.browseReducer=b;var z}),define("modules/clean/react/browse/data/selectors",["require","exports","external/immutable","external/reselect","modules/clean/filepath","modules/clean/react/browse/data/reducer","modules/clean/react/browse/uri_helper","modules/clean/redux/selectors","modules/clean/redux/types","modules/core/exception"],function(e,t,i,r,s,o,n,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return a.getStateAtNamespace(e,l.BROWSE_NAMESPACE_KEY)||o.defaultBrowseState};t.canDisplayFolderSizes=function(e){return u(e).canDisplayFolderSizes},t.clipboardFiles=function(e){return u(e).clipboardFiles},t.context=function(e){return u(e).context},t.dropTarget=function(e){return u(e).dropTarget},t.experiments=function(e){return u(e).experiments},t.fileJumpFilter=function(e){return u(e).fileJumpFilter},t.filePathsToSelectOnNextUpdate=function(e){return u(e).filePathsToSelectOnNextUpdate},t.folderSizes=function(e){return u(e).folderSizes},t.isFileJumping=function(e){return u(e).fileJumpFilter.length>0},t.isQueryingFolderSizes=function(e){return u(e).isQueryingFolderSizes},t.loadingState=function(e){return u(e).loadingState},t.newFolderCreationState=function(e){return u(e).newFolderCreationState},t.paginatedTotalNumFiles=function(e){return u(e).paginatedTotalNumFiles},t.path=function(e){return u(e).path},t.selection=function(e){return u(e).selection},t.shouldShowDeletedFiles=function(e){return u(e).shouldShowDeletedFiles},t.sortOrder=function(e){return u(e).sortOrder},t.sortedFiles=function(e){return u(e).sortedFiles},t.tilesPerRow=function(e){return u(e).tilesPerRow},t.unsortedFiles=function(e){return u(e).unsortedFiles},t.user=function(e){var t=u(e).user;return d.assert(null!=t,"Browse store `user` accessed before APP_INIT action"),t},t.viewer=function(e){var t=u(e).viewer;return d.assert(null!=t,"Browse store `viewer` accessed before APP_INIT action"),t},t.viewType=function(e){return u(e).viewType},t.viewTypeColumns=function(e){return u(e).viewTypeColumns},t.fileJumpIndex=r.createSelector(t.unsortedFiles,function(e){return e.keySeq().toArray().map(function(e){return{filename:s.filename(e).toLowerCase(),fqPath:e}}).sort(function(e,t){return e.filename<t.filename?-1:e.filename>t.filename?1:0})}),t.selectedFiles=r.createSelector(t.sortedFiles,t.selection,function(e,t){if(t.selected.isEmpty()||e.isEmpty())return i.OrderedMap();var r=e.filter(function(e){return t.selected.has(e.fq_path)});return i.OrderedMap(r.map(function(e){return[e.fq_path,e]}))}),t.urlPrefix=r.createSelector(t.user,t.viewer,function(e,t){return n.browse_root(t,e)})}),define("modules/clean/react/browse/data/store",["require","exports","modules/clean/redux/types","modules/clean/react/browse/data/reducer","modules/clean/redux/store"],function(e,t,i,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;t.getStoreForBrowse=function(){return o||(o=s.getStoreAndRegisterReducers((e={},e[i.BROWSE_NAMESPACE_KEY]=r.browseReducer,e))),o;var e}}),define("modules/clean/react/browse/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.RESET_TO_DEFAULT_FOR_TESTS_ONLY="BROWSE/RESET_TO_DEFAULT_FOR_TESTS_ONLY",e.APP_INIT="BROWSE/APP_INIT",e.SELECT_FILES_BY_FQ_PATH="BROWSE/SELECT_FILES_BY_FQ_PATH",e.SET_CAN_DISPLAY_FOLDER_SIZES="BROWSE/SET_CAN_DISPLAY_FOLDER_SIZES",e.SET_CLIPBOARD_FILES="BROWSE/SET_CLIPBOARD_FILES",e.SET_CONTEXT="BROWSE/SET_CONTEXT",e.SET_DROP_TARGET="BROWSE/SET_DROP_TARGET",e.SET_FILE_JUMP_FILTER="BROWSE/SET_FILE_JUMP_FILTER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="BROWSE/SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.SET_FOLDER_SIZES="BROWSE/SET_FOLDER_SIZES",e.SET_LOADING_STATE="BROWSE/SET_LOADING_STATE",e.SET_NEW_FOLDER_CREATION_STATE="BROWSE/SET_NEW_FOLDER_CREATION_STATE",e.SET_PAGINATED_TOTAL_NUM_FILES="BROWSE/SET_PAGINATED_TOTAL_NUM_FILES",e.SET_PATH="BROWSE/SET_PATH",e.SET_SELECTION="BROWSE/SET_SELECTION",e.SET_SHOULD_SHOW_DELETED_FILES="BROWSE/SET_SHOULD_SHOW_DELETED_FILES",e.SET_SORT_ORDER="BROWSE/SET_SORT_ORDER",e.SET_SORTED_FILES="BROWSE/SET_SORTED_FILES ",e.SET_TILES_PER_ROW="BROWSE/SET_TILES_PER_ROW",e.SET_UNSORTED_FILES="BROWSE/SET_UNSORTED_FILES",e.SET_VIEW_TYPE="BROWSE/SET_VIEW_TYPE",e.SET_VIEW_TYPE_COLUMNS="BROWSE/SET_VIEW_TYPE_COLUMNS",e.REQUEST_FOLDER_SIZES="BROWSE/REQUEST_FOLDER_SIZES",e.SET_FOLDER_SIZES_PENDING="BROWSE/SET_FOLDER_SIZES_PENDING",e.COMPLETE_FOLDER_SIZES="BROWSE/COMPLETE_FOLDER_SIZES"})(t.ActionTypes||(t.ActionTypes={}))}),define("modules/clean/react/browse/selectors",["require","exports","external/reselect","modules/clean/filetypes"],function(e,t,i,r){"use strict";function s(e,t){return e.withMutations(function(i){t.forEach(function(t,r){var s=e.get(r);if(s&&t){var o=s.updateSize(t.size,t.state);i.set(r,o)}})})}function o(e,t){return e.map(function(e){var i=t.get(e.fq_path);return i?e.updateSize(i.size,i.state):e})}Object.defineProperty(t,"__esModule",{value:!0}),t.makeFilesWithoutTeamSharedFolders=function(){return i.createSelector(function(e){return e.sortedFiles},function(e){return e.filter(function(e){return e.type!==r.FileTypes.TEAM_SHARED_FOLDER})})},t.makeUnsortedFilesWithFolderSizes=function(){return i.createSelector(function(e){return e.unsortedFiles},function(e){return e.folderSizes},function(e,t){return s(e,t)})},t.makeSortedFilesWithFolderSizes=function(){return i.createSelector(function(e){return e.sortedFiles},function(e){return e.folderSizes},function(e){return e.currentSort},function(e,t){return o(e,t)})}}),define("modules/clean/react/browse/store",["require","exports","tslib","modules/core/browser","modules/clean/filepath","external/immutable","modules/clean/react/browse/data/action_creators","modules/clean/react/browse/data/selectors","modules/clean/react/browse/data/store","modules/clean/react/browse/selectors","modules/core/exception","modules/clean/react/browse/models","modules/clean/react/browse/sort_helpers","modules/clean/react/selection","modules/clean/filetypes","modules/clean/flux/base_store","modules/clean/react/browse/constants","modules/clean/react/files_view/constants","modules/clean/react/files_view/types"],function(e,t,i,r,s,o,n,a,l,d,u,c,_,p,S,f,h,E,T){"use strict";function F(){return null===v&&(v=new m),v}function y(){return null!==v}Object.defineProperty(t,"__esModule",{value:!0});var m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unsortedFilesWithFolderSizes=d.makeUnsortedFilesWithFolderSizes(),t.sortedFilesWithFolderSizes=d.makeSortedFilesWithFolderSizes(),t.filesWithoutTeamSharedFolders=d.makeFilesWithoutTeamSharedFolders(),t}return i.__extends(t,e),t.prototype._init=function(){this._reduxStore=l.getStoreForBrowse(),this._teamFolders=o.List(),this._mountPoints=null,this._fileRename=null},t.prototype.sortedFiles=function(){return a.sortedFiles(this._reduxStore.getState())},t.prototype.setSortedFiles=function(e){this._reduxStore.dispatch(n.setSortedFiles({sortedFiles:e}))},t.prototype.unsortedFiles=function(){return a.unsortedFiles(this._reduxStore.getState())},t.prototype.setUnsortedFiles=function(e){this._reduxStore.dispatch(n.setUnsortedFiles({unsortedFiles:e}))},t.prototype.files=function(){return this.folderSizes().size>0?this.sortedFilesWithFolderSizes({sortedFiles:this.sortedFiles(),folderSizes:this.folderSizes(),currentSort:this.currentSort()}):this.sortedFiles()},t.prototype.filesMap=function(){return this.folderSizes().size>0?this.unsortedFilesWithFolderSizes({unsortedFiles:this.unsortedFiles(),folderSizes:this.folderSizes()}):this.unsortedFiles()},t.prototype.filesWithoutTeamFolders=function(){return this.folderSizes().size>0?this.sortedFilesWithFolderSizes({sortedFiles:this.sortedFiles(),folderSizes:this.folderSizes(),currentSort:this.currentSort()}).filter(function(e){return e.type!==S.FileTypes.TEAM_SHARED_FOLDER}):this.sortedFiles().size>0?this.filesWithoutTeamSharedFolders({sortedFiles:this.sortedFiles()}):o.List()},t.prototype.teamFolders=function(){return this.context().showPinnedTeamFolder?this.sortedFiles().filter(function(e){return e.type===S.FileTypes.TEAM_SHARED_FOLDER}):this.folderSizes().size>0?this.sortedFilesWithFolderSizes({sortedFiles:this.sortedFiles(),folderSizes:this.folderSizes(),currentSort:this.currentSort()}).filter(function(e){return e.type===S.FileTypes.TEAM_SHARED_FOLDER}):this._teamFolders},t.prototype.path=function(){return a.path(this._reduxStore.getState())},t.prototype.user=function(){return a.user(this._reduxStore.getState())},t.prototype.viewer=function(){return a.viewer(this._reduxStore.getState())},t.prototype.urlPrefix=function(){return a.urlPrefix(this._reduxStore.getState())},t.prototype.selection=function(){return a.selection(this._reduxStore.getState())},t.prototype.paginatedTotalNumFiles=function(){return a.paginatedTotalNumFiles(this._reduxStore.getState())},t.prototype.selectedFiles=function(){return a.selectedFiles(this._reduxStore.getState())},t.prototype.loadingState=function(){return a.loadingState(this._reduxStore.getState())},t.prototype.context=function(){return a.context(this._reduxStore.getState())},t.prototype.mountPoints=function(){return this._mountPoints},t.prototype.shouldShowDeletedFiles=function(){return a.shouldShowDeletedFiles(this._reduxStore.getState())},t.prototype.activeDropTarget=function(){return a.dropTarget(this._reduxStore.getState())},t.prototype.currentSort=function(){return a.sortOrder(this._reduxStore.getState())},t.prototype.sortIsAscending=function(){return this.currentSort().sortDirection===T.SortDirection.ASCENDING},t.prototype.sortLabel=function(){return E.SortIsFilename.includes(this.currentSort().sortField)?T.SortLabel.FILENAME:this.currentSort().sortField===T.SortField.MODIFIED?T.SortLabel.MODIFIED:T.SortLabel.SIZE},t.prototype.viewType=function(){return a.viewType(this._reduxStore.getState())},t.prototype.viewTypeColumns=function(){return a.viewTypeColumns(this._reduxStore.getState())},t.prototype.getIndexOfFile=function(e){return this.sortedFiles().findIndex(function(t){return t.sjid===e.sjid&&t.ns_id===e.ns_id})},t.prototype.getFileByFilename=function(e){return this.sortedFiles().find(function(t){return s.filename(t.fq_path)===e})||null},t.prototype.getFileByFullPath=function(e){return this.sortedFiles().find(function(t){return t.fq_path===e})||null},t.prototype.clipboardFiles=function(){return a.clipboardFiles(this._reduxStore.getState())},t.prototype.fileRename=function(){return this._fileRename},t.prototype.newFolderCreationState=function(){return a.newFolderCreationState(this._reduxStore.getState())},t.prototype.isFileJumping=function(){return a.isFileJumping(this._reduxStore.getState())},t.prototype.canDisplayFolderSizes=function(){return a.canDisplayFolderSizes(this._reduxStore.getState())},t.prototype.isQueryingFolderSizes=function(){return a.isQueryingFolderSizes(this._reduxStore.getState())},t.prototype.tilesPerRow=function(){return a.tilesPerRow(this._reduxStore.getState())},t.prototype.experiments=function(){return a.experiments(this._reduxStore.getState())},t.prototype.filePathsToSelectOnNextUpdate=function(){return a.filePathsToSelectOnNextUpdate(this._reduxStore.getState())},t.prototype.folderSizes=function(){return a.folderSizes(this._reduxStore.getState())},t.prototype.activeFileJumpFilter=function(){return a.fileJumpFilter(this._reduxStore.getState())},t.prototype.initializeEverything=function(e){var t=e.path,i=e.files,r=e.paginatedTotalNumFiles,s=e.context,a=e.mountPoints,l=e.fqPathsToSelect,d=e.loadingState,u=e.teamFolders;this.setPath({path:t}),this.appendFiles({path:t,files:i,paginatedTotalNumFiles:r},!1),this._mountPoints=o.Map(a),this.setLoadingState({path:t,loadingState:d}),this.setTeamFolders({teamFolders:u}),d===T.LoadingState.LOADED?this.selectFqPaths({fqPathsToSelect:l},!1):this.setFilePathsToSelectOnNextUpdate({fqPathsToSelect:l}),this._reduxStore.dispatch(n.setContext({context:s})),this.emit_change()},t.prototype.appInit=function(e){var t=e.experiments,i=e.shouldShowDeletedFiles,r=e.user,s=e.viewer;this._reduxStore.dispatch(n.appInit({experiments:t,shouldShowDeletedFiles:i,user:r,viewer:s})),this._reduxStore.dispatch(n.restoreViewType()),this._reduxStore.dispatch(n.restoreViewTypeColumns()),this._reduxStore.dispatch(n.restoreSortOrder())},
t.prototype.setPathData=function(e,t){var i=e.path,r=e.files,o=e.paginatedTotalNumFiles,a=e.context;void 0===t&&(t=!0),s.paths_are_equal(i,this.path())&&(this.setUnsortedFiles(this.unsortedFiles().clear()),this.setSortedFiles(this.sortedFiles().clear()),this._reduxStore.dispatch(n.setSelection({selection:p.createSelection()})),this.appendFiles({path:i,files:r,paginatedTotalNumFiles:o},!1),this._reduxStore.dispatch(n.setContext({context:a})),t&&this.emit_change())},t.prototype.clearFiles=function(e){var t=e.path,i=e.context;s.paths_are_equal(t,this.path())&&(this.setUnsortedFiles(this.unsortedFiles().clear()),this.setSortedFiles(this.sortedFiles().clear()),this._reduxStore.dispatch(n.setSelection({selection:p.createSelection()})),this._reduxStore.dispatch(n.setPaginatedTotalNumFiles({paginatedTotalNumFiles:0})),this._reduxStore.dispatch(n.setContext({context:i})),this.emit_change())},t.prototype.appendFiles=function(e,t){var i=e.path,r=e.files,a=e.paginatedTotalNumFiles;if(void 0===t&&(t=!0),s.paths_are_equal(i,this.path())){for(var l=[],d=[],_=0,p=r;_<p.length;_++){var S=p[_],f=S instanceof c.File?S:c.File.fromServerObject(S);l.push([S.fq_path,f]),this.unsortedFiles().has(S.fq_path)||d.push(f)}this.setUnsortedFiles(this.unsortedFiles().merge(o.Map(l))),this.setSortedFiles(this.sortedFiles().concat(o.List(d))),u.assert(this.unsortedFiles().size===this.sortedFiles().size,"appendFiles ended up with mismatched data structures"),this.sortFiles(this.currentSort(),!1),this.filePathsToSelectOnNextUpdate().count()&&this.selectFqPaths({fqPathsToSelect:this.filePathsToSelectOnNextUpdate().toArray()},!1),this._reduxStore.dispatch(n.setPaginatedTotalNumFiles({paginatedTotalNumFiles:a})),t&&this.emit_change()}},t.prototype.applyFileDeltas=function(e){var t=e.path,i=e.fileDeltas;if(s.paths_are_equal(t,this.path())){for(var r=0,o=i;r<o.length;r++){var n=o[r],a=n.before,l=n.after;this.applyFileDelta({before:a,after:l,pathForDelta:t})}if(this.filePathsToSelectOnNextUpdate().size){this.selectFqPaths({fqPathsToSelect:this.filePathsToSelectOnNextUpdate().toArray()},!1).size===this.filePathsToSelectOnNextUpdate().size&&this.setFilePathsToSelectOnNextUpdate({fqPathsToSelect:[]})}u.assert(this.unsortedFiles().size===this.sortedFiles().size,"applyFileDeltas ended up with mismatched file collections (map vs. sorted list)"),this.sortFiles(this.currentSort(),!1),this.emit_change()}},t.prototype.setPath=function(e){var t=e.path;this._reduxStore.dispatch(n.setPath({path:t})),this.emit_change()},t.prototype.setLoadingState=function(e){var t=e.path,i=e.loadingState;this._reduxStore.dispatch(n.setLoadingState({loadingState:i,path:t})),this.emit_change()},t.prototype.setMountPoints=function(e){var t=e.mountPoints;this._mountPoints=o.Map(t)},t.prototype.setTeamFolders=function(e){var t=e.teamFolders;this._teamFolders=o.List((t||[]).map(c.File.fromServerObject))},t.prototype.setSelection=function(e){var t=e.selection;this._reduxStore.dispatch(n.setSelection({selection:t})),this.emit_change()},t.prototype.selectFilesAfterUpload=function(e){var t=this,i=e.fqPathsToSelect;i.every(function(e){return t.filesMap().has(e)})?this.selectFqPaths({fqPathsToSelect:i}):this.setFilePathsToSelectOnNextUpdate({fqPathsToSelect:i})},t.prototype.selectFqPaths=function(e,t){var i=e.fqPathsToSelect;return void 0===t&&(t=!0),this._reduxStore.dispatch(n.selectFilesByFqPath({fqPathsToSelect:i})),t&&this.emit_change(),this.selection().selected},t.prototype.setShouldShowDeletedFiles=function(e){var t=e.shouldShowDeletedFiles;this._reduxStore.dispatch(n.setShouldShowDeletedFiles({shouldShowDeletedFiles:t})),this.emit_change()},t.prototype.setDropTarget=function(e){var t=e.target;this._reduxStore.dispatch(n.setDropTarget({dropTarget:t})),this.emit_change()},t.prototype.setViewType=function(e){var t=e.viewType,i=e.isSearchMode;this._reduxStore.dispatch(n.setAndStoreViewType({viewType:t,isSearchMode:!!i})),this.emit_change()},t.prototype.setColumnDependentCapabilities=function(e){var t=e.canDisplayFolderSizes;this.canDisplayFolderSizes()!==t&&(this._reduxStore.dispatch(n.setCanDisplayFolderSizes({canDisplayFolderSizes:t})),this.emit_change())},t.prototype.setColumnConfiguration=function(e){var t=e.columns,i=e.viewType,r=e.canDisplayFolderSizes;this._reduxStore.dispatch(n.setAndStoreViewTypeColumns({columns:t,viewType:i})),this._reduxStore.dispatch(n.setCanDisplayFolderSizes({canDisplayFolderSizes:r})),this.emit_change()},t.prototype.setTilesPerRow=function(e){var t=e.tilesPerRow;this._reduxStore.dispatch(n.setTilesPerRow({tilesPerRow:t})),this.emit_change()},t.prototype.sortFiles=function(e,t){function i(e,t){return{isFolder:e.is_dir,value:t,isTMF:c.File.isTeamMemberFolder(e)}}function s(e,t){var i=e.value,r=e.isTMF,s=t.value;return l(r,t.isTMF)||_.compare(i,s,E)}function o(e,t){var i=e.isFolder,r=e.value,s=e.isTMF,o=t.isFolder,n=t.value,a=t.isTMF,d=l(s,a);return d?d:(r||(r=1/0*E),n||(n=1/0*E),i&&o?_.compare(r,n,E):i?-E:o?E:_.compare(r,n,E))}function a(e,t){var i=e.isFolder,r=e.value,s=e.isTMF,o=t.isFolder,n=t.value,a=t.isTMF,d=l(s,a);return d?d:i&&o?_.compare(r,n,E):i?1:o?-1:""===r?1:""===n?-1:_.compare(r,n,E)}function l(e,t){return e?-1:t?1:0}var d=this,p=e.sortField,S=e.sortDirection;void 0===t&&(t=!0);var f,h,E=S===T.SortDirection.ASCENDING?1:-1,F=r.mac?s:o,y=function(e){return i(e,e.sort_key)},m=function(e){return i(e,e.ts)},v=function(e){return i(e,c.File.getCategoryDescription(e))},A=function(e){return i(e,c.File.getExtension(e))},g=function(e){return i(e,e.is_dir&&d.folderSizes().has(e.fq_path)?d.folderSizes().get(e.fq_path).size:e.bytes)};switch(p){case T.SortField.FILENAME:case T.SortField.SHARED_WITH:f=y,h=F;break;case T.SortField.MODIFIED:f=m,h=a;break;case T.SortField.CATEGORY:f=v,h=a;break;case T.SortField.EXTENSION:f=A,h=a;break;case T.SortField.SIZE:f=g,h=F;break;case T.SortField.SYNC_SETTING:case T.SortField.FILE_COUNTS:default:return void u.assert(!1,"Unsupported sort field "+p)}this.setSortedFiles(this.sortedFiles().sortBy(f,h));var O={sortField:p,sortDirection:S};this._reduxStore.dispatch(n.setAndStoreSortOrder({sortOrder:O})),t&&this.emit_change()},t.prototype.setClipboardToFiles=function(e){this._reduxStore.dispatch(n.setClipboardFiles({clipboardFiles:e})),this.emit_change()},t.prototype.updateRenameState=function(e,t){this._fileRename=t?{file:e,state:t}:null,this.emit_change()},t.prototype.setNewFolderCreationState=function(e){this._reduxStore.dispatch(n.setNewFolderCreationState({newFolderCreationState:e})),this.emit_change()},t.prototype.setFilePathsToSelectOnNextUpdate=function(e){var t=e.fqPathsToSelect,i=void 0===t?[]:t;this._reduxStore.dispatch(n.setFilePathsToSelectOnNextUpdate({filePathsToSelectOnNextUpdate:o.Set(i)}))},t.prototype.addFileJumpKeyCode=function(e){var t=e.keyChar;this._reduxStore.dispatch(n.setFileJumpFilter({fileJumpFilter:this.activeFileJumpFilter()+t.toLowerCase()}));for(var i=null,r=a.fileJumpIndex(this._reduxStore.getState()),s=0,o=r;s<o.length;s++){var l=o[s],d=l.fqPath;if(l.filename>=this.activeFileJumpFilter()){i=d;break}}null!=i&&this.selectFqPaths({fqPathsToSelect:[i]})},t.prototype.resetFileJump=function(){this._reduxStore.dispatch(n.setFileJumpFilter({fileJumpFilter:""}))},t.prototype.applyFileDelta=function(e){var t=e.before,i=e.after,r=e.pathForDelta;if(i&&!s.paths_are_equal(s.parent_dir(i.fq_path),r)&&(i=null),i!==t){var o=i&&this.unsortedFiles().get(i.fq_path);if(!(o&&o.sjid>=i.sjid)){if(this._fileRename&&i&&t){var n=this.folderSizes().get(t.fq_path);n&&this.setFolderSizes(this.folderSizes().set(i.fq_path,{size:n.size,state:n.state}))}return t&&this.setFolderSizes(this.folderSizes().delete(t.fq_path)),i&&t?this.replaceFile({existingFile:t,newFile:i}):i&&!t?this.insertOrUpdateFile({file:i}):t&&!i?this.removeFile({file:t}):void 0}}},t.prototype.insertOrUpdateFile=function(e){function t(e){return e.fq_path.toLowerCase()===o}var i=e.file,r=e.forceUpdate,s=void 0!==r&&r;this.setUnsortedFiles(this.unsortedFiles().set(i.fq_path,i));var o=i.fq_path.toLowerCase(),n=this.sortedFiles().findEntry(t)||[null,null],a=n[0],l=n[1];l?(s||i.sjid>l.sjid)&&this.setSortedFiles(this.sortedFiles().set(a,i)):this.setSortedFiles(this.sortedFiles().push(i))},t.prototype.removeFile=function(e){function t(e){return e.fq_path.toLowerCase()===s}var i=e.file;u.assert(this.unsortedFiles().has(i.fq_path),"trying to remove a file that doesn't exist in the file map");var r=this.sortedFiles().indexOf(i),s=i.fq_path.toLowerCase(),o=this.sortedFiles().findEntry(t),n=o?o[0]:-1;u.assert(n!==-1,"tried to remove file that doesn't exist in the sorted file list"),this.setUnsortedFiles(this.unsortedFiles().delete(i.fq_path)),this.setSortedFiles(this.sortedFiles().delete(r))},t.prototype.replaceFile=function(e){function t(e){return e.fq_path.toLowerCase()===s}var i=e.existingFile,r=e.newFile;u.assert(this.unsortedFiles().has(i.fq_path),"tried to replace file, but previous file doesn't exist in map");var s=i.fq_path.toLowerCase(),o=this.sortedFiles().findEntry(t),n=o?o[0]:-1;u.assert(n!==-1,"tried to update file, but previous file doesn't exist in sorted list"),i.fq_path===r.fq_path?(this.setSortedFiles(this.sortedFiles().set(n,r)),this.setUnsortedFiles(this.unsortedFiles().set(i.fq_path,r))):(this.setSortedFiles(this.sortedFiles().delete(n).push(r)),this.setUnsortedFiles(this.unsortedFiles().delete(i.fq_path).set(r.fq_path,r)),this._fileRename&&this._fileRename.state===T.RenameState.SAVING_INPUT&&(this.updateRenameState(i,null),this.selectFqPaths({fqPathsToSelect:[r.fq_path]})))},t.prototype.requestFolderSizes=function(e){this._reduxStore.dispatch(n.requestFolderSizes({fqPath:e})),this.emit_change()},t.prototype.setFolderSizesPending=function(e){this._reduxStore.dispatch(n.setFolderSizesPending({fetchFolderSizesResp:e})),this.emit_change()},t.prototype.completeFolderSizes=function(e){this._reduxStore.dispatch(n.completeFolderSizes({fetchFolderSizeState:e})),this.emit_change()},t.prototype.setFolderSizes=function(e){this._reduxStore.dispatch(n.setFolderSizes({folderSizes:e}))},t.prototype._new_payload=function(e){var t=e.action;switch(t.type){case h.BrowseActionType.APP_INIT:this.appInit(t.data);break;case h.BrowseActionType.INITIALIZE_EVERYTHING:this.initializeEverything(t.data);break;case h.BrowseActionType.LOAD_PATH:this.setPathData(t.data,!1),this.setLoadingState({path:t.data.path,loadingState:T.LoadingState.LOADED});break;case h.BrowseActionType.CLEAR_FILES:this.clearFiles(t.data);break;case h.BrowseActionType.ADD_FILES_AND_SET_LOADING_STATE:this.appendFiles(t.data,!1),this.setLoadingState(t.data);break;case h.BrowseActionType.SET_PATH:this.setPath(t.data);break;case h.BrowseActionType.CHANGE_FILES:this.applyFileDeltas(t.data);break;case h.BrowseActionType.SET_SELECTION:this.setSelection(t.data);break;case h.BrowseActionType.SELECT_FILES_AFTER_UPLOAD:this.selectFilesAfterUpload(t.data);break;case h.BrowseActionType.SELECT_FILES_BY_FQ_PATH:this.selectFqPaths(t.data);break;case h.BrowseActionType.SET_LOADING_STATE:this.setLoadingState(t.data);break;case h.BrowseActionType.SET_MOUNT_POINTS:this.setMountPoints(t.data);break;case h.BrowseActionType.SET_TEAM_FOLDERS:this.setTeamFolders(t.data);break;case h.BrowseActionType.SET_SHOULD_SHOW_DELETED_FILES:this.setShouldShowDeletedFiles(t.data);break;case h.BrowseActionType.SET_DROP_TARGET:this.setDropTarget(t.data);break;case h.BrowseActionType.COPY_FILES_TO_CLIPBOARD:this.setClipboardToFiles(t.data.files);break;case h.BrowseActionType.SET_VIEW_TYPE:this.setViewType(t.data);break;case h.BrowseActionType.SORT_FILES:this.sortFiles(t.data);break;case h.BrowseActionType.REQUEST_NEW_FILE_NAME:this.updateRenameState(t.data.file,T.RenameState.PENDING_INPUT);break;case h.BrowseActionType.SET_FILE_RENAME_PENDING:this.updateRenameState(t.data.file,T.RenameState.SAVING_INPUT);break;case h.BrowseActionType.SET_FILE_RENAME_COMPLETE:case h.BrowseActionType.CANCEL_FILE_RENAME:this.updateRenameState(t.data.file,null);break;case h.BrowseActionType.REQUEST_FOLDER_NAME:this.setNewFolderCreationState(T.NewFolderCreationState.PENDING_INPUT);break;case h.BrowseActionType.CREATE_FOLDER_PENDING:this.setNewFolderCreationState(T.NewFolderCreationState.SAVING_INPUT);break;case h.BrowseActionType.CREATE_FOLDER_COMPLETE:case h.BrowseActionType.CANCEL_CREATE_FOLDER:this.setNewFolderCreationState(T.NewFolderCreationState.CREATE_FOLDER_INACTIVE);break;case h.BrowseActionType.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE:this.setFilePathsToSelectOnNextUpdate(t.data);break;case h.BrowseActionType.ADD_FILE_JUMP_KEY_CODE:this.addFileJumpKeyCode(t.data);break;case h.BrowseActionType.RESET_FILE_JUMP:this.resetFileJump();break;case h.BrowseActionType.REQUEST_FETCH_FOLDER_SIZES:this.requestFolderSizes(t.data.fqPath);break;case h.BrowseActionType.FETCHED_FOLDER_SIZES:this.setFolderSizesPending(t.data.resp);break;case h.BrowseActionType.COMPLETE_FETCH_FOLDER_SIZES:this.completeFolderSizes(t.data.state);break;case h.BrowseActionType.SET_COLUMN_DEPENDENT_CAPABILITIES:this.setColumnDependentCapabilities(t.data);break;case h.BrowseActionType.SET_COLUMN_CONFIGURATION:this.setColumnConfiguration(t.data);break;case h.BrowseActionType.SET_TILES_PER_ROW:this.setTilesPerRow(t.data)}},t})(f.Store);t.BrowseStore=m;var v=null;t.getBrowseStore=F,t.browseStoreInstantiated=y}),define("modules/clean/react/search_success_banner/search_success_banner",["require","exports","modules/clean/react/async/loadable"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchSuccessBanner=i.Loadable({loader:function(){return new Promise(function(t,i){e(["modules/clean/react/search_success_banner/search_success_component"],t,i)}).then(function(e){return e.SearchSuccessBanner})}})});
//# sourceMappingURL=pkg-browse.min.js-vfl_vg9oE.map