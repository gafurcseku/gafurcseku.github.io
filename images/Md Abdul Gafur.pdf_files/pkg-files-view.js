define("modules/clean/react/app_actions/app_actions_menu",["require","exports","modules/clean/react/async/loadable"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppActionsMenu=n.Loadable({loader:function(){return new Promise(function(t,n){e(["modules/clean/react/app_actions/app_actions_menu_component"],t,n)}).then(function(e){return e.AppActionsMenu})}})}),define("modules/clean/react/app_actions/category",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";function r(e){return o[e]||null}Object.defineProperty(t,"__esModule",{value:!0});var o={0:n._("Default"),1:n._("Send for signature"),2:n._("Edit"),3:n._("Preview"),4:n._("Edit"),5:n._("Video comment"),6:n._("Send fax")};t.getDisplayString=r}),define("modules/clean/react/app_actions/feedback_modal",["require","exports","tslib","modules/clean/ajax","external/react","modules/clean/react/css","modules/clean/react/image","spectrum/button","modules/core/i18n","modules/clean/react/modal","spectrum/input","modules/clean/static_urls","modules/clean/filepath","modules/clean/file_store/utils"],function(e,t,n,r,o,i,a,l,s,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={suggestionsText:"",commentsText:"",showThankYouModal:!1},t.submitFeedback=function(){r.SilentBackgroundRequest({url:"/aa/app_choice_feedback",subject_user:t.props.user.id,data:{ext:t.getFileExt(),other_suggested_apps:t.state.suggestionsText,comments:t.state.commentsText}}),t.setState({showThankYouModal:!0})},t.onSuggestedAppsChanged=function(e){t.setState({suggestionsText:e.currentTarget.value.trim()})},t.onCommentChanged=function(e){t.setState({commentsText:e.currentTarget.value.trim()})},t.isAnyFeedbackInput=function(){return t.state.suggestionsText.length>0||t.state.commentsText.length>0},t.renderFeedbackModel=function(){return o.createElement(c.Modal,{className:"pfa-feedback-modal",ariaLabel:"Feedback Modal",acceptButtonText:null,style:"clean",title:s._("Which app were you looking for?"),autoFocusPrimaryInput:!1,width:"560"},o.createElement("div",{className:"pfa-feedback-inputs"},o.createElement("div",{className:"pfa-feedback-title"},o.createElement("h1",{className:"pfa-feedback-modal-header"},s._("Send feedback"))),o.createElement("div",{className:"pfa-feedback-suggestions"},o.createElement("label",{htmlFor:"pfa-app-suggestion-input",className:"pfa-app-feedback-label"},s._("Suggest another app")),o.createElement(d.Input,{id:"pfa-app-suggestion-input",className:"pfa-app-suggestion-input",onChange:t.onSuggestedAppsChanged,"aria-label":s._("app suggestion input")}),o.createElement("label",{htmlFor:"pfa-feedback-comments",className:"pfa-app-feedback-label"},s._("Add comments (optional)")),o.createElement("textarea",{id:"pfa-feedback-comments",className:"pfa-feedback-comments textinput c-input",onChange:t.onCommentChanged,"aria-label":s._("feedback"),rows:4}))),o.createElement("div",{className:"pfa-feedback-action-bar"},o.createElement(l.Button,{variant:"secondary",className:"pfa-app-feedback-action-bar-button",onClick:t.props.onBack},s._("Cancel")),o.createElement("div",{className:"pfa-feedback-action-bar-space"}),o.createElement(l.Button,{variant:"primary",className:"pfa-app-feedback-action-bar-button",disabled:!t.isAnyFeedbackInput(),onClick:t.submitFeedback},s._("Send feedback"))))},t.renderThankYouModal=function(){return o.createElement(c.Modal,{className:"pfa-feedback-thank-you-modal",ariaLabel:"Feedback Modal",acceptButtonText:null,style:"clean"},o.createElement(a.Image,{className:"pfa-feedback-thank-you-image",alt:s._("Thank you"),src:u.static_url("/static/images/app_actions/feedback_comments-vfluWMAvS.png"),srcHiRes:u.static_url("/static/images/app_actions/feedback_comments@2x-vflWa-9nT.png")}),o.createElement("h1",{className:"pfa-feedback-thank-you-header"},s._("Thanks for letting us know!")),o.createElement("h2",{className:"pfa-feedback-thank-you-subtext"},s._("Your feedback will help make Dropbox even better.")))},t}return n.__extends(t,e),t.prototype.getFileExt=function(){var e=this.props.file;return m.isSharedFile(e)&&e.filename?p.file_extension(e.filename):m.isBrowseFile(e)&&e.ext?e.ext:""},t.prototype.render=function(){return this.state.showThankYouModal?this.renderThankYouModal():this.renderFeedbackModel()},t})(o.Component);t.FeedbackModal=i(h,["/static/css/app_actions/index-vfl7NLEea.css"])}),define("modules/clean/react/files_view/column_header",["require","exports","tslib","external/classnames","spectrum/checkbox","spectrum/table","external/react","modules/clean/react/files_view/column_header_menu","modules/clean/react/files_view/fixed_table_head","modules/clean/react/files_view/sticky_table_head","modules/clean/react/files_view/view_type_column_header_menu","modules/clean/react/files_view/types"],function(e,t,n,r,o,i,a,l,s,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHovered:!1},t.handleChangeSelectAllCheckbox=function(e){"unchecked"===e?t.props.onDeselectAll():t.props.onSelectAll()},t.handleMouseEnter=function(){t.setState({isHovered:!0})},t.handleMouseLeave=function(){t.setState({isHovered:!1})},t}return n.__extends(t,e),t.prototype.getAriaSortValue=function(e){return e===u.SortDirection.ASCENDING?"ascending":e===u.SortDirection.DESCENDING?"descending":"none"},t.prototype.render=function(){var e=this,t=this.state.isHovered,u=this.props,p=u.columnFlex,m=u.isCompactMode,h=u.isSelectMode,f=u.isSticky,b=u.isTabbing,g=u.currentSort,_=u.onSelection,w=u.onSort,v=u.onSwitchViewType,S=u.selectAllCheckboxState,T=void 0===S?"unchecked":S,C=u.stickyOffsetHeight,E=u.stickyOffsetTop,y=u.columns,F=u.visibleColumns,N=u.viewType,I=u.viewTypes,M=u.viewTypeLabels,D=u.onTTI,x=!(b||h||t||m),k=[a.createElement(i.TableHeadCell,{className:"brws-column-header-table-cell brws-checkbox-cell",key:"checkbox-cell",role:"columnheader",scope:"col"},a.createElement("div",{className:"brws-vertically-center"},a.createElement(o.Checkbox,{className:r("brws-checkbox",{"brws-checkbox-checked":"checked"===T}),checked:T,onChange:this.handleChangeSelectAllCheckbox,variant:x?"invisible":"default"})))].concat(F.map(function(t,n){var r=g&&g.sortField===t.sortField?g.sortDirection:void 0;return a.createElement(i.TableHeadCell,{key:n,role:"columnheader",scope:"col","aria-sort":e.getAriaSortValue(r),className:"brws-column-header-table-cell"},a.createElement(l.ColumnHeaderMenu,{column:t,sortDirection:r,columns:y,visibleColumns:F,onSelection:_,onSort:w,viewType:N}),n===F.length-1&&a.createElement(d.ViewTypeColumnHeaderMenu,{onTTI:D,viewType:N,viewTypes:I,viewTypeLabels:M,onSwitchViewType:v}))})),P={offsetHeight:C,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave};return f?a.createElement(c.StickyTableHead,n.__assign({columnFlex:p,offsetTop:E,className:"brws-column-header"},P),k):a.createElement(s.FixedTableHead,n.__assign({},P),k)},t})(a.PureComponent);t.ColumnHeader=p}),define("modules/clean/react/files_view/column_header_menu",["require","exports","tslib","external/classnames","spectrum/icon_form","spectrum/popover","external/react","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,n,r,o,i,a,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePopoverSelection=function(e){var n=t.props,r=n.onSort,o=n.onSelection,i=n.column;e===l.SortDirection.ASCENDING||e===l.SortDirection.DESCENDING?r(i.sortField,e):(o(e,i),1===t.props.visibleColumns.length&&r(e.sortField,t.props.sortDirection||l.SortDirection.ASCENDING))},t}return n.__extends(t,e),t.prototype._columnMenuTitle=function(){switch(this.props.viewType){case l.ViewType.Grid:case l.ViewType.LargeGrid:return s._("Group by");case l.ViewType.List:default:return s._("Show")}},t.prototype.render=function(){var e=this.props,t=e.column,n=e.columns,c=e.visibleColumns,d=e.sortDirection;if(t.isSortDisabled)return a.createElement("div",{className:"normal brws-column-header-menu"},a.createElement("span",{className:"brws-column-header-menu-trigger-disabled"},t.label));var u;!t.isLocked&&n&&n.length&&(u=[a.createElement(i.PopoverItemGroupSeparator,{key:"show-separator"}),a.createElement(i.PopoverItemGroup,{key:"show-item-group"},a.createElement(i.PopoverItemGroupTitle,{className:"brws-column-header-menu-title",key:"show-title"},this._columnMenuTitle()),n.filter(function(e){return!e.isLocked}).map(function(e){return a.createElement(i.PopoverSelectableItem,{key:e.sortField,disabled:c.map(function(e){return e.sortField}).includes(e.sortField)&&e.sortField!==t.sortField,selected:e.sortField===t.sortField,value:e},e.label)}))]);var p=d===l.SortDirection.ASCENDING?"sort-arrow-up":d===l.SortDirection.DESCENDING?"sort-arrow-down":"caret-down";return a.createElement(i.Popover,{className:"brws-column-header-menu",onSelection:this.handlePopoverSelection},a.createElement(i.PopoverTrigger,{className:r("brws-column-header-menu-trigger",{"brws-column-header-menu-trigger-active":!!d}),title:t.popoverTriggerLabel},a.createElement("span",null,t.label),a.createElement("span",{className:"brws-column-header-menu-label-icon-wrapper"},a.createElement(o.IconForm,{className:"brws-column-header-menu-label-icon",name:p}))),a.createElement(i.PopoverContent,null,a.createElement(i.PopoverItemGroup,null,a.createElement(i.PopoverItemGroupTitle,{className:"brws-column-header-menu-title"},s._("Order")),a.createElement(i.PopoverSelectableItem,{selected:d===l.SortDirection.ASCENDING,value:l.SortDirection.ASCENDING},s._("Ascending")),a.createElement(i.PopoverSelectableItem,{selected:d===l.SortDirection.DESCENDING,value:l.SortDirection.DESCENDING},s._("Descending"))),u))},t})(a.PureComponent);t.ColumnHeaderMenu=c}),define("modules/clean/react/files_view/column_manager",["require","exports","tslib","external/react","modules/clean/immutability_helper","modules/clean/react/files_view/types"],function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(t){var n=e.call(this,t)||this;return n.handleSelection=function(e,t){var r=n.props,a=r.viewType,l=r.onColumnsChanged,s=r.viewTypeColumns,c=n.state.visibleColumns,d=s?s[i.ViewType.List]:void 0,u=s?s[i.ViewType.Grid]:void 0;if(d&&u){var p=c.indexOf(t);if(p===-1||c.includes(e))n.changeVisibleColumns(c);else{var m=o.splice(c,p,1,e);n.changeVisibleColumns(m);var h=n.isSizeColumnPresent(m);a===i.ViewType.List?l(n.swapColumns(d,t.sortField,e.sortField),i.ViewType.List,h):(l(n.swapColumns(u,t.sortField,e.sortField),a,h),e.sortField!==i.SortField.FILENAME&&l(n.swapColumns(d,d[1].sortField,e.sortField),i.ViewType.List,h))}}},n}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.changeVisibleColumns(this.computeVisibleColumns(this.props),!0)},t.prototype.componentWillReceiveProps=function(e){var t=this.props.viewTypeColumns,n=this.state.visibleColumns,r=this.getNumVisibleColumns(this.props),o=this.getNumVisibleColumns(e);if(this.props.columns!==e.columns)if(1===o&&e.columns.length&&e.currentSort){var a=e.columns,l=e.viewType,s=t?t[i.ViewType.Grid]:void 0;switch(l){case i.ViewType.List:this.changeVisibleColumns([a[0]],!0);break;case i.ViewType.Grid:case i.ViewType.LargeGrid:if(s){var c=e.currentSort,d=a.find(function(e){return e.sortField===c.sortField}),u=d||a[0];this.deferredOnColumnsChangedHandler([u],this.swapColumns(s,s[0].sortField,u.sortField),l)}}}else this.changeVisibleColumns(e.columns.slice(0,o),!0);else if(o<r)this.changeVisibleColumns(n.slice(0,o),!0);else if(o>r){var a=this.props.columns,p=o-n.length,m=[];a.forEach(function(e){m.length<p&&!n.includes(e)&&m.push(e)}),this.changeVisibleColumns(n.concat(m),!0)}},t.prototype.changeVisibleColumns=function(e,t){var n=this;void 0===t&&(t=!1),this.resetChangeVisibleColumnsTimeout();var r=this.isSizeColumnPresent(e);this.setState({visibleColumns:e,canDisplayFolderSizes:r}),t?this.changeVisibleColumnsTimeout=setTimeout(function(){n.resetChangeVisibleColumnsTimeout(),n.props.onCanDisplayFolderSizesChanged(r)}):this.props.onCanDisplayFolderSizesChanged(r)},t.prototype.resetChangeVisibleColumnsTimeout=function(){this.changeVisibleColumnsTimeout&&(clearTimeout(this.changeVisibleColumnsTimeout),this.changeVisibleColumnsTimeout=void 0)},t.prototype.deferredOnColumnsChangedHandler=function(e,t,n){var r=this;this.resetDeferredOnColumnsChangedHandler();var o=this.isSizeColumnPresent(e);this.setState({visibleColumns:e,canDisplayFolderSizes:o}),this.onColumnsChangesTimeout=setTimeout(function(){r.resetDeferredOnColumnsChangedHandler(),r.props.onColumnsChanged(t,n,o)})},t.prototype.resetDeferredOnColumnsChangedHandler=function(){this.onColumnsChangesTimeout&&(clearTimeout(this.onColumnsChangesTimeout),this.onColumnsChangesTimeout=void 0)},t.prototype.swapColumns=function(e,t,n){var r=e.map(function(e){return e.sortField}).indexOf(t),i=e.map(function(e){return e.sortField}).indexOf(n);if(r===i||r===-1||i===-1)return e;var a=e[r],l=e[i];return o.splice(o.splice(e,r,1,l),i,1,a)},t.prototype.computeVisibleColumns=function(e){return e.columns.slice(0,this.getNumVisibleColumns(e))},t.prototype.getNumVisibleColumns=function(e){var t=e.isMatchedLarge,n=e.isMatchedMedium,r=e.isSearchMode;switch(e.viewType){case i.ViewType.Grid:case i.ViewType.LargeGrid:return 1;case i.ViewType.List:default:return t?r?2:3:n?2:1}},t.prototype.isSizeColumnPresent=function(e){return e.some(function(e){return e.sortField===i.SortField.SIZE})},t.prototype.render=function(){var e=this.props.children,t=this.state,n=t.visibleColumns,r=t.canDisplayFolderSizes;if(!e)return null;var o=e;return"function"==typeof e&&(o=e({visibleColumns:n,canDisplayFolderSizes:r,handleSelection:this.handleSelection})),o},t})(r.PureComponent);t.ColumnManager=a}),define("modules/clean/react/files_view/controller",["require","exports","tslib","external/classnames","external/immutable","spectrum/media_table_skeleton","spectrum/table","external/react","external/react-dom","external/lodash","modules/clean/react/files_view/types","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/file_list_empty_folder_table","modules/clean/react/files_view/column_header","modules/clean/react/files_view/column_manager","modules/clean/react/files_view/constants","modules/clean/react/files_view/list","modules/clean/react/files_view/pinned_team_folder_view","modules/clean/react/selectable_list","modules/clean/react/files_view/selectors","modules/clean/react/files_view/tile_grid","modules/clean/react/files_view/internal_drag_status","modules/clean/react/browse/models","modules/clean/user_education/user_education_client","modules/clean/web_timing_logger","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/sharing/access_level","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/photos/thumb_loading/generic_thumb_store"],function(e,t,n,r,o,i,a,l,s,c,d,u,p,m,h,f,b,g,_,w,v,S,T,C,E,y,F,N,I,M,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x=function(){},k=[I.NameSpaceAccess.ACCESS_NO_ACCESS,I.NameSpaceAccess.ACCESS_READER,I.NameSpaceAccess.ACCESS_READER_NO_COMMENT],P=[{moduleName:"cdm_new_team_creator_v2",stepName:"start"},{moduleName:"cdm_new_team_joiner_v2",stepName:"start"},{moduleName:"uj_housewarming_v1",stepName:"start"},{moduleName:"uj_housewarming_v2",stepName:"start"},{moduleName:"uj_housewarming_v5",stepName:"start"},{moduleName:"ncct_uj_housewarming_v5",stepName:"start"},{moduleName:"trial_admin_setup_team_space",stepName:"team_space_tooltip"},{moduleName:"trial_admin_setup_team_space_v2",stepName:"team_space_tooltip"},{moduleName:"biz_onboarding_tour_rwl_copy_creator_v1",stepName:"start"},{moduleName:"biz_onboarding_tour_rwl_copy_joiner_v1",stepName:"start"},{moduleName:"biz_trial_onboarding_creator_no_tf",stepName:"start"},{moduleName:"biz_trial_onboarding_joiner_no_tf",stepName:"start"}],R=(function(t){function I(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridViewPrewarmedThumbnailRequestIds=[],e.state={thumbStore:new M.BufferedThumbStore,isTabbing:!1,keyboardShortcutModalHandler:function(){e.setState({shouldShowKeyboardShortcutModal:!0})}},e.handleMouseDownBody=function(){e.setState({isTabbing:!1})},e.handleKeyDownBody=function(t){9===t.keyCode&&e.setState({isTabbing:!0})},e.handleTabbingStart=function(){e.setState({isTabbing:!0})},e.handleCopyToClipboard=function(){var t=e.props,n=t.selectedFiles,r=t.onCopyToClipboard;n.size&&r(n.toArray())},e.handleNewFolderSubmit=function(t){""===t?(e.props.onNewFolderCancel(),e.handleNewFolderCancel({source:d.NameInputActionSource.SUBMIT})):e.props.onNewFolderSubmit(t)},e.handleNewFolderCancel=function(t){t.source!==d.NameInputActionSource.ESC&&N.Notify.error(F._("Please provide a name for the new folder.")),e.props.onNewFolderCancel()},e.handleSetFileUploaderPath=function(t){var n=t?t.path:e.props.path,r=e.props.context.isCurrentPathWriteable();t&&t.hasOwnProperty("hasPermissionToUploadToFolder")&&(r=!!t.hasPermissionToUploadToFolder),e.props.setFileUploaderPath({path:n,hasPermissionToUploadToFolder:r})},e.handleDragStart=function(t,r){void 0===r&&(r=[]);var o=e.props,i=o.path,a=o.selectedFiles,l=o.user,d=c.keyBy(r,"fq_path");d=n.__assign({},d,a.toJS());var u=c.values(d);if(u.some(function(e){return T.File.isTeamSharedFolder(e)}))return void N.Notify.error(F._("Team folders can’t be moved."));if(u.some(function(e){return T.File.isTeamMemberFolder(e)}))return void N.Notify.error(F._("Your member folder can’t be moved."));var p=t.dataTransfer;p&&(p.setDragImage&&e.internalDragStatusRef&&p.setDragImage(s.findDOMNode(e.internalDragStatusRef),-10,-10),p.setData(y.INTERNAL_FILE_DATA_TRANSFER_TYPE,JSON.stringify({userId:l.id,fromPath:i,filePaths:u.map(function(e){return e.fq_path})})),p.effectAllowed="copyMove")},e.handleDragEnter=function(t,n,r,o){u.onFileDragEnterItem(n,!!e.props.isDraggingExternalFiles,!!e.props.isDraggingInternalFiles,r,o,e.props.context,e.props.onSetDropTarget,e.handleSetFileUploaderPath)},e.handleSelectionChange=function(t){C.UEClient.sendEvent("FileItemRow","CheckboxToggled"),e.props.onSelectionChange(t)},e.handleDeselectAll=function(){var t=e.props,n=t.selection;(0,t.onSelectionChange)(n.set("selected",o.OrderedSet()))},e.handleSelectAll=function(){var t=e.props,n=t.items,r=t.selection;(0,t.onSelectionChange)(r.set("selected",o.OrderedSet(n.filter(I.canSelectItem).map(function(e){return e.fq_path}))))},e._handleGetOverflowMenuActions=function(t,n){var r=e.props;return(0,r.getOverflowMenuActions)(t,n,r.responsive)},e.handleTTI=function(){e.props.onComponentTTI("FilesViewController")},e.setFilesViewTileGridRef=function(t){e.filesViewTileGridRef=t},e.setInternalDragStatusRef=function(t){e.internalDragStatusRef=t},e.getIsCurrentPathWriteable=function(){return e.props.context.isCurrentPathWriteable()},e}return n.__extends(I,t),I.prototype.componentDidMount=function(){var t=this;this.setupUnity(),document.addEventListener("keydown",this.handleKeyDownBody),document.addEventListener("mousedown",this.handleMouseDownBody),C.UEClient.registerBulkCallbackForEducationStep(P,function(){t.props.onSwitchViewType(d.ViewType.List)}),E.waitForTTI().then(function(){t.prewarmGridViewThumbStore();var n=function(e){var n=e.showKeyboardShortcutsModal;t.state.shouldShowKeyboardShortcutModal&&n(t.props.viewType===d.ViewType.List),t.setState({keyboardShortcutModalHandler:function(){n(t.props.viewType===d.ViewType.List)},shouldShowKeyboardShortcutModal:!1})};n.perfName="keyboard_shortcuts_modal",e(["modules/clean/react/files_view/keyboard_shortcuts_modal"],n)})},I.prototype.componentWillReceiveProps=function(e){if(e.context&&this.props.context&&e.context.currentFQPath!==this.props.context.currentFQPath){this.undoPrewarmGridViewThumbStore();var t=this.props.arePostTTIModulesLoaded?new D.GenericThumbStore:new M.BufferedThumbStore;this.setState({thumbStore:t})}},I.prototype.componentDidUpdate=function(e){e.context&&this.props.context&&e.context.currentFQPath!==this.props.context.currentFQPath&&this.prewarmGridViewThumbStore(),this.props.enableUnity&&e.items!==this.props.items&&this.triggerUnityChangeCallback&&this.triggerUnityChangeCallback(),e.path!==this.props.path&&this.handleScrollToTop()},I.prototype.componentWillUnmount=function(){this.triggerUnityChangeCallback=void 0,document.removeEventListener("keydown",this.handleKeyDownBody),document.removeEventListener("mousedown",this.handleMouseDownBody)},I.prototype.setupUnity=function(){return n.__awaiter(this,void 0,void 0,function(){var t,r=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,E.waitForTTI()];case 1:return n.sent(),[4,e(["modules/clean/unity_browse_interface"])];case 2:return t=n.sent()[0],this.triggerUnityChangeCallback=function(){t.browse_visible_change_callback(r.props.items.toArray(),r.props.user.id,0,r.props.items.size-1)},[2]}})})},I.prototype.prewarmGridViewThumbStore=function(){var e=this;if(this.props.viewType!==d.ViewType.Grid){var t=this.state.thumbStore;this.props.items.slice(0,100).forEach(function(n){if(n instanceof T.File){var r=v.getThumbnailUrlForItem(n,f.ViewTypeThumbnailSizes[d.ViewType.Grid]);if(r){var o=t.bind_url(r,{onSuccess:x});o&&e.gridViewPrewarmedThumbnailRequestIds.push(o)}}})}},I.prototype.undoPrewarmGridViewThumbStore=function(){var e=this;this.gridViewPrewarmedThumbnailRequestIds.length&&(this.gridViewPrewarmedThumbnailRequestIds.forEach(function(t){e.state.thumbStore.unbind_url(t)}),this.gridViewPrewarmedThumbnailRequestIds=[])},I.prototype.handleScrollToTop=function(){window.scrollTo(0,0)},I.prototype.getFilesViewTileGridRef=function(){return this.filesViewTileGridRef},I.prototype.renderEmptyFolderView=function(){var e=this.props,t=e.context,n=e.responsive;if(this.props.customEmptyFolderView)return this.props.customEmptyFolderView(n);var r=t.isInsideSharedFolder,o=t.currentSharedFolderPermissionRole,i=r&&k.includes(o),a=i?void 0:F._("Drag and drop files onto this window to upload.");return l.createElement(p.EmptyFolderTable,{title:F._("This folder is empty"),subtitle:a,onTTI:this.handleTTI})},I.prototype.renderPinnedTeamFolderView=function(e){var t=this.props,n=t.activeDropTarget,r=t.context,o=t.dropTargetHighlightMode,i=t.onShowShare,a=t.renderSharedWithController,s=t.teamFolders,c=t.user,d=t.onRenameSubmit,u=t.onRenameCancel,p=this.state,m=p.isTabbing,h=p.thumbStore;return l.createElement(g.PinnedTeamFolderView,{activeDropTarget:n,columnFlex:f.LIST_VIEW_COLUMN_FLEX[1],context:r,dropTargetHighlightMode:o,getOverflowMenuActions:this._handleGetOverflowMenuActions,isCompactMode:e,isTabbing:m,onDragEnter:this.handleDragEnter,onNavigateToFileOrFolder:this.props.onNavigateToFileOrFolder,onRenameCancel:u,onRenameSubmit:d,teamFolders:s,user:c,arePostTTIModulesLoaded:this.props.arePostTTIModulesLoaded,thumbStore:h,onShowShare:i,renderSharedWithController:a})},I.prototype.getSelectAllCheckboxCheckedVariant=function(){var e=this.props,t=e.selectedFiles,n=e.items,r="unchecked";return t.size===n.filter(I.canSelectItem).size?r="checked":t.size&&(r="mixed"),r},I.prototype.isCreateFolderUIActive=function(){var e=this.props.createNewFolderState;return e&&"CREATE_FOLDER_INACTIVE"!==e},I.prototype.shouldShowEmptyFolderView=function(){return this.props.loadingState===d.LoadingState.LOADED&&!this.props.items.size&&!this.isCreateFolderUIActive()},I.canSelectItem=function(e){return e instanceof T.File},I.prototype.shouldComponentUpdate=function(e){return e.loadingState!==this.props.loadingState||e.loadingState!==d.LoadingState.LOADING_FIRST_PAGE},I.prototype.render=function(){var e=this,t=this.props,n=t.onDelete,o=t.onShowRename,s=t.onRenameSubmit,c=t.onRenameCancel,u=t.onSwitchViewType,p=t.onSetDropTarget,g=t.onPasteFromClipboard,T=t.onTilesPerRowChange,C=t.onColumnsChanged,E=t.onCanDisplayFolderSizesChanged,y=t.activeDropTarget,F=t.currentSort,N=t.createNewFolderState,I=t.context,M=t.columns,D=t.dropTargetHighlightMode,x=t.fileRename,k=t.getIsFileJumping,P=t.onAddFileJumpKeyCode,R=t.onResetFileJump,O=t.items,L=t.isSearchMode,A=t.isDraggingExternalFiles,V=t.isDraggingInternalFiles,H=t.isQueryingFolderSizes,G=t.isFileViewerShown,U=t.loadingState,z=t.onSortChange,B=t.path,q=t.selectedFiles,W=t.selection,j=t.shouldShowPinnedTeamFolders,K=t.renderSharedWithController,J=t.onShowShare,Y=t.teamFolders,Z=t.tilesPerRow,Q=t.totalNumFiles,X=t.user,$=t.viewType,ee=t.viewTypes,te=t.viewTypeLabels,ne=t.viewTypeColumns,re=t.onLocationLinkClick,oe=t.onNavigateToFileOrFolder,ie=t.onNavigateToParentFolder,ae=t.onOpenPaper,le=t.arePostTTIModulesLoaded,se=t.onStarClick,ce=t.fileIdToActionCategories,de=this.props.responsive,ue=de.isMatchedLarge,pe=de.isMatchedMedium,me=this.state,he=me.thumbStore,fe=me.isTabbing,be=me.keyboardShortcutModalHandler;if(U===d.LoadingState.LOADING_FIRST_PAGE)return le?l.createElement(i.MediaTableSkeleton,{numRows:15}):null;var ge=w.getItemIds(this.props),_e=!ue,we=!!q.size;if(this.shouldShowEmptyFolderView())return l.createElement("div",{className:"brws-files-view"},j&&this.renderPinnedTeamFolderView(_e),this.renderEmptyFolderView());var ve=ue?f.DEFAULT_COLUMN_HEADER_HEIGHT:f.COMPACT_COLUMN_HEADER_HEIGHT,Se=ue||pe?f.DEFAULT_PAGE_HEADER_HEIGHT:f.COMPACT_PAGE_HEADER_HEIGHT,Te=ve+Se,Ce=0;return j&&(Ce+=ve+ve+f.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP+Y.size*f.DEFAULT_ROW_HEIGHT),l.createElement("div",{className:"brws-files-view"},j&&this.renderPinnedTeamFolderView(_e),l.createElement(h.ColumnManager,{columns:M,viewTypeColumns:ne,currentSort:F,onCanDisplayFolderSizesChanged:E,onColumnsChanged:C,isMatchedLarge:ue,isMatchedMedium:pe,isSearchMode:L,viewType:$},function(t){var i=t.visibleColumns,h=t.handleSelection,w=t.canDisplayFolderSizes,S=(L?f.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX:f.LIST_VIEW_COLUMN_FLEX)[i.length],C=l.createElement(m.ColumnHeader,{columnFlex:S,currentSort:F,isCompactMode:_e,isSelectMode:we,isSticky:j,isTabbing:fe,onDeselectAll:e.handleDeselectAll,onSelectAll:e.handleSelectAll,onSelection:h,onSort:z,onSwitchViewType:u,selectAllCheckboxState:e.getSelectAllCheckboxCheckedVariant(),stickyOffsetHeight:ve,stickyOffsetTop:Se,columns:M,visibleColumns:i,viewType:$,viewTypes:ee,viewTypeLabels:te,onTTI:e.handleTTI});return $===d.ViewType.List?l.createElement(_.SelectableList,{itemIds:ge,keyScope:_.SELECTABLE_LIST_KEY_SCOPE,onSelectionChange:e.handleSelectionChange,onTabbingStart:e.handleTabbingStart,selection:W,tilesPerRow:Z},function(t){var d=t.focusedFileId,u=t.handleDeselect,m=(t.handleDeselectAll,t.handleFocusFile),h=t.handleSelect,f=(t.handleSelectAll,t.isSelectableListEvent);return l.createElement(a.Table,{"aria-rowcount":Q,className:r("brws-files-view-list",{"brws-files-view-list-compact":_e}),columnFlex:S},C,l.createElement(b.FilesViewList,{onDelete:n,onShowRename:o,activeDropTarget:y,context:I,createNewFolderState:N,dropTargetHighlightMode:D,items:O,fileIdToActionCategories:ce,fileRename:x,focusedFileId:d,getOverflowMenuActions:e._handleGetOverflowMenuActions,getIsCurrentPathWriteable:e.getIsCurrentPathWriteable,getIsFileJumping:k,onAddFileJumpKeyCode:P,onResetFileJump:R,isCompactMode:_e,isDraggingExternalFiles:A,isDraggingInternalFiles:V,isFileViewerShown:G,isSearchMode:L,isSelectMode:we,isSelectableListEvent:f,arePostTTIModulesLoaded:le,isTabbing:fe,keyScope:_.SELECTABLE_LIST_KEY_SCOPE,onCopyToClipboard:e.handleCopyToClipboard,onDragStart:e.handleDragStart,onDragEnter:e.handleDragEnter,onDeselectFile:u,onFocusFile:m,onOpenKeyboardShortcutModal:be,onLocationLinkClick:re,onNavigateToFileOrFolder:oe,onNavigateToParentFolder:ie,onNewFolderCancel:e.handleNewFolderCancel,onNewFolderSubmit:e.handleNewFolderSubmit,onOpenPaper:ae,onPasteFromClipboard:g,onRenameCancel:c,onRenameSubmit:s,onSelectFile:h,onSetDropTarget:p,onSetFileUploaderPath:e.handleSetFileUploaderPath,onStarClick:se,scrollPositionOffset:Ce,scrollToRow:d?ge.indexOf(d):0,selectedFiles:q,selection:W,renderSharedWithController:K,onShowShare:J,user:X,viewportTopOffset:Te,visibleColumns:i,canDisplayFolderSizes:w,thumbStore:he,shareButtonLabel:e.props.shareButtonLabel,starredState:e.props.starredState}))}):l.createElement(_.SelectableList,{itemIds:ge,keyScope:_.SELECTABLE_TILE_GRID_KEY_SCOPE,onSelectionChange:e.handleSelectionChange,onTabbingStart:e.handleTabbingStart,selection:W,tilesPerRow:Z},function(t){var r=t.handleDeselectAll,i=t.handleFocusFile,d=t.handleSelectAll;return l.createElement("div",null,l.createElement(a.Table,{columnFlex:f.GRID_VIEW_COLUMN_FLEX},C),l.createElement(v.FilesViewTileGrid,{onDelete:n,onShowRename:o,activeDropTarget:y,activeSortDirection:F&&F.sortDirection,activeSortField:F&&F.sortField,arePostTTIModulesLoaded:le,createNewFolderState:N,context:I,deselectAll:r,dropTargetHighlightMode:D,fileRename:x,getOverflowMenuActions:e._handleGetOverflowMenuActions,getIsCurrentPathWriteable:e.getIsCurrentPathWriteable,getIsFileJumping:k,onAddFileJumpKeyCode:P,onResetFileJump:R,onTTI:e.handleTTI,items:O,isCreateFolderUIActive:e.isCreateFolderUIActive(),isDraggingExternalFiles:A,isDraggingInternalFiles:V,isQueryingFolderSizes:H,isSearchMode:L,onCopyToClipboard:e.handleCopyToClipboard,onDragEnter:e.handleDragEnter,onDragStart:e.handleDragStart,onFocusFile:i,onNewFolderCancel:e.handleNewFolderCancel,onNewFolderSubmit:e.handleNewFolderSubmit,onNavigateToFileOrFolder:oe,onOpenPaper:ae,onOpenKeyboardShortcutModal:be,onPasteFromClipboard:g,onRenameCancel:c,onRenameSubmit:s,onSelectionChange:e.handleSelectionChange,onSetDropTarget:p,onSortChange:z,onStarClick:se,onTilesPerRowChange:T,path:B,ref:e.setFilesViewTileGridRef,selectAll:d,selectedFiles:q,selection:W,onSetFileUploaderPath:e.handleSetFileUploaderPath,thumbStore:he,tilesPerRow:Z,totalNumItems:Q,user:X,viewType:$,starredState:e.props.starredState}))})}),l.createElement(S.InternalDragStatus,{className:"offscreen-drag-icon",files:q.toArray(),ref:this.setInternalDragStatusRef}))},I.defaultProps={activeDropTarget:null,dropTargetHighlightMode:d.DropTargetHighlightMode.NONE,enableUnity:!0,fileRename:null,loadingState:d.LoadingState.LOADING_FIRST_PAGE,fileIdToActionCategories:{}},I})(l.PureComponent);t.FilesViewController=R}),define("modules/clean/react/files_view/culled_table_body",["require","exports","tslib","spectrum/table","external/react"],function(e,t,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rangeInViewStartIndex=0,t.rangeInViewEndIndex=0,t.handleRangeInView=function(e,n){var r="scrollingElement"in document&&document.scrollingElement?document.scrollingElement.scrollTop:document.documentElement.scrollTop,o=window.innerHeight-t.props.viewportTopOffset,i=t.props.listItemHeight,a=t.props.items.length,l=a*i;t.rangeInViewStartIndex=Math.floor(r/l*a),t.rangeInViewEndIndex=Math.ceil((r+o||1)/l*a)-1},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.scrollToRow&&this.updateScroll(this.props.scrollToRow)},t.prototype.componentWillReceiveProps=function(e){this.props.scrollToRow!==e.scrollToRow&&e.scrollToRow!==-1&&this.updateScroll(e.scrollToRow)},t.prototype.updateScroll=function(e){var t=this.props,n=t.listItemHeight,r=t.viewportTopOffset;if(e<=this.rangeInViewStartIndex||e>=this.rangeInViewEndIndex){var o=document.body.scrollTop,i=window.innerHeight-r,a=(e+1)*n,l=e*n,s=0;s=l>o?Math.abs(i-a):a-n,window.scrollTo(0,s)}},t.prototype.render=function(){var e=this.props,t=e.viewportTopOffset,i=n.__rest(e,["viewportTopOffset"]);return o.createElement(r.CulledTableBody,n.__assign({onRangeInView:this.handleRangeInView,viewportHeight:window.innerHeight-t},i))},t.defaultProps={viewportTopOffset:0},t})(o.PureComponent);t.CulledTableBodyWithScrollToRow=i}),
define("modules/clean/react/files_view/file_name_cell",["require","exports","tslib","external/classnames","spectrum/media_table","external/react","modules/clean/browse_interface","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/files_view/name_input","modules/clean/react/files_view/star","modules/clean/react/files_view/util","modules/clean/react/browse/models","modules/clean/react/icon/file_folder_icon","modules/clean/filename_highlights","modules/clean/user_education/react/user_education_effect","modules/core/i18n","modules/clean/react/title_bubble","modules/clean/em_string","spectrum/dimensions"],function(e,t,n,r,o,i,a,l,s,c,d,u,p,m,h,f,b,g,_,w,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var S=(function(e){function t(n){var r=e.call(this,n)||this;return r._thumbRequestId=null,r.handleNameInputSubmit=function(e){r.props.onRenameSubmit(r.props.file,e)},r.handleNameInputCancel=function(){r.props.onRenameCancel(r.props.file)},r.handleOnClickNameInput=function(e){e.stopPropagation()},r.handleOnClickName=function(e){r.props.isTextSelectable||r.props.isSelectMode||p.shouldHandleClick(e)&&(e.preventDefault(),e.stopPropagation(),r.props.onNavigateToFileOrFolder(r.props.file))},r.handleOnClickLocationLink=function(e){var t=r.props,n=t.file,o=t.onLocationLinkClick,i=!p.shouldHandleClick(e);i||(e.preventDefault(),e.stopPropagation()),o&&o(n,i)},r.updateFilenameCellBufferIfNeeded=function(){var e=r._filenameContainerDiv;if(e){var t=e.getElementsByClassName("brws-file-name-cell-star");if(t&&t.length>0){var n=t.item(0).clientWidth;r.state.filenameCellBuffer!==n&&r.setState({filenameCellBuffer:n})}}},r.handleThumbnailError=function(){r.setState({thumbLoaded:!1})},r._setFilenameRef=function(e){return r._filenameDiv=e},r._setFilenameContainerRef=function(e){return r._filenameContainerDiv=e},r.onStarClick=function(e){var t=r.props,n=t.file,o=t.onStarClick;o&&o(n,e)},r.state={shouldShowTooltip:r.shouldShowTooltip(n),thumbLoaded:t.isThumbLoaded(n),filenameCellBuffer:24},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail()},t.prototype.componentDidUpdate=function(e,t){var n=this.shouldShowTooltip(this.props);n!==t.shouldShowTooltip&&this.setState({shouldShowTooltip:n}),this.updateFilenameCellBufferIfNeeded()},t.prototype.componentWillReceiveProps=function(e){var t=this.shouldShowTooltip(e);t!==this.state.shouldShowTooltip&&this.setState({shouldShowTooltip:t}),e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail())},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.shouldShowTooltip=function(e){var t=this._filenameDiv,n=l.filename(e.file.fq_path);return!!(e.showTooltip&&t&&(t.offsetWidth<t.scrollWidth||t.textContent!==n))},t.isThumbLoaded=function(e){var t=e.file,n=e.thumbStore,r=t.thumbnail_url_tmpl;return!(!r||!n.get_thumb(r))},t.prototype.fetchThumbnail=function(){var e=this,t=this.props,n=t.file,r=t.thumbStore,o=n.thumbnail_url_tmpl;o&&(this._thumbRequestId=r.bind_url(o,{onSuccess:function(){e.setState({thumbLoaded:!0})},onError:function(){e.handleThumbnailError()}}))},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbLoaded:!1})},t.prototype.renderThumbnail=function(){var e=this.props,t=e.file,n=e.thumbStore,o=t.thumbnail_url_tmpl,a=t.fq_path;if(this.state.thumbLoaded&&o){var l=n.get_thumb(o);if(l)return i.createElement("img",{alt:a,draggable:!1,className:r("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:l,onError:this.handleThumbnailError})}return this.renderFileIcon()},t.prototype.renderFileIcon=function(){var e=this.props,t=e.file,n=e.showCDMUserEducationEffects,r=i.createElement(h.FileOrFolderIcon,{className:"brws-file-name-cell-icon",ref:"icon",file:t,onClick:this.handleOnClickName,showPreview:!1});return n?i.createElement(b.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},r):r},t.prototype.renderScreenReaderExtraInfo=function(){var e=[],t=this.props,n=t.file,r=t.isSelected;if(n.isDeleted&&e.push(g._("Deleted")),r&&e.push(g._("Selected")),n.is_dir&&(n.type===s.FileTypes.SHARED_FOLDER?m.File.isReadOnlySharedFolder(n)?e.push(g._("Read-only shared folder")):e.push(g._("Shared folder")):n.type===s.FileTypes.TEAM_SHARED_FOLDER?m.File.isReadOnlySharedFolder(n)?e.push(g._("Read-only team shared folder")):e.push(g._("Team shared folder")):e.push(g._("Folder"))),e.length>0)return i.createElement("span",{className:"ax-visually-hidden"},""+e.join(" "))},t.prototype.splitTruncatedParts=function(e,t){for(var n=0;n<e.length&&e.charAt(n)===t.charAt(n);)++n;return n===e.length||"…"!==e.charAt(n)?[e]:[e.substring(0,n),e.substring(n+1)]},t.prototype.getHighlightedSpan=function(e,t){var n=l.filename(t.fq_path),r=this.splitTruncatedParts(e,n);if(1===r.length)return t.highlight_spans?f.highlightReactFromHighlightSpans(e,t.highlight_spans):f.highlightMatchReact(e,t.filename_highlights);var o,a;return t.highlight_spans?(o=f.highlightReactFromHighlightSpans(n,t.highlight_spans,0,r[0].length),a=f.highlightReactFromHighlightSpans(n,t.highlight_spans,n.lastIndexOf(r[1]))):(o=f.highlightMatchReact(n,t.filename_highlights,0,r[0].length),a=f.highlightMatchReact(n,t.filename_highlights,n.lastIndexOf(r[1]))),i.createElement("span",null,o,"…",a)},t.prototype.renderTitle=function(e){var t=this.props,n=t.file,r=t.renameState,o=t.user;if(r===c.RenameState.SAVING_INPUT)return i.createElement("span",{role:"status"},g._("Renaming…"));var s,d=l.filename(n.fq_path),u=this.truncateTextInFilenameCell(d,14,4,e);if(s=this.props.showHighlights&&(n.filename_highlights||n.highlight_spans)?this.getHighlightedSpan(u,n):i.createElement("span",null,u),s=i.createElement("div",{className:"brws-file-name-element",ref:this._setFilenameRef},s),this.state.shouldShowTooltip&&(s=i.createElement(_.TitleBubble,{content:d,position:_.TitleBubble.POSITIONS.BOTTOM,className:"list-label__title-bubble"},s)),!n.is_unmounted){var p=a.href_for_file(o,n);s=i.createElement("a",{className:"brws-file-name-cell-filename",href:p,onClick:this.handleOnClickName},s)}return this.props.showUserEducationEffects?i.createElement(b.UserEducationEffect,{containerName:"FileItemRow",name:this.props.userEducationEffectName||"FileNameLabel",useSpan:!0},s):s},t.prototype.renderSubtitle=function(e){var t=this.props,n=t.file,r=t.isSelectMode,o=t.renameState,s=t.renderLocationAsLink,c=t.showLocation,d=t.user;if(o||!c)return null;var u=l.parent_dir(n.fq_path),p="/"===u?a.get_browse_root_name(d):u.slice(1);if(n.is_unmounted)return g._("not added yet, in %(location)s",{comment:"Describes the parent directory of a file in a list of search results."}).format({location:p});var m=g._("in %(location)s",{comment:"Describes the parent directory of a file in a list of search results."}).format({location:p}),h=this.truncateTextInFilenameCell(m,12,6,e);if(!s||r)return h;var f=a.browse_uri_for_fq_path(d,u);return i.createElement("a",{className:"brws-file-name-cell-location",href:f.toString(),onClick:this.handleOnClickLocationLink},h)},t.prototype.truncateTextInFilenameCell=function(e,t,n,r){if(r&&r>this.state.filenameCellBuffer){var o=(r-this.state.filenameCellBuffer)/t,i=Math.max(n,o-n);return w.Emstring.em_snippet(e,Math.floor(i),.5)}return e},t.prototype.renderContent=function(e){var t,n=this.props,r=n.file,a=n.renameState;if(a===c.RenameState.PENDING_INPUT){var s=r.is_dir?g._("Rename directory…"):g._("Rename file…");t=i.createElement(d.NameInput,{defaultValue:l.filename(r.fq_path),label:s,onClick:this.handleOnClickNameInput,onSubmit:this.handleNameInputSubmit,onCancel:this.handleNameInputCancel,isDir:r.is_dir})}else t=[i.createElement(o.MediaCellText,{key:"title",highlight:this.props.isHovered},this.renderTitle(e),this.renderScreenReaderExtraInfo()),i.createElement(o.MediaCellText,{highlight:this.props.isHovered,key:"subtitle",variant:"subtitle"},this.renderSubtitle(e))];return t},t.prototype.renderStar=function(){var e=this.props,t=e.file,n=e.renameState,r=e.user,o=e.showStar,a=e.isSelectMode,l=e.isTabbing;return o&&!n?i.createElement(u.StarContainer,{item:t,user:r,className:"brws-file-name-cell-star brws-vertically-center",onStarClick:this.onStarClick,isReadOnly:a,isTabbing:l}):null},t.prototype.render=function(){var e=this,t=this.props.mediaActions,n=r("brws-file-name-cell-text","brws-vertically-center",{"brws-file-name-cell-text-rename":!!this.props.renameState});return this.props.shouldTruncateMiddleFilename?i.createElement(o.MediaCell,{icon:this.renderThumbnail()},i.createElement(v.Dimensions,{className:"brws-file-name-container"},function(t){var r=t.width;return i.createElement("div",{className:"brws-file-name-container",ref:e._setFilenameContainerRef},i.createElement("div",{className:n},e.renderContent(r)),e.renderStar())}),t):i.createElement(o.MediaCell,{icon:this.renderThumbnail()},i.createElement("div",{className:n},this.renderContent()),this.renderStar(),t)},t.defaultProps={renderLocationAsLink:!0},t})(i.Component);t.FileNameCell=S}),define("modules/clean/react/files_view/file_row",["require","exports","tslib","external/classnames","spectrum/button","spectrum/icon_table","spectrum/checkbox","spectrum/media_table","external/react","external/react-dom","modules/clean/react/files_view/file_name_cell","modules/clean/react/files_view/overflow_menu_with_star","modules/clean/react/files_view/types","modules/clean/react/files_view/share_button","modules/clean/react/files_view/util","modules/clean/react/browse/models","modules/clean/user_education/react/user_education_effect","modules/core/i18n","modules/clean/react/title_bubble","modules/clean/browse_interface","modules/core/browser","modules/clean/react/app_actions/app_actions_menu","modules/core/exception"],function(e,t,n,r,o,i,a,l,s,c,d,u,p,m,h,f,b,g,_,w,v,S,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var C=function(){return s.createElement("span",{"aria-hidden":!0},"--")},E=function(e){var t=e.isVisible,n=e.onClick;return s.createElement(o.Button,{className:"brws-file-row-view-file-button","aria-label":g._("View File"),onClick:n,tabIndex:t?void 0:-1,variant:t?"secondary":"invisible"},s.createElement(i.IconTable,{name:"view"}))},y=function(){return s.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"Group",transform:"translate(2.000000, 2.000000)"},s.createElement("circle",{id:"Oval-65",cx:"8",cy:"8",r:"8"}),s.createElement("path",{d:"M8,13 L8,14.5 L5.5,12.5 L8,10.5 L8,12 C10.209139,12 12,10.209139 12,8 C12,6.93104698 11.5806921,5.96002857 10.8975817,5.24245012 L11.4674192,4.39763124 C12.4121861,5.30722218 13,6.58496544 13,8 C13,10.7614237 10.7614237,13 8,13 Z M8,3 L8,1.5 L10.5,3.5 L8,5.5 L8,4 C5.790861,4 4,5.790861 4,8 C4,8.96511539 4.34180174,9.8503987 4.91095749,10.5414022 L4.33270318,11.3986995 C3.5056268,10.5066799 3,9.3123877 3,8 C3,5.23857625 5.23857625,3 8,3 Z",id:"Oval-67",fill:"#637282"}))))},F=function(){return s.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"icon-warning",fill:"#637282"},s.createElement("path",{d:"M13.9298189,16.125 C16.4624689,16.125 17.5138484,14.3377448 16.2785476,12.1337797 L12.238298,4.92535765 C11.002815,2.72106753 8.99951926,2.72139251 7.76421846,4.92535765 L3.7239688,12.1337797 C2.48848585,14.3380698 3.54098311,16.125 6.07269759,16.125 L13.9298189,16.125 Z M11.002944,14.0995516 L8.99957244,14.0995516 L8.99957244,12.0741033 L11.002944,12.0741033 L11.002944,14.0995516 L11.002944,14.0995516 Z M11.002944,11.0613791 L8.99957244,11.0613791 L8.99957244,7.01048239 L11.002944,7.01048239 L11.002944,11.0613791 L11.002944,11.0613791 Z",id:"Shape"}))))},N=function(){return s.createElement("div",{className:"error-tooltip"},s.createElement("div",{className:"error-tooltip__title"},g._("This folder is too large")),g._("We can’t calculate the full size of this folder right now. This can happen when there are a large number of files inside of the folder or if the request takes too long."))},I=function(e){var t=e.file;if(!t.is_dir)return s.createElement("span",null,t.size);switch(t.fetchFolderSizesStatus){case p.FetchFolderSizeState.LOADING:return s.createElement("span",{className:"item-cell-title item-cell-title--loading"},s.createElement("span",{className:"ax-visually-hidden"},g._("Calculating folder sizes...")),s.createElement(y,null),g._("Calculating..."));case p.FetchFolderSizeState.ERROR:return s.createElement("span",{className:"item-cell-title"},s.createElement(_.TitleBubble,{content:s.createElement(N,null),position:_.TitleBubble.POSITIONS.TOP,isTargetPositionFixed:!1},s.createElement("span",{className:"ax-visually-hidden"},g._("Error in calculating folder sizes")),s.createElement("span",null,s.createElement(F,null))),t.size);case p.FetchFolderSizeState.COMPLETE:return s.createElement("span",{className:"item-cell-title"},t.size);default:return s.createElement(C,null)}},M=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isActionDropdownOpen:!1},t.checkboxRef=null,t.handleClick=function(e){if(t.checkboxRef&&c.findDOMNode(t.checkboxRef).contains(e.target))return void e.preventDefault();if(t.props.isSelectMode&&t.props.onDeselect&&t.props.onSelect){e.preventDefault();var n=t.props.file.fq_path;return void(t.props.isSelected?t.props.onDeselect(n,e.shiftKey):t.props.onSelect(n,e.shiftKey))}t.handleOpenNewTabOrNavigate(e)},t.handleOpenNewTabOrNavigate=function(e){if(0===e.button){if(e.preventDefault(),e.stopPropagation(),h.hasModifierKey(e)){var n=t.props,r=n.file,o=n.user;return void v.open_tab(w.href_for_file(o,r))}t.props.onNavigateToFileOrFolder(t.props.file)}},t.handleChangeCheckbox=function(e,n){if(t.props.onSelect&&t.props.onDeselect){var r=t.props.file.fq_path;"checked"===e?t.props.onSelect(r,n.shiftKey):t.props.onDeselect(r,n.shiftKey)}},t.handleDragEnter=function(e){var n=t.props,r=n.file,o=n.isSelected,i=n.isActiveDropTarget;t.props.onDragEnter(e,r,!!o,!!i)},t.handleDragStart=function(e){var n=t.props,r=n.file,o=n.isSelected,i=n.onDragStart,a=n.onSelect;i&&(o?i(e):(a&&a(r.fq_path),i(e,[r])))},t.setCheckboxRef=function(e){t.checkboxRef=e},t.onActionDropdownOpen=function(){t.setState({isActionDropdownOpen:!0})},t.onActionDropdownClose=function(){t.setState({isActionDropdownOpen:!1})},t.rowChildFn=function(e){var n,o=e.isHovered,i=t.props,c=i.isCompactMode,d=i.isPinned,u=i.isSelectMode,p=i.isSelected,m=i.showUserEducationEffects,h=i.isTabbing,f=i.visibleColumns;if(!d){var g=!(h||o||p||u||c);n=s.createElement(a.Checkbox,{checked:p?"checked":"unchecked",className:r("brws-checkbox",{"brws-checkbox-checked":p}),onChange:t.handleChangeCheckbox,ref:t.setCheckboxRef,variant:g?"invisible":"default"}),m&&(n=s.createElement(b.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox",useSpan:!0},n))}return[s.createElement(l.MediaCell,{key:"checkboxCell",className:"brws-checkbox-cell"},s.createElement("div",{className:"brws-vertically-center"},n))].concat(f.map(function(e,n){return t.renderCell({isHovered:o,isLastCell:n===f.length-1,sortField:e.sortField,renderCell:e.renderCell})}))},t}return n.__extends(t,e),t.prototype.componentDidUpdate=function(e){var t=this;(this.props.isFocused&&!e.isFocused||this.props.isFocused&&this.props.isSelected&&!e.isSelected)&&this.checkboxRef&&Promise.resolve().then(function(){if(t.checkboxRef){var e=c.findDOMNode(t.checkboxRef);e&&e.focus()}})},t.prototype.renderMediaActions=function(e){var t=this.props,r=t.file,o=t.isCompactMode,i=t.isSelected,a=t.isSelectMode,c=t.isSharingDisabled,d=t.isTabbing,p=t.getOverflowMenuActions,h=t.canDisplayFolderSizes,f=t.arePostTTIModulesLoaded,b=t.onShowShare,_=t.shareButtonLabel,w={file:r,onShowShare:b,shareButtonLabel:_};if(a)return s.createElement(l.MediaActions,null,!c&&s.createElement(m.ShareButton,n.__assign({},w,{isVisible:!o&&(i||e)})),!o&&(e||i)&&this.props.actionCategories?s.createElement(S.AppActionsMenu,{buttonText:g._("Open with ▾"),actionCategories:this.props.actionCategories,file:this.props.file,onDropdownOpen:this.onActionDropdownOpen,onDropdownClose:this.onActionDropdownClose,user:this.props.user,telemetryContext:{surface:"browse"}}):null,s.createElement(E,{isVisible:i||o||e,onClick:this.handleOpenNewTabOrNavigate}));var v=null;return f&&(v=s.createElement(u.OverflowMenuWithStar,{file:r,getOverflowMenuActions:p,showBorders:d||e,canDisplayFolderSizes:h,starredLoadingState:this.props.starredLoadingState})),s.createElement(l.MediaActions,null,!c&&s.createElement(m.ShareButton,n.__assign({},w,{isVisible:d||e&&!o||this.state.isActionDropdownOpen})),(d||e&&!o||this.state.isActionDropdownOpen)&&this.props.actionCategories?s.createElement(S.AppActionsMenu,{buttonText:g._("Open with ▾"),actionCategories:this.props.actionCategories,file:this.props.file,onDropdownOpen:this.onActionDropdownOpen,onDropdownClose:this.onActionDropdownClose,user:this.props.user,telemetryContext:{surface:"browse"}}):null,v)},t.prototype.renderModifiedCell=function(e,t){var n=e.ago,r=e.last_modified_name||void 0,o=r&&g._("by %(modified_by)s",{comment:"name of the person that modified the file"}).format({modified_by:r});return s.createElement(l.MediaCell,{className:"brws-file-modified-at-cell",key:"modifiedAt",subtitle:o,title:n||s.createElement(C,null)},t)},t.prototype.renderCell=function(e){var t=e.isHovered,n=e.isLastCell,r=e.sortField,o=e.renderCell,i=this.props,a=i.file,c=i.user,u=i.isCompactMode,m=i.isSearchMode,h=i.isSelectMode,b=i.isTabbing,g=i.arePostTTIModulesLoaded,_=i.renameState,w=i.showCDMUserEducationEffects,v=i.showUserEducationEffects,S=i.userEducationEffectName,E=i.onLocationLinkClick,y=i.onNavigateToFileOrFolder,F=i.onRenameCancel,N=i.onRenameSubmit,M=i.onStarClick,D=i.thumbStore,x=n&&!(u&&_),k=x?this.renderMediaActions(t):void 0;if(o)return o({file:a,mediaActions:k});switch(r){case p.SortField.FILENAME:return s.createElement(d.FileNameCell,{key:"fileName",user:c,file:a,isHovered:t,isSelectMode:h,isTabbing:b,mediaActions:k,onNavigateToFileOrFolder:y,onLocationLinkClick:E,onRenameCancel:F,onRenameSubmit:N,renameState:_,showCDMUserEducationEffects:w,showTooltip:g,showHighlights:m,showLocation:m,showUserEducationEffects:v,userEducationEffectName:S,showStar:g&&!f.File.isNoAccessSharedFolder(a),onStarClick:M,thumbStore:D,shouldTruncateMiddleFilename:g});case p.SortField.MODIFIED:return this.renderModifiedCell(a,k);case p.SortField.SHARED_WITH:return s.createElement(l.MediaCell,{className:"brws-file-shared-with-cell",key:"sharedWith"},this.props.renderSharedWithController(a),k);case p.SortField.CATEGORY:return s.createElement(l.MediaCell,{className:"brws-file-category-cell",key:"category",title:f.File.getCategoryDescription(a)},k);case p.SortField.EXTENSION:return s.createElement(l.MediaCell,{className:"brws-file-extension-cell",key:"extension",title:f.File.getExtension(a)},k);case p.SortField.SIZE:return s.createElement(l.MediaCell,{className:"brws-file-size-cell",key:"size",title:s.createElement(I,{file:a})},k);default:return T.reportException({err:new Error("renderCell function for "+r+"is not implemented"),severity:T.SEVERITY.NONCRITICAL,tags:["js:browse"]}),s.createElement(C,null)}},t.prototype.render=function(){var e=this.props,t=e.file,o=e.isActiveDropTarget,i=e.isAvailableDropTarget,a=e.isPinned,c=e.isSelected,d=e.renameState,u=e.rowIndex,p=e.tabIndex,m=e.topOffset,h=r("brws-file-row",{"brws-file-row-selected":c,"brws-file-row-deleted":t.isDeleted,"brws-file-row-droppable":i&&!o,"brws-file-row-dragover":o,"brws-file-row-no-access":f.File.isNoAccessSharedFolder(t),"brws-file-row-pinned":a}),b=o?"dragover":i&&!o?"droppable":c?"selected":"default",g={"aria-rowindex":void 0!==u?u+1:void 0,className:h,"data-filename":t.fq_path.split("/").slice(-1),onClick:this.handleClick,onDragEnter:this.handleDragEnter,tabIndex:p,variant:b};return a?s.createElement(l.MediaRow,n.__assign({},g),this.rowChildFn):s.createElement(l.CulledMediaRow,n.__assign({},g,{draggable:!d,topOffset:m,onDragStart:this.handleDragStart}),this.rowChildFn)},t.defaultProps={isSelectionEmpty:!0,topOffset:0},t})(s.PureComponent);t.FileRow=M}),define("modules/clean/react/files_view/fixed_table_head",["require","exports","tslib","spectrum/vertically_fixed","spectrum/table","external/react"],function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedTableHead=function(e){var t=e.children,a=e.offsetHeight,l=n.__rest(e,["children","offsetHeight"]);return i.createElement("thead",n.__assign({className:"mc-table-head mc-table-head-fixed brws-column-header"},l),i.createElement(r.VerticallyFixed,{tag:function(e){var r=e.style;return i.createElement(o.TableRow,{className:"mc-table-head-row mc-table-head-row-fixed",style:n.__assign({height:a},r)},t)}}))}}),define("modules/clean/react/files_view/internal_drag_status",["require","exports","tslib","external/classnames","external/react","modules/clean/react/sprite"],function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.files,a=r("active",t);return o.createElement("div",{id:"drag-status",className:a},o.createElement("div",{id:"drag-selection-status"},n.slice(0,4).map(function(e,t){return e.thumbnail_url_tmpl?o.createElement("img",{key:t,src:e.thumbnail_url_tmpl,className:"icon icon"+t,alt:""}):o.createElement(i.Sprite,{key:t,group:"web",name:e.icon,className:"icon icon"+t,alt:""})}),o.createElement("span",{className:"badge"},n.length)))},t})(o.PureComponent);t.InternalDragStatus=a}),define("modules/clean/react/files_view/list",["require","exports","tslib","external/react","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/constants","modules/clean/react/files_view/culled_table_body","modules/clean/react/files_view/file_row","modules/clean/react/files_view/new_folder_row","modules/clean/react/files_view/paper_row","modules/clean/react/files_view/selectors","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models"],function(e,t,n,r,o,i,a,l,s,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=function(){},h=(function(t){function h(){var n=null!==t&&t.apply(this,arguments)||this;return n.state={scrollToRow:0},n.handleFileViewerUnmount=function(){var e=n.props.selectedFiles.first();e&&n.props.onFocusFile(e.fq_path)},n.getIsListEvent=function(e){return n.props.isSelectableListEvent()&&"BUTTON"!==e.target.tagName},n.getSelectedFiles=function(){return n.props.selectedFiles},n.handleNavigateToFileOrFolder=function(e){n.props.onNavigateToFileOrFolder(e,n.handleFileViewerUnmount)},n.enableContextMenu=function(){return!1},n.getActiveDropTarget=function(){return n.props.activeDropTarget},n.getIsDraggingInternalFiles=function(){return!!n.props.isDraggingInternalFiles},n.getIsDraggingExternalFiles=function(){return!!n.props.isDraggingExternalFiles},n.renderRow=function(t,o,i){if("NewFolderRow"===t.type)return r.createElement(s.NewFolderRow,{createNewFolderState:t.props.createNewFolderState,isInsideMyTeamFolderTree:t.props.isInsideMyTeamFolderTree,onCancel:n.props.onNewFolderCancel,onSubmit:n.props.onNewFolderSubmit,rowIndex:o,topOffset:i,useNewCdmIconography:n.props.user.is_cdm_member});if("PaperRow"===t.type)return r.createElement(c.PaperRow,{paper:t.props.paper,rowIndex:o,topOffset:i,user:n.props.user,visibleColumns:t.props.visibleColumns,onOpenPaper:n.props.onOpenPaper,arePostTTIModulesLoaded:t.props.arePostTTIModulesLoaded});var a=n.props,d=a.selection,u=a.starredState,m=t.props.file,h=d.selected.last()===t.props.file.fq_path||!d.selected.size&&0===o?0:void 0,f=0===o||n.props.user.is_cdm_member&&(2===o||1===o),b=t.props.actionCategories,g=void 0;if(u){g=u[e("modules/clean/react/starred/browse_exports").HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+m.file_id]}return r.createElement(l.FileRow,{actionCategories:b,context:n.props.context,file:m,getOverflowMenuActions:n.props.getOverflowMenuActions,isActiveDropTarget:t.props.isActiveDropTarget,isAvailableDropTarget:t.props.isAvailableDropTarget,isCompactMode:t.props.isCompactMode,isFocused:t.props.isFocused,isSearchMode:t.props.isSearchMode,isSelectMode:t.props.isSelectMode,isSelected:t.props.isSelected,arePostTTIModulesLoaded:t.props.arePostTTIModulesLoaded,isSharingDisabled:t.props.isSharingDisabled,isTabbing:t.props.isTabbing,key:m.fq_path,onDeselect:n.props.onDeselectFile,onDragStart:n.props.onDragStart,onDragEnter:n.props.onDragEnter,onLocationLinkClick:n.props.onLocationLinkClick,onNavigateToFileOrFolder:n.handleNavigateToFileOrFolder,onRenameCancel:n.props.onRenameCancel,onRenameSubmit:n.props.onRenameSubmit,onSelect:n.props.onSelectFile,onStarClick:n.props.onStarClick,renameState:t.props.renameState,rowIndex:o,showUserEducationEffects:f,userEducationEffectName:f?"FileNameLabel-"+o:void 0,showCDMUserEducationEffects:p.File.isTeamMemberFolder(m),tabIndex:h,topOffset:i,user:n.props.user,visibleColumns:n.props.visibleColumns,canDisplayFolderSizes:n.props.canDisplayFolderSizes,thumbStore:n.props.thumbStore,renderSharedWithController:n.props.renderSharedWithController,onShowShare:n.props.onShowShare,shareButtonLabel:n.props.shareButtonLabel,starredLoadingState:g})},n}return n.__extends(h,t),h.prototype.componentDidMount=function(){var e=this.props.onTTI;e&&e(),this.setupKeyboardShortcuts(),this.setupExternalDragHandler(),this.props.selectedFiles.size&&!this.props.isFileViewerShown()&&this.setState({scrollToRow:this.getRowIndexForFile(this.props.selectedFiles.first())})},h.prototype.componentWillReceiveProps=function(e){this.props.scrollToRow!==e.scrollToRow&&this.setState({scrollToRow:e.scrollToRow})},h.prototype.componentDidUpdate=function(e){e.createNewFolderState===this.props.createNewFolderState||"PENDING_INPUT"!==this.props.createNewFolderState||this.props.isFileViewerShown()||this.setState(function(e){return 0===e.scrollToRow?(window.scrollTo(0,0),{}):{scrollToRow:0}})},h.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts(),o.cleanupExternalDragHandler(this.props.keyScope)},h.prototype.getRowIndexForFile=function(e){return this.props.items.indexOf(e)},h.prototype.cleanupKeyboardShortcuts=function(){u.resetFilesViewKeyboardShortcuts(this.props.keyScope),u.resetFileJumpKeyboardShortcuts(this.props.keyScope)},h.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,n=t.onDelete,r=t.onShowRename,o=t.getIsFileJumping,i=t.onAddFileJumpKeyCode,a=t.onResetFileJump,l=t.keyScope,s=t.onCopyToClipboard,c=t.onNavigateToParentFolder,d=t.onPasteFromClipboard;u.setupFileJumpKeyboardShortcuts({scope:l,getIsFileJumping:o,onAddFileJumpKeyCode:i,onResetFileJump:a}),u.setupFilesViewListKeyboardShortcuts({getIsGlobalEvent:this.getIsGlobalEvent(),getIsItemEvent:this.getIsListEvent,getSelectedFiles:this.getSelectedFiles,isCurrentPathWriteable:this.props.getIsCurrentPathWriteable,enableContextMenu:this.enableContextMenu,selectAllAction:m,deselectAllAction:m,onCopyToClipboard:s,onDelete:n,onNavigateToFileOrFolder:this.handleNavigateToFileOrFolder,onNavigateToParentFolder:c,onPasteFromClipboard:d,onShowRename:r,openContextMenuAtPosition:m,scope:l,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},h.prototype.setupExternalDragHandler=function(){o.setupExternalDragHandler(this.props.keyScope,this.getIsDraggingInternalFiles,this.getIsDraggingExternalFiles,this.props.onSetFileUploaderPath,".brws-file-row",this.getActiveDropTarget,this.props.onSetDropTarget)},h.prototype.getIsGlobalEvent=function(){return u.generateGetIsGlobalEvent(this)},h.prototype.render=function(){var e=this.props,t=e.scrollPositionOffset,n=e.viewportTopOffset;return r.createElement(a.CulledTableBodyWithScrollToRow,{items:d.getFilesViewListRowItems(this.props),listItemHeight:i.DEFAULT_ROW_HEIGHT,renderRow:this.renderRow,scrollPositionOffset:t,scrollToRow:this.state.scrollToRow,shouldUseWindowAsScrollContainer:!0,viewportTopOffset:n})},h.defaultProps={isFileViewerShown:function(){return!1}},h})(r.PureComponent);t.FilesViewList=h}),define("modules/clean/react/files_view/new_folder_row",["require","exports","spectrum/media_table","spectrum/table","external/react","spectrum/icon_content","modules/clean/react/files_view/name_input","modules/core/i18n"],function(e,t,n,r,o,i,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewFolderRow=function(e){var i,s=e.createNewFolderState,c=e.isInsideMyTeamFolderTree,d=void 0!==c&&c,u=e.onCancel,p=e.onSubmit,m=e.rowIndex,h=e.topOffset,f=e.useNewCdmIconography;i="SAVING_INPUT"===s?o.createElement("p",{className:"brws-new-folder-row-status",role:"status","aria-live":"polite"},l._("Creating new folder…")):o.createElement(a.NameInput,{defaultValue:"",label:l._("Folder name"),onSubmit:p,onCancel:u});var b=o.createElement(t.NewFolderIcon,{isInsideMyTeamFolderTree:d,useNewCdmIconography:f});return o.createElement(n.CulledMediaRow,{"aria-rowindex":void 0!==m?m+1:void 0,className:"brws-new-folder-row",topOffset:h},o.createElement(r.TableCell,{className:"brws-checkbox-cell"}),o.createElement(n.MediaCell,{icon:b},o.createElement("div",{className:"brws-new-folder-row-content brws-vertically-center"},i)),o.createElement(r.TableCell,null),o.createElement(r.TableCell,null))},t.NewFolderIcon=function(e){var t=e.isInsideMyTeamFolderTree,n=e.useNewCdmIconography,r=e.className||"";return o.createElement(i.IconContent,{className:r,name:t?n?"folder_team-small":"folder_shared-small":"folder-small"})}}),define("modules/clean/react/files_view/paper_row",["require","exports","tslib","external/react","spectrum/media_table","modules/clean/paper_formatting_utils","modules/clean/react/files_view/star","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/core/i18n","modules/core/browser"],function(e,t,n,r,o,i,a,l,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=(function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=function(e){if(0===e.button){e.preventDefault(),e.stopPropagation();var t=n.props.paper;if(s.hasModifierKey(e))return void d.open_tab(t.url);n.props.onOpenPaper(t)}},n.state=n.calcState(t),n}return n.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.paper.title!==e.paper.title){var t=this.calcState(e);this.setState(t)}},t.prototype.calcState=function(e){return{titleParts:i.getPaperDocTitleParts(e.paper,"brws-file-name-cell-icon","brws-file-name-cell-icon-emoji")}},t.prototype.renderDocName=function(e){var t=this.props,n=t.paper,i=t.showHighlights,l=t.user,s=t.arePostTTIModulesLoaded,d=this.state.titleParts,u=d.title,p=d.highlightedTitle,m=d.icon,h=r.createElement("a",{className:"brws-paper-doc-name-cell-title",href:n.url,onClick:this.handleClick},i?p:r.createElement("span",null,u)),f=s?r.createElement(a.StarContainer,{item:n,user:l,key:"paperStar",className:"brws-file-name-cell-star brws-vertically-center"}):null;return r.createElement(o.MediaCell,{highlight:e,icon:m,key:"docName"},r.createElement("div",{className:"brws-paper-doc-name-cell-content brws-vertically-center"},r.createElement(o.MediaCellText,{highlight:e},h),r.createElement(o.MediaCellText,{highlight:e,variant:"subtitle"},c._("in Paper",{comment:"The Dropbox Paper page"}))),f)},t.prototype.renderDocInfo=function(){var e=this.props.paper,t=e.last_modified_date||"",n=c._("by %(modified_by)s",{comment:"name of the person that modified the file"}).format({modified_by:e.last_editor_name||e.creator_name});return r.createElement(o.MediaCell,{key:"docInfo",subtitle:n,title:t})},
t.prototype.renderCell=function(e){var t=e.isHovered;switch(e.sortField){case l.SortField.FILENAME:return this.renderDocName(t);case l.SortField.MODIFIED:return this.renderDocInfo()}return null},t.prototype.render=function(){var e=this,t=this.props,n=t.rowIndex,i=t.topOffset,a=t.visibleColumns;return r.createElement(o.CulledMediaRow,{"aria-rowindex":void 0!==n?n+1:void 0,className:"brws-paper-row",draggable:!1,onClick:this.handleClick,topOffset:i,variant:"default"},function(t){var n=t.isHovered;return[r.createElement(o.MediaCell,{key:"checkboxCell",className:"brws-checkbox-cell"})].concat(a.map(function(t){return e.renderCell({isHovered:n,sortField:t.sortField})}))})},t.defaultProps={showHighlights:!0},t})(r.PureComponent);t.PaperRow=u}),define("modules/clean/react/files_view/pinned_team_folder_view",["require","exports","tslib","external/classnames","spectrum/table","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/file_row","external/react","modules/clean/react/sprite","modules/constants/trademark","modules/core/i18n","modules/clean/react/tooltip","modules/clean/user_education/user_education_client","modules/clean/user_education/react/user_education_effect"],function(e,t,n,r,o,i,a,l,s,c,d,u,p,m,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var b=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayName="PinnedTeamFolderView",t.renderTeamFolderRow=function(e,n){var r=t.props,o=r.activeDropTarget,d=r.context,u=r.dropTargetHighlightMode,p=r.getOverflowMenuActions,m=r.isTabbing,h=r.onDragEnter,b=r.onNavigateToFileOrFolder,g=r.onRenameCancel,_=r.onRenameSubmit,w=r.user,v=r.arePostTTIModulesLoaded,S=r.thumbStore,T=r.onShowShare,C=r.renderSharedWithController,E=l.shouldFileBeHighlightedDropTarget({dropTargetHighlightMode:u,file:e,isSelected:!1}),y=c.createElement(s.FileRow,{context:d,file:e,getOverflowMenuActions:p,key:encodeURI(e.fq_path),isAvailableDropTarget:E,isActiveDropTarget:e===o,isPinned:!0,arePostTTIModulesLoaded:v,isTabbing:m,onDragEnter:h,onNavigateToFileOrFolder:b,onRenameCancel:g,onRenameSubmit:_,showUserEducationEffects:0===n,showCDMUserEducationEffects:i.File.isTeamMemberFolder(e),user:w,visibleColumns:a.LIST_VIEW_COLUMNS.slice(0,1),canDisplayFolderSizes:!1,thumbStore:S,onShowShare:T,renderSharedWithController:C});return n>0?y:c.createElement(f.UserEducationEffect,{containerName:"PinnedTeamFolder",name:"TeamFolder",key:encodeURI(e.fq_path)+"-UserEducationEffect"},y)},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){h.UEClient.sendEvent(this.displayName,"componentDidMount",JSON.stringify(this.props.context))},t.prototype.renderHeaderTitle=function(e,t){var n=t?c.createElement("span",{className:"brws-pinned-team-folder-info-button"},c.createElement(m.Tooltip,{position:m.TooltipPosition.RIGHT,tooltip_contents:c.createElement("div",null,t),tooltip_classname:"brws-pinned-team-folder-tooltip"},c.createElement(d.Sprite,{group:"web",name:"info",alt:p._("File section information")}))):null;return c.createElement("span",{className:"brws-pinned-team-folder-header-title"},c.createElement("span",null,e),n)},t.prototype.render=function(){var e=this.props,t=e.columnFlex,n=e.isCompactMode,i=e.teamFolders,a=p.ungettext("Team folder","Team folders",i.size);return c.createElement("div",{className:"brws-pinned-team-folder-view"},c.createElement(o.Table,{columnFlex:t},c.createElement(o.TableHead,{className:r("brws-column-header","brws-pinned-team-folder-header",{"brws-column-header-compact brws-pinned-team-folder-header-compact ":n})},c.createElement(o.TableHeadCell,{className:"brws-checkbox-cell"}),c.createElement(o.TableHeadCell,{className:"brws-vertically-center"},this.renderHeaderTitle(a,p._("Team folders are the hub of content for a team and contents are                 automatically shared with team folder members. %(trademark_business)s                 team admins own and manage team folders.").format({trademark_business:u.TRADEMARK_BUSINESS})))),c.createElement(o.TableBody,null,i.map(this.renderTeamFolderRow))),c.createElement(o.Table,{columnFlex:t},c.createElement(o.TableHead,{className:r("brws-column-header","brws-pinned-team-folder-header","brws-pinned-team-folder-header-secondary",{"brws-column-header-compact brws-pinned-team-folder-header-compact ":n})},c.createElement(o.TableHeadCell,{className:"brws-checkbox-cell"}),c.createElement(o.TableHeadCell,{className:"brws-vertically-center"},this.renderHeaderTitle(p._("Everything else"))))))},t})(c.Component);t.PinnedTeamFolderView=b}),define("modules/clean/react/files_view/selectors",["require","exports","tslib","external/reselect","modules/clean/react/files_view/file_list_utils","modules/clean/react/browse/models"],function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.createSelector(function(e){return e.isCompactMode},function(e){return e.isSelectMode},function(e){return e.arePostTTIModulesLoaded},function(e){return e.isSearchMode},function(e){return e.isTabbing},function(e){return e.canDisplayFolderSizes},function(e){return e.starredState},function(e,t,n,r,o,i,a){return{isCompactMode:e,isSelectMode:t,arePostTTIModulesLoaded:n,isSearchMode:r,isTabbing:o,canDisplayFolderSizes:i,starredState:a}});t.getFilesViewListRowItems=r.createSelector(a,function(e){return e.activeDropTarget},function(e){return e.context},function(e){return e.createNewFolderState},function(e){return e.dropTargetHighlightMode},function(e){return e.items},function(e){return e.fileRename},function(e){return e.focusedFileId},function(e){return e.selection},function(e){return e.user},function(e){return e.visibleColumns},function(e){return e.fileIdToActionCategories},function(e,t,r,a,l,s,c,d,u,p,m,h){var f=s.toArray().map(function(a){if(a instanceof i.Paper)return{type:"PaperRow",props:{isSearchMode:e.isSearchMode,paper:a,visibleColumns:m,arePostTTIModulesLoaded:e.arePostTTIModulesLoaded}};var s=u.selected.has(a.fq_path),f=o.shouldFileBeHighlightedDropTarget({file:a,isSelected:s,dropTargetHighlightMode:l});return{type:"FileRow",props:n.__assign({},e,{file:a,isActiveDropTarget:f&&t===a,isAvailableDropTarget:f,isFocused:a.fq_path===d,isSelected:s,isSharingDisabled:o.isSharingDisabledForFile({context:r,file:a,user:p}),renameState:c&&c.file.fq_path===a.fq_path?c.state:void 0,visibleColumns:m,actionCategories:h?h[a.file_id]:void 0})}});return a&&"CREATE_FOLDER_INACTIVE"!==a&&f.unshift({type:"NewFolderRow",props:{createNewFolderState:a,isInsideMyTeamFolderTree:r.isInsideTeamFolderTree,useNewCdmIconography:!1}}),f}),t.getItemIds=r.createSelector(function(e){return e.items},function(e){return e.toArray().map(function(e){return e.fq_path})})}),define("modules/clean/react/files_view/share_button",["require","exports","tslib","spectrum/button","external/react","modules/core/i18n"],function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault();var n=t.props,r=n.file;(0,n.onShowShare)(r,"BROWSE_FILE_ROW"),e.stopPropagation()},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.isVisible,n=e.shareButtonLabel;return o.createElement(r.Button,{"aria-label":n,className:"inline-share-button",onClick:this.handleClick,tabIndex:t?void 0:-1,variant:t?"secondary":"invisible"},n)},t.defaultProps={isVisible:!0,shareButtonLabel:i._("Share")},t})(o.PureComponent);t.ShareButton=a}),define("modules/clean/react/files_view/sticky_table_head",["require","exports","tslib","spectrum/dimensions","spectrum/table","external/react","modules/clean/react/sticky/sticky","modules/clean/react/sticky/container"],function(e,t,n,r,o,i,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyTableHead=function(e){var t=e.children,s=e.columnFlex,c=e.offsetHeight,d=e.offsetTop,u=n.__rest(e,["children","columnFlex","offsetHeight","offsetTop"]);return i.createElement("thead",{className:"brws-sticky-table-head"},i.createElement(r.Dimensions,{tagName:"tr"},function(e){var r=e.width;return i.createElement("td",{className:"brws-sticky-table-cell"},i.createElement(l.StickyContainer,{offsetTop:d,useNativeSticky:!0,useWindowToDetermineBottom:!0},i.createElement(a.Sticky,{offsetHeight:c},i.createElement(o.Table,{columnFlex:s,style:{width:r}},i.createElement(o.TableHead,n.__assign({},u),t)))))}))}}),define("modules/clean/react/files_view/view_type_column_header_menu",["require","exports","tslib","external/react","spectrum/icon_form","spectrum/icon_mode","spectrum/popover","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,n,r,o,i,a,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSelection=function(e){e!==t.props.viewType&&t.props.onSwitchViewType(e)},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI()},t.prototype.viewTypeIcon=function(e){switch(e){case l.ViewType.List:return"list";case l.ViewType.Grid:return"grid";case l.ViewType.LargeGrid:return"tiles"}return"list"},t.prototype.render=function(){var e=this,t=this.props,n=t.viewType,l=t.viewTypes,c=t.viewTypeLabels;return r.createElement(a.Popover,{className:"brws-view-type-column-header-menu",onSelection:this.handleSelection},r.createElement(a.PopoverTrigger,{className:"brws-view-type-column-header-menu-trigger",title:c[n]},r.createElement(i.IconMode,{name:this.viewTypeIcon(n)}),r.createElement(o.IconForm,{name:"caret-down"})),r.createElement(a.PopoverContent,{attachment:"right",className:"brws-view-type-column-header-menu-content"},r.createElement(a.PopoverItemGroup,null,r.createElement(a.PopoverItemGroupTitle,null,s._("View As")),l.map(function(t){return r.createElement(a.PopoverSelectableItem,{"data-viewtype":t,key:t,icon:r.createElement(i.IconMode,{name:e.viewTypeIcon(t)}),selected:n===t,value:t},c[t])}))))},t})(r.PureComponent);t.ViewTypeColumnHeaderMenu=c}),define("spectrum/icon_bundles/mode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS={grid:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},innerHtml:'<g fill="#637282" fill-rule="evenodd"><path d="M7 7h2v2H7zM11 7h2v2h-2zM15 7h2v2h-2zM7 11h2v2H7zM11 11h2v2h-2zM15 11h2v2h-2zM7 15h2v2H7zM11 15h2v2h-2zM15 15h2v2h-2z"></path></g>'},list:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},innerHtml:'<g fill="#637282" fill-rule="evenodd"><path d="M6 15h2v2H6zM10 15h8v2h-8zM6 11h2v2H6zM10 11h8v2h-8zM6 7h2v2H6zM10 7h8v2h-8z"></path></g>'},tiles:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},innerHtml:'<g fill="#637282" fill-rule="evenodd"><path d="M7 7h4v4H7zM13 7h4v4h-4zM13 13h4v4h-4zM7 13h4v4H7z"></path></g>'}}}),define("spectrum/icon_mode",["require","exports","tslib","spectrum/icon_mode/index"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(r,t)}),define("spectrum/icon_mode/index",["require","exports","tslib","react","spectrum/icon_templates/stateless/index","spectrum/icon_bundles/mode"],function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS=i.ICONS,t.IconMode=function(e){var t=e.name,a=i.ICONS[t],l=a.attrs,s=a.innerHtml,c=r.createElement("svg",n.__assign({},l,{dangerouslySetInnerHTML:{__html:s}}));return r.createElement(o.Component,n.__assign({icon:c},e,{key:t}))},t.IconMode.displayName="IconMode"}),define("spectrum/icon_table",["require","exports","tslib","spectrum/icon_table/index"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(r,t)}),define("spectrum/label",["require","exports","tslib","spectrum/label/index"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(r,t)});
//# sourceMappingURL=pkg-files-view.min.js-vfltt3cqr.map