define("modules/clean/account_photo_modal/account_header",["require","exports","jquery"],function(e,t,n){"use strict";function o(t,o,r){n(t).add(o).on("click",function(t){t.preventDefault(),e(["modules/clean/account_photo_modal/controller"],function(e){return(0,e.AccountPhotoModalController.show)()})}),n(document).on("db:account_photo:photo_set",function(e){return n(o).addClass(r)}),n(document).on("db:account_photo:photo_deleted",function(e){return n(o).removeClass(r)})}function r(e){o(e.open_modal_button_selector,e.add_photo_link_selector,e.hide_add_photo_link_class)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=o,t.initialize_module=r}),define("modules/clean/dropbox_nav",["require","exports","jquery","modules/clean/analytics"],function(e,t,n,o){"use strict";return(function(){function e(){var e=this;n(".composer-nav-item").click(function(){return e.log_click("composer_nav_link_click")}),n(".mailbox-nav-item").click(function(){return e.log_click("mailbox_nav_link_click")})}return e.prototype.log_click=function(e){return o.WebMiscActivityLogger.log(e)},e})()}),define("modules/clean/growth/admin_console_ad",["require","exports","jquery","modules/clean/analytics","modules/clean/dbmodal","modules/core/browser"],function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(){function e(e,t,s){var a=this;this.handleCTAClick=function(e){if(e.preventDefault(),e.target){var t=n(e.target).attr("href");o.TeamsWebActionsLogger.log("click_admin_console_ad_cta",{},function(){return i.redirect(t)})}},this.handleLinkClick=function(e){return e.preventDefault(),o.TeamsWebActionsLogger.log("click_admin_console_ad"),a.modal.show(),n(a.cta_selector).off(),n(a.cta_selector).click(a.handleCTAClick)},this.cta_selector=s,this.modal=new r.DBModal({element_id:t}),n(e).click(this.handleLinkClick)}return e})();t.AdminConsoleAd=s}),define("modules/clean/sharing/sharing_model_modals",["require","exports","jquery","modules/clean/analytics"],function(e,t,n,o){"use strict";function r(t){return o.LegacySharingVortexLogger.log("initialize-sharing-model-modals"),t.instances.forEach(function(t){return n("#"+t.accept_button_dom_id).on("click",function(t){return e(["legacy_js/dropbox"],function(e){var t=e.SharingModel,n=e.Modal;return t.do_remove(n.vars)})}),n("#"+t.cancel_button_dom_id).on("click",function(t){return e(["legacy_js/dropbox"],function(e){return e.Modal.hide()})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.initialize_module=r}),define("modules/clean/teams/limited_team_invite_modal",["require","exports","external/create-react-class","external/react","external/prop-types","external/lodash","modules/clean/ajax","modules/clean/analytics","modules/clean/contacts/contact","modules/clean/react/modal","modules/clean/teams/limited_team_invite_form","modules/clean/viewer","modules/core/html","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,t,n,o,r,i,s,a,c,l,u,m,d,_,f,h){"use strict";var p=m.Viewer.get_viewer();return n({displayName:"LimitedTeamInviteModal",propTypes:{onInvited:r.func,onDismiss:r.func,populatedCustomMessage:r.string,populatedContacts:r.arrayOf(r.instanceOf(c.Contact)),memberInviteLimit:r.number,maxTeamSize:r.number},getInitialState:function(){return{canProceed:!1,submitting:!1}},_canProceed:function(){return(null!=this.refs.members?this.refs.members.areAllContactsValid():void 0)&&!(null!=this.refs.members?this.refs.members.isEmpty():void 0)},onClickInvite:function(e){var t=this;return e.preventDefault(),this.refs.members.getFinalData(function(e){var n=e.emails,o=e.custom_message,r=t._canProceed();if(t.setState({canProceed:r}),r)return t.setState({submitting:!0}),s.WebRequest({url:"/account/team/add_users",subject_user:p.work_user,data:{emails:n,custom_message:o,team_id:p.team_id},complete:function(){if(t.isMounted())return t.setState({submitting:!1})},success:function(e){e=JSON.parse(e);var n=i.values(e.users);if(n.length>0){if(null!=t.props.memberInviteLimit){var o=t.props.memberInviteLimit-n.length;if(o>0){var r={tk:t.props.memberInviteLimit,_camp:"flash"},s=new h.URI({path:"/team/upgrade",query:r}),a=_.ungettext('Members invited. You can invite %(num_rem)s more member before you need to upgrade to Dropbox Business. <a href="%(upsell_url)s">Upgrade now.</a>','Members invited. You can invite %(num_rem)s more members before you need to upgrade to Dropbox Business. <a href="%(upsell_url)s">Upgrade now.</a>',o).format({num_rem:o,upsell_url:s.toString()});f.Notify.success(new d.HTML(a))}}else f.Notify.success(_.ungettext("Member invited.","Members invited.",n.length));return"function"==typeof t.props.onInvited&&t.props.onInvited(),t.refs.modal.close()}return f.Notify.error(_._("There was a problem completing this request."))},error:function(e){return"rate-limit"===e.getResponseHeader("x-dropbox-app-error")?f.Notify.error(new d.HTML(_._('%(team_name)s has reached the maximum number of team members allowed on Dropbox Basic. Please <a href="/business/contact">contact sales</a> to add more members to your team.').format({team_name:p.team_name}))):f.Notify.error(_._("There was a problem completing this request."))}})})},onDismissModal:function(){return a.TeamsWebActionsLogger.log("canceled_invite_team_members"),"function"==typeof this.props.onDismiss?this.props.onDismiss():void 0},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},_getAcceptButtonText:function(){return _.ungettext("Send invite","Send invites",(null!=this.refs.members?this.refs.members.getContacts().length:void 0)||0)},render:function(){return o.createElement(l.Modal,{title:_._("Invite members to your team"),acceptButtonText:this._getAcceptButtonText(),dismissButtonText:_._("Cancel"),onAccept:this.onClickInvite,onDismiss:this.onDismissModal,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,className:"limited-team-invite-modal",ref:"modal"},o.createElement(u.LimitedTeamInviteForm,{ref:"members",user:p.work_user,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!0,populatedCustomMessage:this.props.populatedCustomMessage,populatedContacts:this.props.populatedContacts,autofocusTokenizer:!0,memberInviteLimit:this.props.memberInviteLimit,maxTeamSize:this.props.maxTeamSize}))}})}),define("modules/clean/teams/suggest_invites_modal",["require","exports","tslib","external/react","external/react-dom-factories","modules/clean/ajax","modules/clean/analytics","modules/clean/react/modal","modules/clean/teams/limited_team_invite_form","modules/clean/viewer","modules/core/browser","modules/core/i18n","modules/core/notify"],function(e,t,n,o,r,i,s,a,c,l,u,m,d){"use strict";var _=o.createElement,f=l.Viewer.get_viewer();return(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={canProceed:!1,submitting:!1},t._canProceed=function(){return(null!=t.refs.members?t.refs.members.areAllContactsValid():void 0)&&!(null!=t.refs.members?t.refs.members.isEmpty():void 0)},t.onClickInvite=function(e){return e.preventDefault(),t.refs.members.getFinalData(function(e){var n=e.emails,o=t._canProceed();if(t.setState({canProceed:o}),o)return t.setState({submitting:!0}),i.WebRequest({url:"/team/manage/suggest-members",data:{emails:n,url:u.get_href()},complete:function(){return t.setState({submitting:!1})},success:function(){var e=null;return e=n.length>1?m._("Thanks for your suggestions! We’ve sent them to the team admin."):m._("Thanks for your suggestion! We’ve sent it to the team admin."),d.Notify.success(e),t.refs.modal.close()}})})},t.onClickCancel=function(){var e=t.props,n=e.numProvisionedLicenses,o=e.teamId,r=e.teamMembersLimit,i=e.teamType;s.TeamsWebActionsLogger.log("suggest_members_cancel",{license_limit:r,provisioned_licenses:n,team_id:o,team_type:i,url:u.get_href()})},t.onMembersFormChange=function(){return t.setState({canProceed:t._canProceed()})},t}return n.__extends(t,e),t.prototype.render=function(){return _(a.Modal,{className:"no-scroll-modal",title:m._("Suggest %(team_name)s team members").format({team_name:f.team_name}),acceptButtonText:m._("Send suggestions"),dismissButtonText:m._("Cancel"),onAccept:this.onClickInvite,onDismiss:this.onClickCancel,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,ref:"modal"},r.div({className:"suggest_invite_modal_notice"},m._("We’ll email your suggestions to your team admin, so they can send out invitations.")),_(c.LimitedTeamInviteForm,{ref:"members",user:f.work_user,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!1,includeCustomMessage:!1,emailPlaceholder:m._("Email addresses"),autofocusTokenizer:!0}))},t.displayName="SuggestInvitesModal",t})(o.Component)}),define("modules/clean/unity_browse_interface",["require","exports","modules/clean/unity/check_file_cache","modules/clean/unity/features","jquery"],function(e,t,n,o){"use strict";var r=(function(){function e(){}return e.initClass=function(){var e=this;this.BATCH_SIZE_LIMIT=100,this.CHECK_FILES_PADDING=50,this.check_file_callback=function(e){return n.set_batch(e)},this.browse_visible_change_callback=function(t,n,r,i){if(t.length){var s=Math.max(0,r-e.CHECK_FILES_PADDING),a=Math.min(t.length-1,i+e.CHECK_FILES_PADDING),c=t.slice(s,+a+1||void 0),l=e._get_files_to_check(c);if(l.length)return e._remove_unneeded_items_from_cache(c),(function(){for(var t=[];l.length;){var r=l.splice(0,e.BATCH_SIZE_LIMIT);t.push(o.check_file_batch(r,n,e.check_file_callback))}return t})()}},this._get_files_to_check=function(e){return(function(){for(var t=[],o=0,r=Array.from(e);o<r.length;o++){var i=r[o];i.bytes>=0&&n.is_cached_and_locally_available(i.ns_id,i.ns_path)!==!0&&t.push(i)}return t})()},this._remove_unneeded_items_from_cache=function(e){for(var t={},r=0,i=Array.from(e);r<i.length;r++){var s=i[r];if(n.is_cached_and_locally_available(s.ns_id,s.ns_path)===!0){var a=n.get(s.ns_id,s.ns_path);t[o.server_path(s.ns_id,s.ns_path)]=a}}return n.clear(),n.set_batch(t)}},e})();r.initClass();var i=r;return null!=n&&null!=o||(i=void 0),i});
//# sourceMappingURL=pkg-legacy-ag.min.js-vflrP5l2W.map