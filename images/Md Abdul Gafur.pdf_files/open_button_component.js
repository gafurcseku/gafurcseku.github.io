define(["require","exports","tslib","external/react","external/classnames","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/coachmark_wrapper","modules/clean/react/file_viewer/open_button/utils","modules/clean/react/file_viewer/open_button/types","modules/clean/react/paper/open_in_paper_button","modules/clean/react/file_viewer/unity/with_unity","modules/clean/react/file_viewer/utils","modules/clean/react/sprite_div","modules/core/i18n","react-dom","modules/clean/react/paper/open_in_paper_callout_loader","modules/clean/react/paper/utils","spectrum/button","spectrum/popover"],function(e,t,n,o,i,r,a,l,p,s,u,c,d,h,_,f,m,C,b,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var O=(D={},D[s.OpenButtonAction.DOWNLOAD]="open-button__download",D[s.OpenButtonAction.UNITY_FILE]="open-button__unity",D[s.OpenButtonAction.UNITY_FOLDER]="open-button__unity-folder",D[s.OpenButtonAction.OPEN_WITH]="open-button__open-with",D),k=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasBeenClicked:!1},t.handleActionClick=function(e,n){t.handleClick(),t.props.onClick&&t.props.onClick(),e.handler();var o=d.getSplitButtonUserActionContext(n,t.props.location);r.logUserAction(e.userAction,o)},t.handleClick=function(){t.setState({hasBeenClicked:!0})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.file,i=t.hasOpenInPaperSupport,r=t.buttonVariant,a=t.isUnityDisabled,s=t.isOpenWithDisabled,u=t.unityInfo,c=t.sizeClass,d=t.user,h=this.state.hasBeenClicked,_=p.getOpenOptions({file:n,hasOpenInPaperSupport:i,isUnityDisabled:a,isOpenWithDisabled:s,unityInfo:u,user:d});return o.createElement("div",{className:"open-button",ref:function(t){return e.ref=f.findDOMNode(t)}},o.createElement(l.OpenButtonCoachmarkWrapper,{inDropdown:1!==_.length,file:n,user:d,shouldShowCoachmark:p.shouldShowCoachmark(_,u)&&!h},0===_.length?o.createElement(B,{buttonVariant:r}):1===_.length?o.createElement(g,{file:n,buttonVariant:r,onClick:this.handleActionClick,option:_[0],user:d}):o.createElement(E,{file:n,buttonVariant:r,onItemClick:this.handleActionClick,onTriggerClick:this.handleClick,options:_,user:d})),i?o.createElement(m.OpenInPaperCalloutLoader,{file:n,parentHasBeenClicked:h,sizeClass:c,targetNode:this.ref,user:d,variant:C.OpenInPaperButtonVariant.Dropdown}):null)},t.defaultProps={isUnityDisabled:!1,isOpenWithDisabled:!1,justifyRight:!0,buttonVariant:"secondary"},t})(o.Component);t._OpenButton=k;var y=function(e){var t=e.option,n=e.file,i=e.user,r=t.type;return o.createElement(v.PopoverContentItem,{key:t.text,value:t},r===s.OpenButtonAction.OPEN_IN_PAPER?o.createElement(u.OpenInPaperButton,{file:n,user:i,inDropdown:!0,hideCallout:!0}):o.createElement(h,{group:"web",name:t.spriteName,text:t.text}))},E=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePopoverSelection=function(e,n){n&&(n.preventDefault(),n.stopPropagation()),t.props.onItemClick&&t.props.onItemClick(e,a.SplitButtonActionLocation.Split)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this;return o.createElement(v.Popover,{onSelection:this.handlePopoverSelection},o.createElement(v.PopoverTrigger,null,o.createElement(b.Button,{className:i("download-button","control__button"),onClick:this.props.onTriggerClick,tagName:"span",variant:this.props.buttonVariant},_._("Open â–¾"))),o.createElement(v.PopoverContent,{attachment:"right"},this.props.options.map(function(t){return o.createElement(y,{option:t,file:e.props.file,user:e.props.user})})))},t})(o.Component),g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.stopPropagation(),t.props.onClick&&t.props.onClick(t.props.option,a.SplitButtonActionLocation.Main)},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.option,t=e.type;return t===s.OpenButtonAction.OPEN_IN_PAPER?o.createElement(u.OpenInPaperButton,{file:this.props.file,user:this.props.user,inDropdown:!1,hideCallout:!0}):o.createElement(b.Button,{className:"control__button "+O[t],variant:this.props.buttonVariant,onClick:this.handleClick},t===s.OpenButtonAction.DOWNLOAD?_._("Download"):_._("Open"))},t})(o.Component),B=function(e){var t=e.buttonVariant;return o.createElement(b.Button,{"aria-label":_._("Disabled open button"),className:"control__button",disabled:!0,variant:t})},P=function(e){return o.createElement(c.WithUnity,{file:e.file,isUnityDisabled:e.isUnityDisabled,user:e.user,render:function(t){return o.createElement(k,n.__assign({},e,{unityInfo:t}))}})};t.OpenButton=P;var D});
//# sourceMappingURL=open_button_component.min.js-vfljLccaF.map