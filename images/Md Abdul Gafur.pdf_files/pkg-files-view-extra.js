define("modules/clean/react/browse/util",["require","exports","modules/clean/react/browse/models","modules/core/i18n"],function(e,t,o,i){"use strict";function r(e,t){var r=e.count(),n=i._("You only have partial access");return r>0?1!==r||o.File.canViewFileMembers(e.first(),t)?i.ungettext("%(count)d item selected","%(count)d items selected",r).format({count:r}):o.File.isNoAccessSharedFolder(e.first())?i._("You don’t have access to this folder"):n:t&&!t.canViewContainingNSMembers?n:""}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedFilesText=r}),define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function o(){Array.from(document.querySelectorAll(n)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function i(){Array.from(document.querySelectorAll(n)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function r(t){var o=t.containerId,i=t.files,r=t.fileViewAction,n=t.fileViewOrigin,l=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,c=t.onFileViewerUnmount,d=t.shouldFocusComment,u=void 0!==d&&d,p=t.updateBrowserLocation,h=void 0===p||p,f=t.user;e(["modules/clean/react/file_viewer/controller"],function(e){e.open(i,a,f,o,{fileViewTarget:l,fileViewOrigin:n,fileViewAction:r,shouldFocusCommentInput:u,disableRouting:!h,onComponentDidMount:s,onComponentWillUnmount:c})})}Object.defineProperty(t,"__esModule",{value:!0});var n=[".maestro-chrome","#maestro-nav","#page-footer","#page-header","#page-sidebar","#browse-box",".growth-onboarding-progress-bar__container",".team-progress-bar-experience","#flash-upload-container"].join();t.hideElementsBehindFileViewer=o,t.showElementsBehindFileViewer=i,t.asyncOpenPreview=r}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PAGE_HEADER_HEIGHT=96,t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_VIEWPORT_TOP_OFFSET=t.DEFAULT_PAGE_HEADER_HEIGHT+t.DEFAULT_COLUMN_HEADER_HEIGHT,t.COMPACT_PAGE_HEADER_HEIGHT=76,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.COMPACT_VIEWPORT_TOP_OFFSET=t.COMPACT_PAGE_HEADER_HEIGHT+t.COMPACT_COLUMN_HEADER_HEIGHT,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={2:[t.CHECKBOX_CELL_FLEX,"1 1 66%","0 0 34%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:i._("Name"),popoverTriggerLabel:i._("Name"),isLocked:!0},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified")},{sortField:o.SortField.SHARED_WITH,label:i._("Members"),popoverTriggerLabel:i._("Members")},{sortField:o.SortField.CATEGORY,label:i._("Type"),popoverTriggerLabel:i._("Type")},{sortField:o.SortField.EXTENSION,label:i._("Extension"),popoverTriggerLabel:i._("Extension")},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:i._("Name"),popoverTriggerLabel:i._("Name")},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified")},{sortField:o.SortField.CATEGORY,label:i._("Type"),popoverTriggerLabel:i._("Type")},{sortField:o.SortField.EXTENSION,label:i._("Extension"),popoverTriggerLabel:i._("Extension")},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Deleted"),popoverTriggerLabel:i._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[o.NewFolderCreationState.CREATE_FOLDER_INACTIVE,o.NewFolderCreationState.PENDING_INPUT,o.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[o.RenameState.PENDING_INPUT,o.RenameState.SAVING_INPUT],t.AllViewTypes=[o.ViewType.Grid,o.ViewType.LargeGrid,o.ViewType.List],t.ViewTypeLabels=(r={},r[o.ViewType.Grid]=i._("Small"),r[o.ViewType.List]=i._("List"),r[o.ViewType.LargeGrid]=i._("Large"),r),t.AllDropTargetHighlightModes=[o.DropTargetHighlightMode.NONE,o.DropTargetHighlightMode.ALL_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[o.LoadingState.LOADED,o.LoadingState.LOADING_FIRST_PAGE,o.LoadingState.LOADING_REMAINING_PAGES],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=(n={},n[o.ViewType.Grid]=256,n[o.ViewType.LargeGrid]=512,n[o.ViewType.List]=32,n),t.ViewTypeGridSizes=(l={},l[o.ViewType.Grid]=160,l[o.ViewType.LargeGrid]=480,l[o.ViewType.List]=0,l);var r,n,l}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,o,i){"use strict";function r(e,t,o,r,n,l,s){a.add(e,"dragenter",function(e){(t()||o())&&!i.closestElement(e.target,n)&&l()&&(s(null),r())})}function n(e){a.remove(e,"dragenter")}function l(e,t,i,r,n,l,a,s){if(t||i){if(e.is_dir&&!(r&&i)){if(n)return;var c=l.isCurrentPathWriteable()&&!o.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:c})}else a(null),s()}}Object.defineProperty(t,"__esModule",{value:!0});var a=new i.ScopedEventHandlers(document);t.setupExternalDragHandler=r,t.cleanupExternalDragHandler=n,t.onFileDragEnterItem=l}),define("modules/clean/react/files_view/file_grouper",["require","exports","modules/core/i18n","modules/clean/datetime","modules/clean/react/browse/constants","modules/clean/react/files_view/types","modules/clean/react/browse/models"],function(e,t,o,i,r,n,l){"use strict";function a(e){return e instanceof l.File?l.File.getCategoryDescription(e,!0):r.ExtensionCategories.DOCUMENT}function s(e){return e instanceof l.File?e.is_dir?r.FileTypeCapitalizedCategoryTranslations.FOLDER:l.File.getExtension(e).toUpperCase():u}function c(e){return e instanceof l.File&&e.ts?1e3*e.ts:e instanceof l.Paper?Date.parse(e.last_modified_date):0}function d(e,t,r){var l=[],d=[],h=null;if(t===n.SortField.CATEGORY)e.forEach(function(e,t){if(e){var o=a(e);o!==h&&(l.push(o),d.push(t),h=o)}});else if(t===n.SortField.EXTENSION)e.forEach(function(e,t){if(e){var o=s(e);if(o!==h){var i=o;""===o&&(i=u),l.push(i),d.push(t),h=o}}});else if(t===n.SortField.MODIFIED)if(r===n.SortDirection.DESCENDING){var f=i.getTimeBands(Date.now());e.forEach(function(e,t){if(e){var i,r=c(e);i=r>=f.today?o._("Today"):r>=f.yesterday?o._("Yesterday"):r>=f.thisWeek?o._("This week"):r>=f.lastWeek?o._("Last week"):r>=f.thisMonth?o._("This month"):r>=f.lastMonth?o._("Last month"):r>=f.lastThreeMonths?o._("Three months ago"):o._("Older"),i!==h&&(l.push(i),d.push(t),h=i)}})}else e.forEach(function(e,t){if(e){var o;if(c(e)){var r=new Date(c(e)),n=r.getMonth(),a=r.getFullYear();o=i.month_with_year(n,a)}else o=p;o!==h&&(l.push(o),d.push(t),h=o)}});return{sectionLabels:l,sectionStartIndices:d}}Object.defineProperty(t,"__esModule",{value:!0});var u=o._("Extensionless",{comment:"Label for files without extensions like .txt or .png"}),p=o._("Missing dates",{comment:"label for group of files without dates marking when they are created or modified"});t.getSections=d}),define("modules/clean/react/files_view/file_jump",["require","exports","modules/clean/keycode","modules/core/dom"],function(e,t,o,i){"use strict";function r(e,t,r,a){var s=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(s);s<o.KeyCode.SPACE||n.includes(c)||i.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||s===o.KeyCode.SPACE&&!t()||(s===o.KeyCode.SPACE&&t()&&e.preventDefault(),r(c),null!=l&&clearTimeout(l),l=setTimeout(function(){a()},1e3))}Object.defineProperty(t,"__esModule",{value:!0});var n=["/","\\",":","?","*","<",">","|"],l=null;t.handleKeyPress=r}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/react","spectrum/media_table","spectrum/table"],function(e,t,o,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI()},t.prototype._renderTitle=function(){return i.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,o=e.subtitleLink,r=e.subtitleOnClick;return t&&o?i.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:o,onClick:r},t):t?i.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(i.createElement(r.MediaRow,{key:-t-1}));for(var o=[],l=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<l;t++)o.push(i.createElement(r.MediaRow,{key:t+1}));return i.createElement(n.Table,{className:"empty-folder-table"},i.createElement(n.TableHead,null),i.createElement(n.TableBody,null,e,i.createElement(r.MediaRow,{key:0},i.createElement(r.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),o))},t.defaultProps={numRowsAbove:2,totalRows:14},t})(i.PureComponent);t.EmptyFolderTable=l}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,o,i,r,n){"use strict";function l(e){var t=e.file,n=e.isSelected,l=e.dropTargetHighlightMode;if(l===i.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(r.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(l){case i.DropTargetHighlightMode.ALL_FOLDERS:return!0;case i.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!n;case i.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!n&&t.type!==o.FileTypes.SHARED_FOLDER;case i.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!n&&![o.FileTypes.SHARED_FOLDER,o.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function a(e){var t=e.context,i=e.file;e.user;return i.isDeleted||i.is_dir&&n.shouldUsePublicFolderSharing(t.config,i.fq_path)||r.File.isTeamMemberFolder(i)||!r.File.canViewFileMembers(i,t)||i.type===o.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=l,t.isSharingDisabledForFile=a}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","external/keymaster","external/react-dom","modules/clean/undo","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/react/files_view/file_jump","modules/clean/react/no-jquery"],function(e,t,o,i,r,n,l,a,s,c){"use strict";function d(e){o.clearScope(e),o.setScope(E)}function u(e,t){return function(o){e(o)&&(o.preventDefault(),"function"==typeof t&&t(o))}}function p(e){return function(t){return!document.activeElement||document.activeElement===document.body||i.findDOMNode(e).contains(t.target)}}function h(e){d(e),S.remove(e,"keydown"),S.remove(e,"keyup")}function f(e){var t=e.getIsGlobalEvent,i=e.getIsItemEvent,s=e.getSelectedFiles,c=e.isFilesViewList,d=e.isCurrentPathWriteable,p=e.selectAllAction,h=e.deselectAllAction,f=e.onCopyToClipboard,m=e.onDelete,_=e.onPasteFromClipboard,g=e.onShowRename,S=e.onShowHelpMenu,T=e.scope;E=o.getScope(),E!==T&&o.setScope(T);var w=function(){var e=s(),t=e.some(function(e){return e.read_only});if(1===e.size)if(d()&&!t){var o=e.first();o.isDeleted?a.Notify.error(l._("Deleted files can’t be renamed.")):g(o)}else a.Notify.warning(l._("You don’t have permission to rename files in this folder."))},v=function(){var e=s();e.size&&m(e.toArray())},I=function(){r.performUndo()},L=function(){return document.getElementsByClassName("search-bar__text-input")[0].focus()};o("f2",T,u(i,w)),o("/",T,u(t,L)),o("shift+/",T,u(t,function(){return S(!!c)})),o("escape",T,u(t,h)),n.mac?(o("command+a",T,u(t,p)),o("command+c",T,u(i,f)),o("backspace",T,u(i,v)),o("command+v",T,u(t,_)),o("command+z",T,u(t,I))):(o("ctrl+a",T,u(t,p)),o("ctrl+c",T,u(i,f)),o("delete",T,u(i,v)),o("ctrl+v",T,u(t,_)),o("ctrl+z",T,u(t,I)))}function m(e){var t=e.getIsGlobalEvent,i=e.getIsItemEvent,r=e.getSelectedFiles,n=e.isCurrentPathWriteable,l=e.enableContextMenu,a=e.selectAllAction,s=e.deselectAllAction,d=e.onCopyToClipboard,p=e.onDelete,h=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,_=e.onPasteFromClipboard,g=e.onShowRename,E=e.onShowHelpMenu,S=e.openContextMenuAtPosition,T=e.scope;f({getIsGlobalEvent:t,getIsItemEvent:i,getSelectedFiles:r,isFilesViewList:!0,isCurrentPathWriteable:n,selectAllAction:a,deselectAllAction:s,onCopyToClipboard:d,onDelete:p,onPasteFromClipboard:_,onShowRename:g,onShowHelpMenu:E,scope:T});var w=function(){var e=r();1===e.size&&h(e.first())},v=function(){var e=r(),t=e.first();1===e.size&&t.is_dir&&h(t)},I=function(e){if("function"==typeof S&&r().size){var t=c.closestElement(e.target,".browse-file-row--is-selected");if(t){S(t.offsetLeft+200,t.offsetTop+5,t)}}else S(10,10)};o("enter",T,u(i,w)),o("right",T,u(i,v)),o("left",T,u(t,m)),l()&&o("alt+a",T,u(t,I))}function _(e){var t=e.scope,i=e.getIsFileJumping,r=e.onAddFileJumpKeyCode,n=e.onResetFileJump,l=function(e){o.getScope()===t&&s.handleKeyPress(e,i,r,n)};S.add(t,"keypress",l)}function g(e){S.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),t.FILES_VIEW_SHORTCUTS=[{windowsKey:"Enter",macKey:"return",desc:l._("Open file or folder")},{key:"/",desc:l._("Search")},{windowsKey:"Ctrl + a",macKey:"⌘ + a",desc:l._("Select all files")},{windowsKey:"Esc",macKey:"esc",desc:l._("Deselect all files")},{windowsKey:"Ctrl + c",macKey:"⌘ + c",desc:l._("Copy selected file(s)")},{windowsKey:"Ctrl + v",macKey:"⌘ + v",desc:l._("Paste selected file(s) into the current folder")},{key:"F2",desc:l._("Rename selected file")},{windowsKey:"Delete",macKey:"delete",desc:l._("Delete selected file(s)")},{windowsKey:"Ctrl + z",macKey:"⌘ + z",desc:l._("Undo recent move/copy/rename/delete")},{key:"?",desc:l._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:"↑",desc:l._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:l._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:l._("Go up a folder")},{key:"→",desc:l._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:"↑",desc:l._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:l._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:l._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"→",desc:l._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var E="",S=new c.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=p,t.resetFilesViewKeyboardShortcuts=h,t.setupFilesViewKeyboardShortcuts=f,t.setupFilesViewListKeyboardShortcuts=m,t.setupFileJumpKeyboardShortcuts=_,t.resetFileJumpKeyboardShortcuts=g}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","external/react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,o,i,r,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setInputRef=function(e){t.inputRef=e},t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(l.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===n.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:l.NameInputActionSource.ESC})):e.keyCode===n.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(l.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.focus(),window.requestAnimationFrame(function(){var t=e.inputRef.value,o=e.props.isDir?t.length:t.lastIndexOf(".");o<0&&(o=t.length),e.inputRef.setSelectionRange(0,o)})},t.prototype.submitIfChanged=function(e){var t=this.inputRef.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)},t.prototype.render=function(){return r.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},r.createElement("input",{ref:this.setInputRef,defaultValue:this.props.defaultValue,className:i("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(r.PureComponent);t.NameInput=s}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","external/react","spectrum/overflow_button","spectrum/popover","modules/core/i18n","external/lodash","modules/clean/react/browse/constants"],function(e,t,o,i,r,n,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(c=t.OverflowMenuSize||(t.OverflowMenuSize={}));var d=(function(e){function t(t){var o=e.call(this,t)||this;return o.onClick=function(e){e.preventDefault(),e.stopPropagation(),o.setPopoverContentPosition()},o.handleSelection=function(e){e.performAction()},o.setOverflowMenuRef=function(e){o.overflowMenuContent=e},o.state={popoverContentPosition:"below"},o}return o.__extends(t,e),t.prototype.renderOverflowButton=function(){return i.createElement(r.OverflowButton,{"aria-label":l._("More actions"),className:"browse-overflow-menu-trigger-button",tagName:"span",size:this.props.size===c.Small?"small":"default",variant:this.props.showBorders?"secondary":"borderless"})},t.prototype.setPopoverContentPosition=function(){var e=this.overflowMenuContent.getElementsByClassName("browse-overflow-menu-trigger-button")[0],t=s.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*this.props.actionItemsGroups[0].length+2*s.OverflowMenuConstants.MENU_MARGIN_PX;this.props.actionItemsGroups.length>1&&(t+=s.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*this.props.actionItemsGroups[1].length+s.OverflowMenuConstants.MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX);var o=e.getBoundingClientRect();o.top>t+s.CulledListConstants.DEFAULT_HEADER_HEIGHT_PX&&o.bottom+t>window.innerHeight?this.setState({popoverContentPosition:"above"}):this.setState({popoverContentPosition:"below"})},t.prototype._getMenuItems=function(){var e=this.props.actionItemsGroups;return a.reduce(e,function(e,t,o){var r=t.map(function(e){return i.createElement(n.PopoverContentItem,{className:e.className,key:e.label,value:e,disabled:e.disabled},e.label)});return o?e.concat([i.createElement(n.PopoverItemGroupSeparator,{key:o})],r):r.slice()},[])},t.prototype.render=function(){var e=this.props.attachment,t=this._getMenuItems();return i.createElement("div",{className:"browse-overflow-menu",onClick:this.onClick,onDoubleClick:this.onClick,ref:this.setOverflowMenuRef},i.createElement(n.Popover,{onSelection:this.handleSelection,closeOnSelection:!0},i.createElement(n.PopoverTrigger,{className:"browse-overflow-menu-trigger"},this.renderOverflowButton()),i.createElement(n.PopoverContent,{attachment:e,position:this.state.popoverContentPosition,className:"browse-overflow-menu-content"},t)))},t.defaultProps={attachment:"right"},t})(i.PureComponent);t.FilesViewOverflowMenu=d}),define("modules/clean/react/files_view/overflow_menu_with_star",["require","exports","tslib","external/react","modules/clean/react/files_view/overflow_menu"],function(e,t,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e){function t(t){var o=e.call(this,t)||this;return o.state=o.getStateFromProps(),o}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.canDisplayFolderSizes===e.canDisplayFolderSizes&&this.props.starredLoadingState===e.starredLoadingState&&this.props.file===e.file||this.setState(this.getStateFromProps(e))},t.prototype.getStateFromProps=function(e){void 0===e&&(e=this.props);var t=e.file,o=e.canDisplayFolderSizes;return{actionItems:(0,e.getOverflowMenuActions)(t,!!o)}},t.prototype.render=function(){var e=this.props,t=e.file,o=e.attachment,n=e.showBorders,l=e.size,a=this.state.actionItems;return i.createElement(r.FilesViewOverflowMenu,{file:t,attachment:o,actionItemsGroups:[a],size:l,showBorders:n})},t})(i.PureComponent);t.OverflowMenuWithStar=n}),define("modules/clean/react/files_view/star",["require","exports","external/react","modules/core/exception"],function(e,t,o,i){"use strict";function r(t){var r,n,l=t.item,a=t.user,s=t.className,c=t.onStarClick,d=t.isReadOnly,u=t.isTabbing,p=e("modules/clean/react/starred/browse_exports"),h=p.Star,f=p.HOME_RESOURCE_ID_TYPE,m=p.StarredSource;return l.file_id?(r=l.file_id,n=f.ENCODED_FILE_OBJ_ID):l.pad_id?(r=l.pad_id,n=f.PAPER_DOCUMENT_ID):l.folder_id?(r=l.folder_id,n=f.PAPER_FOLDER_ID):(i.assert(!!l.fq_path,"Starrable item is not valid. It requires file_id, pad_id, folder_id or fq_path."),r=l.fq_path,n=f.FQ_PATH),o.createElement("div",{className:s},o.createElement(h,{id:r,key:"star",idType:n,user:a,onStarClick:c,source:m.BROWSE,isReadOnly:d,isTabbing:u}))}Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=r}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","external/classnames","external/immutable","external/react","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/core/browser","modules/clean/react/files_view/file_grouper","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/overflow_menu_with_star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/util","modules/clean/react/selectable_list","modules/clean/react/files_view/star","modules/clean/react/maestro/tile_grid","modules/clean/react/title_bubble","modules/core/i18n","modules/core/uri","modules/clean/browse_interface"],function(e,t,o,i,r,n,l,a,s,c,d,u,p,h,f,m,_,g,E,S,T,w,v,I,L,b,y,F){"use strict";function N(e,t){var o;return e.thumbnail_url_tmpl&&(o=y.URI.parse(e.thumbnail_url_tmpl),o=o.removeQuery("size").removeQuery("size_mode"),o=o.updateQuery({size:t+"x"+t,size_mode:"2"}).toString()),o}Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailUrlForItem=N;var C=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var o=t.props,i=o.onStarClick,r=o.item,n=r;i&&i(n,e)},t}return o.__extends(t,e),t.prototype.render=function(){var e,t=this.props,o=t.fileRename,i=t.arePostTTIModulesLoaded,r=t.user,l=t.item,c=t.inSelectMode,d=t.createRenameCancelHandler,u=t.createRenameSubmitHandler,p=l instanceof h.File,f=l,m=l;if(e=p?s.filename(f.fq_path):m.title,p&&o&&s.paths_are_equal(o.file.fq_path,f.fq_path)){if(o.state===g.RenameState.PENDING_INPUT)return n.createElement(_.TileLabelInput,{defaultValue:e,label:e,onCancel:d(f),onSubmit:u(f)});if(o.state===g.RenameState.SAVING_INPUT)return n.createElement(I.TileItemLabelText,{className:"tile-label__text--saving",label:b._("Renaming…")})}var E=a.Emstring.em_snippet(e,14,.5),S=i&&!c&&!h.File.isNoAccessSharedFolder(f),T=n.createElement(I.TileItemLabelText,{key:"label",label:E});e!==E&&(T=n.createElement(L.TitleBubble,{content:e,position:L.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},T));var w=p?this.onStarClickCallback:void 0,y=n.createElement(v.StarContainer,{item:l,user:r,className:"tile-star",key:"tileStar",onStarClick:w});return n.createElement("span",null,[T,S&&!o&&y])},t})(n.PureComponent);t.TileLabel=C;var D=(function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={inSelectMode:!1,sectionLabels:r.List(),sectionStartIndices:r.List(),selectedIds:r.Set(),totalNumItems:0},e.handleFileViewerUnmount=function(){e.tileGrid&&e.tileGrid.getAndUpdateTileLayout();var t=e.props.selectedFiles.first();t&&e.props.onFocusFile(t.fq_path)},e.createRenameCancelHandler=function(t){return function(){e.props.onRenameCancel(t)}},e.createRenameSubmitHandler=function(t){return function(o){e.props.onRenameSubmit(t,o)}},e.setTileGridRef=function(t){e.tileGrid=t},e.hrefForItem=function(e,t){return t instanceof h.File?F.href_for_file(e,t):t.url},e.getTileItem=function(t,i){var r,a=e.props,c=a.activeDropTarget,d=a.isCreateFolderUIActive,u=a.isPhotosPage,p=a.items,f=a.selection,m=a.user,_=a.viewType,g=e.state.inSelectMode;if(d){if(0===t)return e.getCreateFolderTile();t-=1}var S=p.get(t);if(!S){var T="Placeholder "+t;return{altText:T,id:T,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var w=S instanceof h.File,v=S,I=S,L=e.createViewFileHandler(v),y=e.createToggleSelectHandler(v),F=L,C=!1,D=!1;w&&(r=e.renderTileOverflowMenu(v,i)),g&&w&&(C=f.selected.last()===v.fq_path,D=f.selected.has(v.fq_path),F=y,w&&(r=n.createElement(l.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":b._("View File"),onClick:L})));var R=u?void 0:e.renderLabelElement(S),O=w?s.filename(v.fq_path):I.title,A=w?N(v,E.ViewTypeThumbnailSizes[_]):void 0,M=S===c,P=e.hrefForItem(m,S),H={file:v,paper:S instanceof h.Paper?I:void 0,id:w?v.fq_path:I.pad_id,labelNode:R,altText:O,thumbnailUrl:A,actionNode:r,onTileAction:F,isDraggable:!1,isFocused:C,isSelectable:w,handleToggleSelect:y,checkboxAriaText:b._("Select tile"),href:P};return u||(H=o.__assign({},H,{isDraggable:!0,onDragEnter:e.createDragEnterHandler(v,D,M),onDragStart:e.createDragStartHandler(v,D,y)})),H},e.shouldFileBeHighlightedDropTarget=function(t,o){var i=e.props.dropTargetHighlightMode;return u.shouldFileBeHighlightedDropTarget({file:t,isSelected:o,dropTargetHighlightMode:i})},e}return o.__extends(a,t),a.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setTotalNumItems(this.props),this.setTileItemsSections(this.props),this.setSelectedTiles(this.props)},a.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},a.prototype.componentWillUnmount=function(){this.props.isPhotosPage||p.resetFileJumpKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE),p.resetFilesViewKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE),S.cleanupExternalDragHandler(w.SELECTABLE_TILE_GRID_KEY_SCOPE)},a.prototype.componentWillReceiveProps=function(e){e.items===this.props.items&&e.createNewFolderState===this.props.createNewFolderState||this.setTotalNumItems(e),e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0})),e.activeSortField===this.props.activeSortField&&e.activeSortDirection===this.props.activeSortDirection&&e.sections===this.props.sections&&e.items===this.props.items||this.setTileItemsSections(e)},a.prototype.componentDidUpdate=function(e){(e.createNewFolderState===g.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===g.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGrid.forceUpdate()},a.prototype.setTotalNumItems=function(e){var t=Math.max(e.items.size,e.totalNumItems);e.isCreateFolderUIActive&&(t+=1),this.setState({totalNumItems:t})},a.prototype.setTileItemsSections=function(e){var t;t=e.sections?e.sections:e.activeSortField?d.getSections(e.items,e.activeSortField,e.activeSortDirection):{sectionLabels:[],sectionStartIndices:[]},this.setState({sectionLabels:r.List(t.sectionLabels),sectionStartIndices:r.List(t.sectionStartIndices)})},a.prototype.createToggleSelectHandler=function(e){var t=this,o=e.fq_path;return function(e){e.preventDefault(),e.stopPropagation();var i=t.props.selection;i=i.selected.has(o)?i.update("selected",function(e){return e.delete(o)}):i.update("selected",function(e){return e.add(o)}).set("anchor",o),t.props.onSelectionChange(i)}},a.prototype.renderTileOverflowMenu=function(t,o){var i=this.props,r=i.getOverflowMenuActions,l=i.arePostTTIModulesLoaded,a=i.starredState,s=0===o?"left":"right";if(l){var c=void 0;if(a){c=a[e("modules/clean/react/starred/browse_exports").HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+t.file_id]}return n.createElement(m.OverflowMenuWithStar,{file:t,getOverflowMenuActions:r,attachment:s,size:f.OverflowMenuSize.Small,showBorders:!0,starredLoadingState:c})}return null},a.prototype.renderLabelElement=function(e){var t=this.state.inSelectMode,i=this.props,r=i.user,l=i.fileRename,a=i.arePostTTIModulesLoaded,s=i.onStarClick,c={user:r,fileRename:l,arePostTTIModulesLoaded:a,onStarClick:s};return n.createElement(C,o.__assign({},c,{item:e,inSelectMode:t,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler}))},a.prototype.createViewFileHandler=function(e){var t=this;return function(o){if(o.preventDefault(),o.stopPropagation(),"click"===o.type){var i=o;if(0===i.button){var r=t.hrefForItem(t.props.user,e);if(T.hasModifierKey(i))return void c.open_tab(r)}}e instanceof h.File?t.props.onNavigateToFileOrFolder(e,t.handleFileViewerUnmount):e instanceof h.Paper&&t.props.onOpenPaper(e)}},a.prototype.setSelectedTiles=function(e){var t=r.Set().withMutations(function(t){e.selectedFiles.forEach(function(e){t.add(e.fq_path)})});this.setState({selectedIds:t})},a.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},o=function(){return!!e.props.isDraggingExternalFiles},i=function(){return e.props.activeDropTarget};S.setupExternalDragHandler(w.SELECTABLE_TILE_GRID_KEY_SCOPE,t,o,this.props.onSetFileUploaderPath,".tile",i,this.props.onSetDropTarget)},a.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,o=t.onDelete,i=t.onShowRename,r=t.deselectAll,n=t.getIsCurrentPathWriteable,l=t.getIsFileJumping,a=t.onAddFileJumpKeyCode,s=t.onResetFileJump,c=t.onCopyToClipboard,d=t.onPasteFromClipboard,u=t.selectAll,h=p.generateGetIsGlobalEvent(this),f=h,m=function(){return e.props.selectedFiles};this.props.isPhotosPage||p.setupFileJumpKeyboardShortcuts({scope:w.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:l,onAddFileJumpKeyCode:a,
onResetFileJump:s}),p.setupFilesViewKeyboardShortcuts({getIsGlobalEvent:h,getIsItemEvent:f,getSelectedFiles:m,isFilesViewList:!1,isCurrentPathWriteable:n,selectAllAction:u,deselectAllAction:r,onCopyToClipboard:c,onDelete:o,onPasteFromClipboard:d,onShowRename:i,scope:w.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},a.prototype.createDragEnterHandler=function(e,t,o){var i=this;return function(r){i.props.onDragEnter(r,e,t,o)}},a.prototype.createDragStartHandler=function(e,t,o){var i=this;return function(r){t?i.props.onDragStart(r):(o(r),i.props.onDragStart(r,[e]))}},a.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,o=e.onNewFolderCancel,i=e.onNewFolderSubmit,r=b._("New folder"),l=n.createElement("div",null);return t===g.NewFolderCreationState.PENDING_INPUT?(r=b._("Folder name"),l=n.createElement(_.TileLabelInput,{label:r,onCancel:o,onSubmit:i})):t===g.NewFolderCreationState.SAVING_INPUT&&(r=b._("Creating new folder…"),l=n.createElement(I.TileItemLabelText,{className:"tile-label__text--saving",label:r})),{altText:r,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:l}},a.prototype.getTileGridRef=function(){return this.tileGrid},a.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,o=e.viewType,r=i({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode}),l=new Set;return this.state.selectedIds.forEach(function(e){return l.add(e)}),n.createElement("div",null,n.createElement(I.InfiniteTileGrid,{key:"tileGrid",ref:this.setTileGridRef,totalNumItems:this.state.totalNumItems,containerClass:r,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:E.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:E.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:this.state.sectionStartIndices.toArray(),sectionLabels:this.state.sectionLabels.toArray(),showLabels:!this.props.isPhotosPage,contentOffset:136,getTileItem:this.getTileItem,selectedIds:l,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:E.ViewTypeGridSizes[o],tileHeight:E.ViewTypeGridSizes[o],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget}))},a.defaultProps={enableMaxHeightGrouping:!1},a})(n.PureComponent);t.FilesViewTileGrid=D}),define("modules/clean/react/files_view/tile_label_input",["require","exports","external/classnames","external/react","modules/clean/react/files_view/name_input"],function(e,t,o,i,r){"use strict";function n(e){var t=o("tile-label-input",e.className),n=e.defaultValue||"",l=function(e){e.stopPropagation(),e.preventDefault()};return i.createElement(r.NameInput,{className:t,defaultValue:n,label:e.label,onCancel:e.onCancel,onClick:l,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=n}),define("modules/clean/react/files_view/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={}));(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={}));(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={}));(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES"})(t.LoadingState||(t.LoadingState={}));(function(e){e.FILENAME="FILENAME",e.MODIFIED="MODIFIED",e.CATEGORY="CATEGORY",e.EXTENSION="EXTENSION",e.SIZE="SIZE",e.SHARED_WITH="SHARED_WITH",e.SYNC_SETTING="SYNC_SETTING",e.FILE_COUNTS="FILE_COUNTS"})(t.SortField||(t.SortField={}));(function(e){e.FILENAME="FILES_BY_NAME",e.MODIFIED="FILES_BY_MODIFIED",e.CATEGORY="FILES_BY_CATEGORY",e.EXTENSION="FILES_BY_NAME",e.SIZE="FILES_BY_SIZE",e.SHARED_WITH="FILES_BY_NAME",e.SYNC_SETTING="FILES_BY_SYNC_SETTING",e.FILE_COUNTS="FILES_BY_FILE_COUNTS"})(t.SortLabel||(t.SortLabel={}));(function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"})(t.SortDirection||(t.SortDirection={}));(function(e){e.Grid="GRID_VIEW",e.List="LIST_VIEW",e.LargeGrid="LARGE_GRID_VIEW"})(t.ViewType||(t.ViewType={}));(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(t.FetchFolderSizeState||(t.FetchFolderSizeState={}));(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSELECTED_FOLDERS="NONSELECTED_FOLDERS",e.NONSELECTED_NONSHARED_FOLDERS="NONSELECTED_NONSHARED_FOLDERS",e.NONSELECTED_NONSHARED_NONTEAM_FOLDERS="NONSELECTED_NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))}),define("modules/clean/react/files_view/util",["require","exports"],function(e,t){"use strict";function o(e){return 0===e.button&&!i(e)}function i(e){return e.altKey||e.ctrlKey||e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldHandleClick=o,t.hasModifierKey=i}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","external/react","external/react-dom","external/classnames","modules/clean/js_client_stopwatch","spectrum/culled_list","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger"],function(e,t,o,i,r,n,l,a,s,c){"use strict";function d(e){var t=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(!t||t.length!==o.length||!t.every(function(e,t){return e===o[t]}))return t=o,e.apply(void 0,o)}}function u(e){var t=e.className,o=e.label;return t=n("tile-label__text",t),i.createElement("div",{className:t},o)}Object.defineProperty(t,"__esModule",{value:!0});t.memoizeCallback=d,t.TileItemLabelText=u;var p=(function(e){function t(t){var o=e.call(this,t)||this;if(o.ttiReported=!1,o.itemRangeByRow=[],o.scrollTileIntoView=function(e,t){var i=o.props.contentOffset||0,r=document.documentElement.scrollTop||document.body.scrollTop,n=Math.floor(t/o.props.tilesPerRow),l=e-i,a=o.getRowHeight(),s=n*a,c=s+a;r<=s&&c<=l+r||(s<r?window.scrollTo(0,s):window.scrollTo(0,c-l))},o.updateOnResize=function(){window.requestAnimationFrame(function(){o.getAndUpdateTileLayout()})},o.handleTTI=function(){o.ttiReported=!0;var e=o.props.handleTTI;e&&e()},o.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,i=Math.round(t/e);if(o.tileLoadLogger.pruneTrackedPages(),o.tileLoadLogger.logCompletedPages(),!o.tileLoadLogger.pagesCompletedLogging.has(i)&&!o.tileLoadLogger.pagesToLog.has(i))if(i!==o.tileLoadLogger.lastViewedPage){if(o.tileLoadLogger.lastViewedPage=i,o.tileLoadLogger.pageChangeTime=o.tileLoadLogger.getTimeNow(),!o.tileLoadLogger.startTimeByPage.get(i)){var r=o.tileLoadLogger.getTimeNow();o.tileLoadLogger.startTimeByPage.set(i,r)}}else{var r=o.tileLoadLogger.getTimeNow();r-o.tileLoadLogger.pageChangeTime>1e3&&o.tileLoadLogger.pagesToLog.add(i)}},o.logTileError=function(e){o.tileLoadLogger&&o.tileLoadLogger.recordTileError(e),o.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},o.logTileLoaded=function(e,t,i){o.tileLoadLogger&&o.tileLoadLogger.recordTileLoaded(e,t,i)},o.renderTileElement=function(e,t,r){if(e<0||e>o.props.totalNumItems)return null;var n=o.props.getTileItem(e,r);if(!n)return i.createElement(s.TilePlaceholder,{leftOffset:t,tileHeight:o.state.tileWidth,tileWidth:o.state.tileWidth});var l=o.ttiReported&&o.props.delayRenderFullTile,a=n.isSelectable&&!!o.props.selectedIds&&o.props.selectedIds.has(n.id),c=n.file&&o.props.shouldFileBeHighlightedDropTarget(n.file,a),d=c&&n.file===o.props.activeDropTarget;return i.createElement(s.TileElement,{file:n.file,paper:n.paper,key:n.id,onTileAction:n.onTileAction,width:o.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:n.labelNode?o.props.labelHeight:0,delayRenderFullTile:l,actionNode:n.actionNode,thumbnailUrl:n.thumbnailUrl,labelNode:n.labelNode,altText:n.altText,onThumbnailError:o.props.logTileLoading?o.logTileError:void 0,onThumbnailLoad:o.props.logTileLoading?o.logTileLoaded:void 0,isDraggable:n.isDraggable,onDragEnter:n.onDragEnter,onDragStart:n.onDragStart,isFocused:n.isFocused,isSelectable:n.isSelectable,isSelected:a,isViewOnly:n.isViewOnly,isActiveDropTarget:d,isAvailableDropTarget:c,handleToggleSelect:n.handleToggleSelect,checkboxAriaText:n.checkboxAriaText,thumbStore:o.props.thumbStore,scrollTileIntoView:o.scrollTileIntoView,href:n.href})},o.renderRow=function(e,t,r){var n=o.rowHeights?o.rowHeights[t]:o.getRowHeight();if(!e)return i.createElement(a.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"li",topOffset:r});if(!Array.isArray(e))return i.createElement(a.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"li",topOffset:r},e);for(var l=e,s=l[0],c=l[1],d=o.state.tileWidth+o.props.tilePadding,u=[],p=4,h=s;h<c;h++)u.push(o.renderTileElement(h,p,u.length)),p+=d;return i.createElement(a.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"li",topOffset:r},u)},o.handleRangeInView=d(function(e,t){var i=o.props.onRangeInView;if(i){var r=o.translateRowRangeToItemRange(e,t);i(r[0],r[1])}}),o.props.sectionLabels||o.props.sectionStartIndices){if(!o.props.sectionLabels||!o.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(o.props.sectionLabels.length!==o.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return o.state={tileWidth:o.props.maxTileWidth},l.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),o}return o.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout()},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(){var e=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(e+=this.props.labelHeight+4),e},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,o=e-t,i=this.getRowHeight(),r=i*Math.ceil(o/i);return Math.max(r,i)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=r.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var o=t.clientWidth,i=Math.max(1,Math.floor(o/e)),n=this.props.maxTileWidth;return o%e>1&&(i++,n=o/i-this.props.tilePadding),this.state.tileWidth!==n&&this.setState({tileWidth:n}),this.props.tilesPerRow!==i&&this.props.onTilesPerRowChange(i),{tileWidth:n,tilesPerRow:i}},t.prototype.setupTileLogging=function(e,t){var o=this.getPageHeight(),i=t*Math.ceil(o/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,i,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var r=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,r),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,o)},t.prototype.translateRowRangeToItemRange=function(e,t){var o=this.itemRangeByRow;return[o[e][0],o[t][1]]},t.prototype.render=function(){var e=this,t=this.itemRangeByRow;t.length=0;var o=[],r=this.getRowHeight(),n=this.props,l=n.containerClass,s=n.enableMaxHeightGrouping,c=n.numThresholdRows,d=n.scrollDeltaThreshold,u=n.sectionStartIndices,p=n.sectionLabels,h=n.totalNumItems;if(u&&u.length>0)return this.rowHeights=[],u.forEach(function(n,l){var a=h;l!==u.length-1&&(a=u[l+1]),e.rowHeights.push(32);var s=a-n,c=Math.ceil(s/e.props.tilesPerRow),d=p[l],f=i.createElement("div",{className:"tile-section-header"},d);o.push(f),t.push([n,n]);for(var m=0;m<c;m++){var _=n+m*e.props.tilesPerRow,g=Math.min(_+e.props.tilesPerRow,a),E=[_,g];o.push(E),t.push(E),e.rowHeights.push(r)}}),i.createElement(a.CulledList,{enableMaxHeightGrouping:s,items:o,listItemHeight:this.rowHeights,itemBuffer:c,className:l,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView});for(var f=Math.ceil(h/this.props.tilesPerRow),m=0;m<f;m++){var _=m*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,h),E=[_,g];o.push(E),t.push(E)}return i.createElement(a.CulledList,{enableMaxHeightGrouping:s,items:o,listItemHeight:r,itemBuffer:c,className:l,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(e,t){return null},handleTTI:function(){}},t})(i.PureComponent);t.InfiniteTileGrid=p}),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/core/browser","modules/clean/sharing/gating_util","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],function(e,t,o,i,r,n,l,a){"use strict";function s(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e(["modules/clean/sharing/shared_content_link_mount_folder"],function(e){e.mountSharedFolder.apply(void 0,t)})}function c(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(o){return[2,new Promise(function(o,i){e(["modules/clean/sharing/ui_util"],function(e){o(e.genContentManagerBridgeUri.apply(void 0,t))},i)})]})})}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(o){switch(o.label){case 0:return[4,c.apply(void 0,e)];case 1:return t=o.sent(),i.open_tab(t.toString()),[2]}})})}function u(t,o,i,r,n,l,a){e(["modules/clean/sharing/cdm_new_folder_modal"],function(e){e.showCdmNewFolderModal(t,o,i,r,n,l,a)})}function p(t){return o.__awaiter(this,void 0,void 0,function(){var i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,new Promise(function(t,o){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,o)})];case 1:return i=o.sent(),i.showAppropriateNewFolderModalForCdmUser(t),[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMountSharedFolder=s,t.asyncGoToContentManagerForPath=d,t.asyncShowCdmNewFolderModal=u,t.asyncShowAppropriateNewFolderModalForCdmUser=p,t.GoldenGate=r.GoldenGate,t.asyncShowShareModal=n.asyncShowShareModal,t.asyncShowNewFolderShareModal=n.asyncShowNewFolderShareModal,t.asyncShowPrefilledShareModal=n.asyncShowPrefilledShareModal,t.asyncShowSharedContentLinkSyncModal=n.asyncShowSharedContentLinkSyncModal,t.expAsyncShowShareInterstitialModal=n.expAsyncShowShareInterstitialModal,t.makePublicFolderLink=l.makePublicFolderLink,t.shouldUsePublicFolderSharing=l.shouldUsePublicFolderSharing,t.showPublicFolderLinkModal=l.showPublicFolderLinkModal,t.asyncShowShareAFolderWizardModal=a.asyncShowShareAFolderWizardModal});
//# sourceMappingURL=pkg-files-view-extra.min.js-vfl6XGQ-G.map