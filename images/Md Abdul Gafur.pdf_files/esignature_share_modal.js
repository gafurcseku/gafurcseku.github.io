define(["require","exports","tslib","esignature_prototype/api","esignature_prototype/components/esignature_share_modal/share_modal_error_message","esignature_prototype/components/esignature_share_modal/share_modal_footer","esignature_prototype/components/esignature_share_modal/share_modal_main_section","external/lodash","external/react","modules/clean/flux/store_listener","modules/clean/react/css","modules/clean/react/modal","modules/clean/sharing/ui_util","modules/clean/sharing/stores/sharing_info","modules/clean/sharing/views/share_modal_contacts_section","modules/clean/sharing/views/share_modal_header_section","spectrum/modal"],function(e,n,t,o,a,s,r,i,c,l,d,u,m,p,h,g,_){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var S=function(e){var n=e.actionHandler.getSharingInfo(),o={actionHandler:e.actionHandler,contactsError:n.contactsError(),contentInfo:n.contentInfo(),initialRecipientTokens:n.initialRecipientTokens(),isTokenizerEmpty:n.isTokenizerEmpty(),recipientMessage:n.recipientMessage(),uiMode:n.uiMode()};return t.__assign({},n.getInitialProps(),o)},f=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.setContactsSectionRef=function(e){n.contactsSection=e},n.handleSendButtonClick=function(){var e=n.props,t=e.actionHandler,a=e.contactsError,s=e.createRequestArg,r=e.recipientMessage,c=e.sendForSignature,l=e.user,d=n.contactsSection.getContacts();t.recipientsChange(d).then(function(){if(a.level!==m.ContactsErrorLevel.Error&&d.length>0&&d[0].email){var e=i.clone(s);e.recipient_emails=[d[0].email],e.recipient_message=r,o.sendSignatureRequest(e,l.id),c(),u.Modal.close()}})},n}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.actionHandler,t=e.contentInfo,o=e.user,l=e.initialRecipientTokens,d=e.contactsError,m=e.recipientMessage,p=e.uiMode,S=e.isTokenizerEmpty;return c.createElement(_.Modal,{ariaLabel:"Esignature Sharing Modal",className:"scl-share-modal esignature-share-modal",bodyClassName:"scl-share-modal-content",overlayClassName:"esignature-share-modal-overlay",displayCloseButton:!1,open:!0,width:540,overlayClickClose:!0,onRequestClose:u.Modal.close},c.createElement(g.ShareModalHeaderSection,{actionHandler:n,contentInfo:t,canEdit:!0,isTeamSharedFolder:!1,isMetadataLoaded:!0,onModalCloseClick:u.Modal.close,onSettingsButtonClick:i.noop,onContentNameInputChange:i.noop,onContentNameInputKeyUp:i.noop,sharingInfo:n.getSharingInfo(),showPassFileSettings:!1,user:o,isSendingForSignature:!0}),c.createElement(h.ShareModalContactsSection,{ref:this.setContactsSectionRef,actionHandler:n,canInviteEditor:!1,canInviteViewer:!1,contentInfo:t,initialAccessLevel:"signer",initialTypeaheadTokens:l,isFolderInsideTeamFolderTree:!1,isInContentManager:!1,isTeamSharedFolder:!1,memberCountWithRecipients:0,typeaheadPlaceholder:"Email or name",user:o,isSendingForSignature:!0}),c.createElement(a.ShareModalErrorMessage,{error:d}),c.createElement(r.ShareModalMainSection,{actionHandler:n,mode:p,recipientMessage:m}),c.createElement(s.ShareModalFooter,{mode:p,contentInfo:t,contactsError:d,isTokenizerEmpty:S,onSendButtonClick:this.handleSendButtonClick}))},n})(c.Component),M=l.listenToStores(f,{sharingInfoStore:p.sharingInfoStore},S),C=d(M,["/static/js/spectrum-sharing/index.web-vfl4sPYVH.css","/static/css/esignature_prototype/modals-vflQGMBU2.css","/static/css/react/contacts_tokenizer-vflQsfYaG.css","/static/css/scooter/scooter-scoped-vflrM1SRf.css","/static/css/sharing/share_modal-vflFs4QGO.css","/static/css/modal-vflI292PU.css"]);n.EsignatureShareModal=C});
//# sourceMappingURL=esignature_share_modal.min.js-vfl2sYoyA.map