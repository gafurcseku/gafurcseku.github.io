define(["require","exports","tslib","modules/clean/ajax","modules/clean/browse_interface","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/async_file_modal_controller","modules/clean/react/async_fileops_modals","modules/clean/react/async_move_suggestion_modal","modules/clean/react/async_overquota_modal_controller","modules/clean/react/browse/action_logger","modules/clean/react/browse/logger_util","modules/clean/react/browse/actions","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/react/modal","modules/clean/search/search_results/log_helper","modules/clean/sharing/browse_exports","modules/clean/sharing/constants","modules/clean/react/starred/browse_exports","modules/clean/unity/features","modules/clean/unity/check_file_cache","modules/clean/react/browse/professional_collection_actions","modules/clean/viewer","modules/core/browser","modules/core/i18n","modules/core/uri","modules/clean/react/browse/client_download_modal","modules/clean/web_user_action_events","modules/clean/react/browse/nav_actions","modules/clean/react/fileops_actions","modules/clean/react/folder_dialog/api","modules/clean/react/folder_dialog/constants","modules/clean/react/badge","modules/clean/growth/showcase_upsell/showcase_upsell_tracker","modules/clean/sharing/views/exp_showcase_share_interstitial"],function(e,o,s,r,i,n,t,a,l,c,d,u,h,w,f,_,p,m,v,S,F,y,A,g,b,M,T,E,N,C,D,O,R,I,P,L,U){"use strict";function k(e){return e.isDeleted||e.is_unmounted}function x(e){var o=e.toArray().map(function(e){return e.fq_path});return n.inSameDirectory(o)}function V(e){var o=e.result,s=e.files,r=e.user,i=e.action_type,n=e.isSearchMode,t=e.view_type,a=e.source,l=h.countFilesAndFolders(s),c=l.num_files_selected,d=l.num_folders_selected;n&&m.recordSearchResultsAction({result:o,user:r,action_type:i,view_type:t}),u.logBrowseAction(r.id,a,i,c,d,t,o)}function q(e){var o=e.context,r=e.files,i=e.user,n=e.viewType,t=e.canDisplayFolderSizes,a=void 0!==t&&t,l=e.isSearchMode,c=void 0!==l&&l,d=e.isQueryingFolderSizes,u=e.showAddToShowcase,h=void 0!==u&&u,w=e.showAddFolderToShowcase,f=void 0!==w&&w,_=e.showAddToShowcaseUpsell,p=void 0!==_&&_,m=e.hasShowcaseFreemium,v=void 0!==m&&m,S=e.isSidebar,F=s.__assign({},Q);if(o.isInsideArchivedTeamFolder)return F.showDownload=!0,F;var y=r.every(function(e){return!k(e)}),A=!y&&r.every(function(e){return k(e)});return y?W({actions:F,canDisplayFolderSizes:a,context:o,files:r,isQueryingFolderSizes:d,isSearchMode:c,showAddToShowcase:h,showAddFolderToShowcase:f,showAddToShowcaseUpsell:p,hasShowcaseFreemium:v,isSidebar:S,user:i,viewType:n}):A?B({actions:F,files:r,context:o,user:i}):F}function W(e){var o,s=e.actions,r=e.context,i=e.files,n=e.user,a=e.viewType,l=e.canDisplayFolderSizes,c=void 0!==l&&l,d=e.isQueryingFolderSizes,u=void 0!==d&&d,h=e.isSearchMode,w=void 0!==h&&h,_=e.showAddToShowcase,p=void 0!==_&&_,m=e.showAddFolderToShowcase,S=void 0!==m&&m,g=e.showAddToShowcaseUpsell,M=void 0!==g&&g,T=e.hasShowcaseFreemium,E=void 0!==T&&T,N=e.isSidebar,C=void 0!==N&&N,D=1===i.count(),O=D&&!i.first().is_dir,R=D&&i.first().is_dir,I=i.every(function(e){return e.type===t.FileTypes.FILE}),P=i.some(function(e){return e.type===t.FileTypes.TEAM_SHARED_FOLDER}),L=i.some(function(e){return e.type===t.FileTypes.TEAM_MEMBER_FOLDER}),U=i.some(function(e){return e.type===t.FileTypes.SANDBOX}),k=!1;if(P||L||(s.showCopy=!0,s.showDelete=!0,s.showMove=!0,s.showRename=D),P&&R&&n&&v.GoldenGate.hasContentManagerAndSuperAdmin(n.id)&&(s.showRenameTeamFolder=!0,s.showArchive=!0),!b.Viewer.get_viewer().is_assume_user_session&&n&&v.GoldenGate.hasContentManagerAndSuperAdmin(n.id)&&v.GoldenGate.hasNewOwnershipModel(n.id)&&r.isInsideTeamFolderTree&&(s.showManageAsAdmin=!0),D){var V=i.first();o=v.shouldUsePublicFolderSharing(r.config,V.fq_path),o||L||U||(s.showTiburonShare=!0),k=null!=y&&null!=A&&A.is_cached_and_locally_available(V.ns_id,V.ns_path),k&&(s.showOpen=!0)}if(s.showShowInFolder=w&&x(i),O&&(s.showComment=!0,s.showVersions=!0,r.isInFolderMode?s.showCopyPublicFolderFileLink=!!o:s.showCopyPublicFolderFileLink=!1),k||(s.showDownload=r.isInFolderMode||O||w),(I||S&&R)&&r.isCurrentPathWriteable()&&(p&&!E||E&&C?s.showProfessionalCollectionShare=!0:M&&(s.showProfessionalCollectionShareUpsell=!0)),D){var q=i.first().type;q!==t.FileTypes.SHARED_FOLDER&&q!==t.FileTypes.TEAM_SHARED_FOLDER||(s.showSharedFolderEvents=!0),R&&null==i.first().fetchFolderSizesStatus&&!u&&!w&&a!==f.ViewType.Grid&&c&&(s.showCalculateFolderSize=!0)}if(D){var W={id:i.first().file_id,type:F.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID},B=F.StarredStore.getIsLoading(W),z=F.StarredStore.getIsStarred(W);s.showStar=z===!1,s.showUnstar=z===!0,s.showLoadingStar=B}return s}function B(e){var o=e.actions,s=e.files,r=e.context,i=e.user,n=s.first();if(s.some(function(e){return e.is_unmounted||e.ns_id!==n.ns_id}))return o;1===s.count()&&n.is_dir&&r.inactiveNSIDByFQPath[n.fq_path.toLowerCase()]&&!r.isInsideTeamFolderTree?o.showReadd=!0:o.showRestore=!0;var t;if(r.isInFolderMode)t=r.permanentDeletionDisabledStateByNSID[r.currentNSID];else{t=s.map(function(e){return e.ns_id}).some(function(e){return r.permanentDeletionDisabledStateByNSID[e]})}return!b.Viewer.get_viewer().is_assume_user_session&&i&&v.GoldenGate.hasContentManagerAndSuperAdmin(i.id)&&v.GoldenGate.hasNewOwnershipModel(i.id)&&r.isInsideTeamFolderTree&&(o.showManageAsAdmin=!0),t||(o.showPermanentDelete=!0),o}function z(e,o){var s=o.user,i=o.context,t=o.firstFile,a=o.files,l=o.isSearchMode,c=o.source,d=o.viewType;if(V({result:t,files:a,user:s,action_type:C.WebUserActionLogEvent.SHARE,view_type:d,isSearchMode:l,source:c}),e.autoShareLink){var u=new E.URI({path:"/sm/create"+n.normalize(t.fq_path)});u.updateQuery("_subject_uid",s.id.toString()),u.updateQuery("redirect","0");var h=function(e){M.redirect(e)};r.WebRequest({url:u.toString(),type:"POST",success:h})}else{var w=function(){v.asyncShowShareModal(s,t,{browseContext:i,origin:S.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS},D.browseNavActions.setPath,D.browseNavActions.setUrl)};o.showShowcaseInterstitialExp?U.showShowcaseInterstitial({user:s,onClickShare:w,onClickShowcase:j(o,o.hasCreatedShowcase,o.hasShowcaseFreemium,!0)}):w()}}function H(e){var o=e.files,s=e.context,r=e.user,i=e.responsive,n=e.canDisplayFolderSizes,t=void 0!==n&&n,a=e.actionHandlers,l=e.skipSharing,c=void 0!==l&&l,d=e.source,u=e.viewType,w=e.isOverFreeQuota,f=void 0!==w&&w,p=e.isSearchMode,m=void 0!==p&&p,v=e.isQueryingFolderSizes,S=void 0!==v&&v,F=e.canShowUJPopup,y=void 0!==F&&F,A=e.showAddToShowcase,g=void 0!==A&&A,b=e.showAddFolderToShowcase,M=void 0!==b&&b,E=e.showAddToShowcaseUpsell,N=void 0!==E&&E,C=e.addToShowcaseUpsellVariant,D=void 0===C?"OFF":C,O=e.hasCreatedShowcase,R=void 0!==O&&O,I=e.hasShowcaseFreemium,U=void 0!==I&&I,k=e.isSidebar,x=void 0!==k&&k,V=e.showNewMoveDialog,W=void 0!==V&&V,B=e.showShowcaseInterstitialExp,z=void 0!==B&&B,H=e.showMoveSuggestionModal,Q=void 0!==H&&H,me=o.first(),ve=h.countFilesAndFolders(o),Se=ve.num_files_selected,Fe=ve.num_folders_selected,ye=!s.isCurrentPathWriteable()||o.some(function(e){return e.read_only}),Ae=ye,ge=ye,be=ye,Me=ye,Te=o.some(function(e){return!_.File.canViewFileMembers(e,s)}),Ee=Te,Ne=Te,Ce=o.every(_.File.isNoAccessSharedFolder),De=Ce,Oe=Ce,Re=Ce,Ie=!i.isMatchedMedium&&!i.isMatchedLarge,Pe=q({files:o,context:s,user:r,viewType:u,canDisplayFolderSizes:t,isQueryingFolderSizes:S,isSearchMode:m,showAddToShowcase:g,showAddFolderToShowcase:M,showAddToShowcaseUpsell:N,hasShowcaseFreemium:U,isSidebar:x}),Le=[],Ue={user:r,context:s,actionHandlers:a,files:o,firstFile:me,isSearchMode:m,source:d,viewType:u,hasCreatedShowcase:R,hasShowcaseFreemium:U,showShowcaseInterstitialExp:z};if(!c&&Pe.showTiburonShare){var ke=Ee;Ie?Le.push({label:T._("Share link"),performAction:J(Ue),disabled:ke,className:"action-share-link",iconName:"link"}):Le.push({label:T._("Share"),iconName:"link",performAction:Y(Ue),disabled:ke,className:"action-share"})}if(Pe.showCopyPublicFolderFileLink&&Le.push({label:T._("Copy public link"),iconName:"link",className:"action-world-link",performAction:Z(Ue)}),Pe.showOpen&&Le.push({label:T._("Open"),performAction:$(Ue),iconName:"open-in-app",className:"action-open-in-app"}),Pe.showShowInFolder&&Le.push({label:T._("Show in folder"),performAction:G(Ue),iconName:"open-in-app",className:"action-show-in-folder"}),Pe.showDownload&&Le.push({label:T._("Download"),performAction:ee({canShowUJPopup:y,args:Ue}),disabled:De,iconName:"download",className:"action-download"}),Pe.showProfessionalCollectionShare){var xe=T._("Add to showcase"),Ve=void 0;if(U){xe=T._("Share in showcase"),Ve={variant:P.BadgeVariant.PRO,color:P.BadgeColor.PINK,absolute:!0};var qe=new L.ShowcaseUpsellTracker(r.id);qe.track(L.ShowcaseUpsellActions.FREEMIUM_FILE_ACTIONS_VIEW)}Le.push({label:xe,iconName:"add-to-collection",performAction:j(Ue,R,U),className:"action-add-to-collection",badge:Ve})}if(Pe.showProfessionalCollectionShareUpsell&&"OFF"!==D){var qe=new L.ShowcaseUpsellTracker(r.id);Se>0&&qe.track(L.ShowcaseUpsellActions.FILES_VIEW_ACTION,{extra:{source:d,view_type:u,ext:me.ext||null,num_files_selected:Se,num_folders_selected:Fe}}),["V1","V2"].indexOf(D)>=0&&Le.push({label:K(D),iconName:"add-to-collection",performAction:X(Ue,D),className:"action-add-to-collection action-add-to-collection-upsell",badge:{variant:P.BadgeVariant.PRO,color:P.BadgeColor.STONE_FORTY,absolute:!0}})}if(Pe.showComment&&Le.push({label:T._("Add comment"),performAction:oe(Ue),iconName:"add-comment",className:"action-add-comment"}),Pe.showStar&&Le.push({label:T._("Star",{comment:'Verb describing the "starring" action, not the noun.'}),performAction:se({isStarred:!0,args:Ue}),disabled:Pe.showLoadingStar,iconName:"star",className:"action-star"}),Pe.showUnstar&&Le.push({label:T._("Unstar",{comment:'Verb describing the "unstarring" action.'}),performAction:se({isStarred:!1,args:Ue}),disabled:Pe.showLoadingStar,iconName:"unstar",className:"action-unstar"}),Pe.showVersions&&!Ue.firstFile.is_cloud_doc&&Le.push({label:T._("Version history"),performAction:ue(Ue),iconName:"view-version-history",className:"action-view-version-history"}),Pe.showRename&&Le.push({label:T._("Rename"),performAction:re(Ue),iconName:"rename",className:"action-rename",disabled:ge}),Pe.showRenameTeamFolder&&Le.push({label:T._("Rename"),performAction:ie(Ue),iconName:"rename",className:"action-rename"}),Pe.showArchive&&Le.push({label:T._("Archive"),performAction:ne(Ue),iconName:"delete",className:"action-delete"}),Pe.showMove){var We=f?le():te(Ue,{showMoveSuggestionModal:Q,showNewMoveDialog:W});Le.push({label:T._("Move"),performAction:We,disabled:be,iconName:"move",className:"action-move"})}if(Pe.showCopy){var Be=f?le():ae(Ue,{showNewMoveDialog:W});Le.push({label:T._("Copy"),performAction:Be,disabled:Oe,iconName:"copy",className:"action-copy"})}return Pe.showDelete&&Le.push({label:T._("Delete"),performAction:he(Ue),disabled:Ae,iconName:"delete",className:"action-delete"}),Pe.showRestore&&Le.push({label:T._("Restore"),className:"action-restore",performAction:ce({args:Ue}),disabled:Me}),Pe.showReadd&&Le.push({label:T._("Re-add shared folder"),className:"action-re-add",performAction:de(Ue),disabled:Me}),Pe.showPermanentDelete&&Le.push({label:T._("Permanently delete"),iconName:"delete",className:"action-permanently-delete",performAction:we(Ue)}),Pe.showSharedFolderEvents&&Le.push({label:T._("Events"),performAction:fe(Ue),disabled:Ne,iconName:"events",className:"action-events"}),Pe.showCalculateFolderSize&&Le.push({label:T._("Calculate size"),performAction:_e(Ue),disabled:Re,iconName:"calculate",className:"action-calculate-folder-size"}),Pe.showManageAsAdmin&&Le.push({label:T._("View in admin console"),performAction:pe(Ue),iconName:"settings-gear"}),Le}Object.defineProperty(o,"__esModule",{value:!0});var Q={showProfessionalCollectionShare:!1,showProfessionalCollectionShareUpsell:!1,showTiburonShare:!1,showCopyPublicFolderFileLink:!1,showOpen:!1,showDownload:!1,showComment:!1,showDelete:!1,showArchive:!1,showRemove:!1,showRename:!1,showRenameTeamFolder:!1,showMove:!1,showCopy:!1,showVersions:!1,showRestore:!1,showReadd:!1,showPermanentDelete:!1,showRemoveAccess:!1,showShowInFolder:!1,showStar:!1,showUnstar:!1,showLoadingStar:!1,showSharedFolderEvents:!1,showCalculateFolderSize:!1,showManageAsAdmin:!1},G=function(e){var o=e.user,s=e.files,r=e.firstFile,t=e.isSearchMode,a=e.source,l=e.viewType,c=s.map(function(e){return e.fq_path}).toArray();return function(){var e=c.map(function(e){return n.filename(e)}),d=n.parent_dir(c[0]),u=i.browse_uri_for_fq_path(o,d);e.length>1?u.updateQuery({select_multi:JSON.stringify(e)}):u.updateQuery({select:e[0]}),V({result:r,files:s,user:o,action_type:C.WebUserActionLogEvent.SHOW_IN_FOLDER,view_type:l,isSearchMode:t,source:a}),window.open(u.toString(),"_blank")}},Y=function(e){return function(){z({autoShareLink:!1},e)}},J=function(e){return function(){z({autoShareLink:!0},e)}},j=function(e,o,s,r){return function(){var i=e.user,n=e.files,t=e.firstFile,a=e.source,l=e.viewType,c=h.countFilesAndFolders(e.files),d=c.num_files_selected,w=c.num_folders_selected;if(u.logOpenAddToCollectionModal({uid:i.id,source:a,view_type:l,result:t,num_files_selected:d,num_folders_selected:w}),s&&!r){new L.ShowcaseUpsellTracker(i.id).track(L.ShowcaseUpsellActions.FREEMIUM_FILE_ACTIONS_CLICK)}if(n.count()>=1){var f=n.map(function(e){return{ns_id:e.ns_id,ns_path:e.ns_path,fq_path:e.fq_path}}).toArray();g.showAddToCollectionModal(f,i,o,s)}}},K=function(e){return"V1"===e?T._("Add to showcase"):"V2"===e?T._("Share in showcase"):T._("Add to showcase")},X=function(e,o){return function(){var s=e.user,r=e.firstFile,i=e.source,n=e.viewType,t=h.countFilesAndFolders(e.files),a=t.num_files_selected,l=t.num_folders_selected,c=new L.ShowcaseUpsellTracker(s.id),d={extra:{source:i,view_type:n,ext:r.ext||null,num_files_selected:a,num_folders_selected:l}};c.track(L.ShowcaseUpsellActions.FILES_CLICK_ACTION,d).then(function(){var e="V1"===o?"uj_showcase_upsell_files_v1":"V2"===o?"uj_showcase_upsell_files_v2":"";M.redirect("/showcases?_tk="+e)})}},Z=function(e){return function(){var o=e.user,s=e.context,r=e.firstFile;if(s.config&&r&&r.fq_path){var i=v.makePublicFolderLink(o.id,s.config,r.fq_path,r.is_dir);i&&v.showPublicFolderLinkModal(i)}}},$=function(e){return function(){var o=e.user,s=e.firstFile,r=e.files,i=e.isSearchMode,n=e.source,t=e.viewType;V({result:s,files:r,user:o,action_type:C.WebUserActionLogEvent.OPEN_DESKTOP,view_type:t,isSearchMode:i,source:n}),y.open_file(s.ns_id,s.ns_path,o.id,y.standard_open_file_handler,function(){return y.standard_open_file_handler(!1)})}},ee=function(e){var o=e.canShowUJPopup,s=e.args;return function(){var e=s.user,r=s.context,i=s.files,n=s.firstFile,t=s.isSearchMode,a=s.source,l=s.viewType;V({result:n,files:i,user:e,action_type:C.WebUserActionLogEvent.DOWNLOAD,view_type:l,isSearchMode:t,source:a}),w.browseActions.downloadFiles({files:i,context:r,user:e}),o&&N.maybeShowClientDownloadModal(!0)}},oe=function(e){return function(){var o=e.user,s=e.firstFile,r=e.files,i=e.isSearchMode,n=e.source,t=e.viewType;V({result:s,files:r,user:o,action_type:C.WebUserActionLogEvent.ADD_COMMENT,view_type:t,isSearchMode:i,source:n}),e.actionHandlers.onShowComment(s)}},se=function(e){var o=e.isStarred,s=e.args;return function(){var e=s.user,r=s.firstFile,i=s.files,n=s.isSearchMode,t=s.source,a=s.viewType;V({result:r,files:i,user:e,action_type:C.WebUserActionLogEvent.STAR,view_type:a,isSearchMode:n,source:t}),F.StarredActions.update(e.role,r.file_id,F.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID,o)}},re=function(e){return function(){var o=e.user,s=e.actionHandlers,r=e.firstFile,i=e.files,n=e.isSearchMode,t=e.source,a=e.viewType;V({result:r,files:i,user:o,action_type:C.WebUserActionLogEvent.RENAME,view_type:a,isSearchMode:n,source:t}),s.onShowRename(r)}},ie=function(e){return function(){var o=e.user,s=e.files,r=e.firstFile,i=e.isSearchMode,n=e.source,t=e.viewType;V({result:r,files:s,user:o,action_type:C.WebUserActionLogEvent.RENAME,view_type:t,isSearchMode:i,source:n}),a.showContentManagerBridge(s.toArray(),"rename",b.Viewer.get_viewer().team_is_limited)}},ne=function(e){return function(){var o=e.user,s=e.files,r=e.firstFile,i=e.isSearchMode,n=e.source,t=e.viewType;V({result:r,files:s,user:o,action_type:C.WebUserActionLogEvent.ARCHIVE,view_type:t,isSearchMode:i,source:n}),a.showContentManagerBridge(s.toArray(),"archive",b.Viewer.get_viewer().team_is_limited)}},te=function(e,o){return function(){var r=e.user,i=e.context,n=e.files,t=e.firstFile,a=e.source,d=e.isSearchMode,f=e.viewType,_=n.toArray();V({result:t,files:n,user:r,action_type:C.WebUserActionLogEvent.OPEN_MOVE_MODAL,view_type:f,isSearchMode:d,source:a});var m={user:r,files:_,path:i.currentFQPath,onSuccess:function(){var e=h.countFilesAndFolders(n),o=e.num_files_selected,s=e.num_folders_selected;u.logMoveFiles({uid:r.id,source:a,view_type:f,result:t,num_files_selected:o,num_folders_selected:s})},onRequestNotSent:function(){w.browseActions.selectFilesByFqPath({fqPathsToSelect:_.map(function(e){return e.fq_path})})},onUndo:function(){w.browseActions.selectRowsFromBoltClient(_)}};if(o.showMoveSuggestionModal)c.show(m);else if(o.showNewMoveDialog){var v={moveToFolder:function(e){var o=s.__assign({},m,{newPath:e,checkFSWs:!0});return new Promise(function(e,s){O.moveFiles(o),e()})},getFolderContents:R.getFolderContents},S={user:r,entries:_,onSuccess:function(){return p.Modal.close()},onError:function(e){return p.Modal.close()},initialFolderSelection:i.currentFQPath,onCancel:function(){return p.Modal.close()},apiClient:v};l.showMoverDialog(I.Operation.MOVE,S)}else l.showMove(m)}},ae=function(e,o){return function(){var r=e.user,i=e.files,n=e.firstFile,t=e.isSearchMode,a=e.source,c=e.viewType,d=e.context,f=i.toArray();V({result:n,files:i,user:r,action_type:C.WebUserActionLogEvent.OPEN_COPY_MODAL,view_type:c,isSearchMode:t,source:a});var _={user:r,files:f,onSuccess:function(e){var o=h.countFilesAndFolders(i),s=o.num_files_selected,t=o.num_folders_selected;u.logCopyFiles({uid:r.id,source:a,view_type:c,result:n,num_files_selected:s,num_folders_selected:t}),w.browseActions.selectRowsFromBoltClient(e)},onRequestNotSent:function(){w.browseActions.selectFilesByFqPath({fqPathsToSelect:f.map(function(e){return e.fq_path})})},onUndo:function(){w.browseActions.selectRowsFromBoltClient(f)}};if(o.showNewMoveDialog){var m={moveToFolder:function(e){var o=s.__assign({},_,{newPath:e,checkFSWs:!0});return new Promise(function(e,s){O.copyFiles(o),e()})},getFolderContents:R.getFolderContents},v={user:r,entries:f,onSuccess:function(){return p.Modal.close()},onError:function(e){return p.Modal.close()},initialFolderSelection:d.currentFQPath,onCancel:function(){return p.Modal.close()},apiClient:m};l.showMoverDialog(I.Operation.COPY,v)}else l.showCopy(_)}},le=function(){return function(){d.showOverquota("wb_oq_mv_cp")}},ce=function(e){var o=e.args;return function(){var e=o.user,s=o.actionHandlers,r=o.files,n=o.firstFile,t=o.isSearchMode,a=o.source,l=o.viewType,c=r.toArray();if(V({result:n,files:r,user:e,action_type:C.WebUserActionLogEvent.RESTORE,view_type:l,isSearchMode:t,source:a}),!t)return void w.browseActions.doRestoreFilesWithUnifiedTrashModal({files:c});if(1===r.size&&n.is_dir){var d=i.getRestoreFileUrl({fqPath:n.fq_path,userId:e.id});M.redirect(d)}else s.onRestore(c)}},de=function(e){return function(){var o=e.user,s=e.context,r=e.firstFile,i=r.fq_path.toLowerCase(),n=s.inactiveNSIDByFQPath[i];n&&v.asyncMountSharedFolder(n,o.role,S.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,!1,null,!0)}},ue=function(e){return function(){var o=e.user,s=e.firstFile,r=e.files,n=e.isSearchMode,t=e.source,a=e.viewType;V({result:s,files:r,user:o,action_type:C.WebUserActionLogEvent.VERSIONS,view_type:a,isSearchMode:n,source:t});var l=i.getFileHistoryUrl({fqPath:s.fq_path,userId:o.id});M.redirect(l)}},he=function(e){return function(){var o=e.user,s=e.actionHandlers,r=e.firstFile,i=e.files,n=e.isSearchMode,t=e.source,a=e.viewType;V({result:r,files:i,user:o,action_type:C.WebUserActionLogEvent.DELETE,view_type:a,isSearchMode:n,source:t}),s.onDelete(i.toArray())}},we=function(e){return function(){var o=e.user,s=e.actionHandlers,r=e.files,i=e.firstFile,n=e.isSearchMode,t=e.source,a=e.viewType;V({result:i,files:r,user:o,action_type:C.WebUserActionLogEvent.PERMANENT_DELETE,view_type:a,isSearchMode:n,source:t}),s.onPermanentDelete(r.toArray())}},fe=function(e){return function(){var o=e.user,s=e.firstFile,r=e.files,i=e.isSearchMode,n=e.source,t=e.viewType;V({result:s,files:r,user:o,action_type:C.WebUserActionLogEvent.EVENTS,view_type:t,isSearchMode:i,source:n}),M.redirect("/events?ns="+s.target_ns)}},_e=function(e){return function(){var o=e.firstFile;w.browseActions.fetchFolderSizes({file:o})}},pe=function(e){return function(){var o=e.user,s=e.context;v.asyncGoToContentManagerForPath({isLimitedTeam:b.Viewer.get_viewer().team_is_limited,containingFolder:s.currentFQPath,isCDM:o.is_cdm_member})}};o.getActionsForFileCollection=H});
//# sourceMappingURL=file_actions.min.js-vflnBRj_B.map